(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,98464,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},64557,67645,e=>{"use strict";var t=e.i(6865),r=e.i(82639),n=e.i(16676),i=e.i(45399),o=e.i(58003);let s=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function a(e,l={}){let c="rootStore"in e?e.rootStore:e,u=c.useState("open"),g=c.useState("floatingId"),d=c.useState("domReferenceElement"),p=c.useState("floatingElement"),{role:m="dialog"}=l,S=(0,r.useId)(),v=d?.id||S,f=t.useMemo(()=>(0,n.getFloatingFocusElement)(p)?.id||g,[p,g]),y=s.get(m)??m,h=null!=(0,i.useFloatingParentNodeId)(),E=t.useMemo(()=>"tooltip"===y||"label"===m?o.EMPTY_OBJECT:{"aria-haspopup":"alertdialog"===y?"dialog":y,"aria-expanded":"false",..."listbox"===y&&{role:"combobox"},..."menu"===y&&h&&{role:"menuitem"},..."select"===m&&{"aria-autocomplete":"none"},..."combobox"===m&&{"aria-autocomplete":"list"}},[y,h,m]),b=t.useMemo(()=>"tooltip"===y||"label"===m?{[`aria-${"label"===m?"labelledby":"describedby"}`]:u?f:void 0}:{...E,"aria-expanded":u?"true":"false","aria-controls":u?f:void 0,..."menu"===y&&{id:v}},[y,f,u,v,m,E]),T=t.useMemo(()=>{let e={id:f,...y&&{role:y}};return"tooltip"===y||"label"===m?e:{...e,..."menu"===y&&{"aria-labelledby":v}}},[y,f,v,m]),P=t.useCallback(({active:e,selected:t})=>{let r={role:"option",...e&&{id:`${f}-fui-option`}};switch(m){case"select":case"combobox":return{...r,"aria-selected":t}}return{}},[f,m]);return t.useMemo(()=>({reference:b,floating:T,item:P,trigger:E}),[b,T,E,P])}e.s(["useRole",()=>a],64557);var l=e.i(84848),c=e.i(44017),u=e.i(88659),g=e.i(99094);function d(e){let{popupStore:t,noEmit:n=!1,treatPopupAsFloatingElement:o=!1,onOpenChange:s}=e,a=(0,r.useId)(),d=null!=(0,i.useFloatingParentNodeId)(),p=t.useState("open"),m=t.useState("activeTriggerElement"),S=t.useState(o?"popupElement":"positionerElement"),v=t.context.triggerElements,f=(0,l.useRefWithInit)(()=>new g.FloatingRootStore({open:p,referenceElement:m,floatingElement:S,triggerElements:v,onOpenChange:s,floatingId:a,nested:d,noEmit:n})).current;return(0,c.useIsoLayoutEffect)(()=>{let e={open:p,floatingId:a,referenceElement:m,floatingElement:S};(0,u.isElement)(m)&&(e.domReferenceElement=m),f.state.positionReference===f.state.referenceElement&&(e.positionReference=m),f.update(e)},[p,a,m,S,f]),f.context.onOpenChange=s,f.context.nested=d,f.context.noEmit=n,f}e.s(["useSyncedFloatingRootContext",()=>d],67645)},37433,e=>{"use strict";var t=e.i(10545),r=e.i(43159),n=e.i(99094),i=e.i(58003);function o(){return{open:!1,openProp:void 0,mounted:!1,transitionStatus:"idle",floatingRootContext:new n.FloatingRootStore({open:!1,floatingElement:null,referenceElement:null,triggerElements:new r.PopupTriggerMap,floatingId:"",nested:!1,noEmit:!1,onOpenChange:void 0}),preventUnmountingOnClose:!1,payload:void 0,activeTriggerId:null,activeTriggerElement:null,triggerIdProp:void 0,popupElement:null,positionerElement:null,activeTriggerProps:i.EMPTY_OBJECT,inactiveTriggerProps:i.EMPTY_OBJECT,popupProps:i.EMPTY_OBJECT}}let s=(0,t.createSelector)(e=>e.triggerIdProp??e.activeTriggerId),a={open:(0,t.createSelector)(e=>e.openProp??e.open),mounted:(0,t.createSelector)(e=>e.mounted),transitionStatus:(0,t.createSelector)(e=>e.transitionStatus),floatingRootContext:(0,t.createSelector)(e=>e.floatingRootContext),preventUnmountingOnClose:(0,t.createSelector)(e=>e.preventUnmountingOnClose),payload:(0,t.createSelector)(e=>e.payload),activeTriggerId:s,activeTriggerElement:(0,t.createSelector)(e=>e.mounted?e.activeTriggerElement:null),isTriggerActive:(0,t.createSelector)((e,t)=>void 0!==t&&s(e)===t),isOpenedByTrigger:(0,t.createSelector)((e,t)=>void 0!==t&&s(e)===t&&e.open),isMountedByTrigger:(0,t.createSelector)((e,t)=>void 0!==t&&s(e)===t&&e.mounted),triggerProps:(0,t.createSelector)((e,t)=>t?e.activeTriggerProps:e.inactiveTriggerProps),popupProps:(0,t.createSelector)(e=>e.popupProps),popupElement:(0,t.createSelector)(e=>e.popupElement),positionerElement:(0,t.createSelector)(e=>e.positionerElement)};e.s(["createInitialPopupStoreState",()=>o,"popupStoreSelectors",0,a],37433)},46294,e=>{"use strict";var t=e.i(6865),r=e.i(15737),n=e.i(44017),i=e.i(92037),o=e.i(89876);function s(e,r){let n=t.useRef(null),i=t.useRef(null);return t.useCallback(t=>{if(void 0!==e){if(null!==n.current){let e=n.current,t=i.current,o=r.context.triggerElements.getById(e);t&&o===t&&r.context.triggerElements.delete(e),n.current=null,i.current=null}null!==t&&(n.current=e,i.current=t,r.context.triggerElements.add(e,t))}},[r,e])}function a(e,t,i,o){let a=i.useState("isMountedByTrigger",e),l=s(e,i),c=(0,r.useStableCallback)(t=>{if(l(t),!t||!i.select("open"))return;let r=i.select("activeTriggerId");r===e?i.update({activeTriggerElement:t,...o}):null==r&&i.update({activeTriggerId:e,activeTriggerElement:t,...o})});return(0,n.useIsoLayoutEffect)(()=>{a&&i.update({activeTriggerElement:t.current,...o})},[a,i,t,...Object.values(o)]),{registerTrigger:c,isMountedByThisTrigger:a}}function l(e){let t=e.useState("open");(0,n.useIsoLayoutEffect)(()=>{if(t&&!e.select("activeTriggerId")&&1===e.context.triggerElements.size){let t=e.context.triggerElements.entries().next();if(!t.done){let[r,n]=t.value;e.update({activeTriggerId:r,activeTriggerElement:n})}}},[t,e])}function c(e,t,n){let{mounted:s,setMounted:a,transitionStatus:l}=(0,i.useTransitionStatus)(e);t.useSyncedValues({mounted:s,transitionStatus:l});let c=(0,r.useStableCallback)(()=>{a(!1),t.update({activeTriggerId:null,activeTriggerElement:null,mounted:!1}),n?.(),t.context.onOpenChangeComplete?.(!1)}),u=t.useState("preventUnmountingOnClose");return(0,o.useOpenChangeComplete)({enabled:!u,open:e,ref:t.context.popupRef,onComplete(){e||c()}}),{forceUnmount:c,transitionStatus:l}}e.s(["useImplicitActiveTrigger",()=>l,"useOpenStateTransitions",()=>c,"useTriggerDataForwarding",()=>a,"useTriggerRegistration",()=>s])},81943,e=>{"use strict";var t=e.i(59443),r=e.i(6865),n=e.i(98784),i=e.i(9401),o=e.i(21181),s=e.i(58003);function a(e){let{render:a,className:l,state:c=s.EMPTY_OBJECT,props:u=s.EMPTY_ARRAY,refs:g=s.EMPTY_ARRAY,metadata:d,stateAttributesMapping:p,tag:m="div",...S}=e,{compositeProps:v,compositeRef:f}=function(e={}){let{highlightItemOnHover:t,highlightedIndex:s,onHighlightedIndexChange:a}=(0,i.useCompositeRootContext)(),{ref:l,index:c}=(0,o.useCompositeListItem)(e),u=s===c,g=r.useRef(null),d=(0,n.useMergedRefs)(l,g);return{compositeProps:r.useMemo(()=>({tabIndex:u?0:-1,onFocus(){a(c)},onMouseMove(){let e=g.current;if(!t||!e)return;let r=e.hasAttribute("disabled")||"true"===e.ariaDisabled;u||r||e.focus()}}),[u,a,c,t]),compositeRef:d,index:c}}({metadata:d});return(0,t.useRenderElement)(m,e,{state:c,ref:[...g,f],props:[v,...u,S],stateAttributesMapping:p})}e.s(["CompositeItem",()=>a],81943)},62545,e=>{"use strict";var t=e.i(79238),r=e.i(99085),n=e.i(20480),i=e.i(6865);let o="ui-settings",s="ui-settings-updated",a={enhancedView:!0,noBullshitMode:!1};function l(){let e,l,c,u,g,d,p=(0,t.c)(8),[m,S]=(0,i.useState)(a),[v,f]=(0,i.useState)(!1);p[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{let e=window.matchMedia("(min-width: 1024px)"),t=()=>f(e.matches);return t(),e.addEventListener("change",t),()=>e.removeEventListener("change",t)},l=[],p[0]=e,p[1]=l):(e=p[0],l=p[1]),(0,i.useEffect)(e,l),p[2]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{let e=()=>{let{ok:e,result:t}=(0,n.loadFromLocalStorage)(o,r.uiSettingsSchema);e?S(t):((0,n.saveToLocalStorage)(o,a),S(a))};e();let t=()=>e();return window.addEventListener("storage",t),window.addEventListener(s,t),()=>{window.removeEventListener("storage",t),window.removeEventListener(s,t)}},u=[],p[2]=c,p[3]=u):(c=p[2],u=p[3]),(0,i.useEffect)(c,u),p[4]===Symbol.for("react.memo_cache_sentinel")?(g=e=>{S(t=>{let r={...t,...e};return(0,n.saveToLocalStorage)(o,r),window.dispatchEvent(new Event(s)),r})},p[4]=g):g=p[4];let y=g;return p[5]!==v||p[6]!==m?(d={settings:m,updateSettings:y,isLargeScreen:v},p[5]=v,p[6]=m,p[7]=d):d=p[7],d}e.s(["useUiSettings",()=>l])},43130,e=>{"use strict";var t=e.i(76524),r=e.i(6865),n=e.i(85662);let i={gamePhase:"setup",players:[],matchId:null,activePlayerId:1,gameSettings:{startingScore:501,outMode:"single",gameMode:"bestOf",legsToWin:3,checkoutAssist:!1},currentLeg:1,currentVisitScores:[],currentVisitDarts:[],historyLegs:[],legWinner:null,matchWinner:null},o=(0,r.createContext)(void 0);e.s(["GameStoreContext",0,o,"GameStoreProvider",0,({children:e})=>{let s=(0,r.useRef)(null);return s.current??=((e=i)=>{var t;let r,o,s,a,l,c,u,g={...i,...e};return t=(u=(e,t)=>({...g,setPlayers(t){e(e=>{var r;let n;(t.length<1||t.length>2)&&console.warn(`Invalid player count in setPlayers: ${t.length}. Must be 1-2 players.`),r=e.gameSettings.startingScore,(t.length<1||t.length>2)&&console.warn(`Invalid player count: ${t.length}. Clamping to 1-2 players.`),0===(n=t.slice(0,2)).length&&n.push({}),e.players=n.map((e,t)=>({id:t+1,name:e.name||`Player ${t+1}`,score:r,legsWon:0,dartsThrown:0,totalScore:0,scoreHistory:[[]]})),e.activePlayerId=1})},setGameSettings(t){e({gameSettings:t})},setActivePlayer(t){e({activePlayerId:t})},setGamePhase(t){e({gamePhase:t})},restorePendingGame(t){e(e=>{(t.players.length<1||t.players.length>2)&&(console.warn(`Invalid player count in restored game: ${t.players.length}. Clamping to 1-2 players.`),t.players=t.players.slice(0,2),0===t.players.length)?console.error("Cannot restore game with no players"):(e.matchId=t.matchId,e.players=t.players,e.activePlayerId=t.activePlayerId,e.gameSettings=t.gameSettings,e.currentLeg=t.currentLeg,e.currentVisitScores=t.currentVisitScores,e.currentVisitDarts=t.currentVisitDarts,e.historyLegs=t.historyLegs,e.legWinner=null,e.matchWinner=null,e.gamePhase="playing")})},startGame(){e(e=>{e.gamePhase="playing",e.matchId=crypto.randomUUID(),e.currentLeg=1,e.currentVisitScores=[],e.currentVisitDarts=[],e.historyLegs=[{legNumber:1,winnerPlayerId:null,visits:[]}]})},finishVisit(){e(e=>{let t=e.players.find(t=>t.id===e.activePlayerId);if(t&&e.currentVisitDarts.length>0){let r=e.historyLegs[e.currentLeg-1],n=e.currentVisitDarts.reduce((e,t)=>e+t.validatedScore,0);r?.visits.push({playerId:t.id,playerName:t.name,legNumber:e.currentLeg,darts:[...e.currentVisitDarts],totalScore:n,startedScore:t.score+n,endedScore:t.score,timestamp:new Date().toISOString()})}if(e.players.length>1){let t=e.players.find(t=>t.id!==e.activePlayerId);t&&(e.activePlayerId=t.id)}e.currentVisitScores=[],e.currentVisitDarts=[]})},startNextLeg(){e(e=>{e.players.forEach(t=>{t.score=e.gameSettings.startingScore,t.scoreHistory.push([])}),e.currentLeg+=1,e.currentVisitScores=[],e.currentVisitDarts=[],e.historyLegs.push({legNumber:e.currentLeg,winnerPlayerId:null,visits:[]}),e.legWinner=null})},resetGame(){e(i)},handleDartThrow(r,n){var i,o,s;let a,l,c,u,g=t(),d=g.players.find(e=>e.id===g.activePlayerId);if(!d)throw Error("Active player not found");let{newScore:p,validatedScore:m,isBust:S,isLegWin:v}=(i=g.gameSettings,a=d.score-r,l=r,c=!1,u=!1,a<0||"double"===i.outMode&&1===a?(a=d.score,l=0,c=!0):0===a&&("single"===i.outMode||"double"===n?u=!0:(a=d.score,l=0,c=!0)),{newScore:a,validatedScore:l,isBust:c,isLegWin:u}),f=d.score<=170&&d.score>0&&("single"===g.gameSettings.outMode||1!==d.score),y="double"===n&&(50===(o=d.score)||o>0&&o<=40&&o%2==0),h=y&&!v,E="firstTo"===(s=g.gameSettings).gameMode?s.legsToWin:Math.ceil(s.legsToWin/2),b=d.legsWon+1,T=v&&b>=E,P=g.currentLeg-1,I=d.scoreHistory[P]?.reduce((e,t)=>e+t,0)??0;return e(e=>{let t=e.players.find(t=>t.id===e.activePlayerId);if(!t)return;let i=e.currentLeg-1,o=t.score;if(t.score=p,t.totalScore+=o-p,t.dartsThrown+=1,t.scoreHistory[i]??=[],t.scoreHistory[i].push(m),e.currentVisitDarts.push({score:r,modifier:n,validatedScore:m,isBust:S,isCheckoutAttempt:f,isCheckoutSuccess:v,isDoubleAttempt:y,isMissedDouble:h}),e.currentVisitScores.push(m),v){let r=e.historyLegs[e.currentLeg-1],n=e.currentVisitDarts.reduce((e,t)=>e+t.validatedScore,0);r?.visits.push({playerId:t.id,playerName:t.name,legNumber:e.currentLeg,darts:[...e.currentVisitDarts],totalScore:n,startedScore:t.score+n,endedScore:t.score,timestamp:new Date().toISOString()}),r&&(r.winnerPlayerId=t.id),e.currentVisitScores=[],e.currentVisitDarts=[],t.legsWon+=1,e.legWinner=t.id,T&&(e.matchWinner=t.id,e.gamePhase="gameOver")}}),{newScore:p,validatedScore:m,isBust:S,isLegWin:v,isMatchWin:T,matchWinner:T?d.id:null,currentVisitTotal:I+m}},handleUndoThrow(){let r=t();if(!r.players.find(e=>e.id===r.activePlayerId)||0===r.currentVisitScores.length)return{success:!1,lastScore:0,newVisitTotal:0};let n=r.currentVisitScores.at(-1),i=r.currentLeg-1,o=r.currentVisitScores.slice(0,-1).reduce((e,t)=>e+t,0);return e(e=>{let t=e.players.find(t=>t.id===e.activePlayerId);t&&(t.score+=n,t.totalScore-=n,t.dartsThrown-=1,t.scoreHistory[i]?.pop(),e.currentVisitScores.pop(),e.currentVisitDarts.pop())}),{success:!0,lastScore:n,newVisitTotal:o}}}),(e,t,r)=>(r.setState=(t,r,...i)=>e("function"==typeof t?(0,n.produce)(t):t,r,...i),u(r.setState,t,r))),o=new Set,s=(e,t)=>{let n="function"==typeof e?e(r):e;if(!Object.is(n,r)){let e=r;r=(null!=t?t:"object"!=typeof n||null===n)?n:Object.assign({},r,n),o.forEach(t=>t(r,e))}},l={setState:s,getState:a=()=>r,getInitialState:()=>c,subscribe:e=>(o.add(e),()=>o.delete(e))},c=r=t(s,a,l),l})(),(0,t.jsx)(o.Provider,{value:s.current,children:e})},"useGameStore",0,e=>{let t=(0,r.useContext)(o);if(!t)throw Error("useGameStore must be used within a GameStoreProvider");return function(e,t=e=>e){let n=r.default.useSyncExternalStore(e.subscribe,r.default.useCallback(()=>t(e.getState()),[e,t]),r.default.useCallback(()=>t(e.getInitialState()),[e,t]));return r.default.useDebugValue(n),n}(t,e)}],43130)}]);