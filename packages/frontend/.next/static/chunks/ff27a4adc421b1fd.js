(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,98464,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return i}});let i=e=>{}},64557,67645,e=>{"use strict";var t=e.i(6865),r=e.i(82639),i=e.i(16676),n=e.i(45399),o=e.i(58003);let s=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function a(e,l={}){let c="rootStore"in e?e.rootStore:e,u=c.useState("open"),g=c.useState("floatingId"),d=c.useState("domReferenceElement"),p=c.useState("floatingElement"),{role:m="dialog"}=l,S=(0,r.useId)(),f=d?.id||S,v=t.useMemo(()=>(0,i.getFloatingFocusElement)(p)?.id||g,[p,g]),y=s.get(m)??m,h=null!=(0,n.useFloatingParentNodeId)(),E=t.useMemo(()=>"tooltip"===y||"label"===m?o.EMPTY_OBJECT:{"aria-haspopup":"alertdialog"===y?"dialog":y,"aria-expanded":"false",..."listbox"===y&&{role:"combobox"},..."menu"===y&&h&&{role:"menuitem"},..."select"===m&&{"aria-autocomplete":"none"},..."combobox"===m&&{"aria-autocomplete":"list"}},[y,h,m]),b=t.useMemo(()=>"tooltip"===y||"label"===m?{[`aria-${"label"===m?"labelledby":"describedby"}`]:u?v:void 0}:{...E,"aria-expanded":u?"true":"false","aria-controls":u?v:void 0,..."menu"===y&&{id:f}},[y,v,u,f,m,E]),T=t.useMemo(()=>{let e={id:v,...y&&{role:y}};return"tooltip"===y||"label"===m?e:{...e,..."menu"===y&&{"aria-labelledby":f}}},[y,v,f,m]),P=t.useCallback(({active:e,selected:t})=>{let r={role:"option",...e&&{id:`${v}-fui-option`}};switch(m){case"select":case"combobox":return{...r,"aria-selected":t}}return{}},[v,m]);return t.useMemo(()=>({reference:b,floating:T,item:P,trigger:E}),[b,T,E,P])}e.s(["useRole",()=>a],64557);var l=e.i(84848),c=e.i(44017),u=e.i(88659),g=e.i(99094);function d(e){let{popupStore:t,noEmit:i=!1,treatPopupAsFloatingElement:o=!1,onOpenChange:s}=e,a=(0,r.useId)(),d=null!=(0,n.useFloatingParentNodeId)(),p=t.useState("open"),m=t.useState("activeTriggerElement"),S=t.useState(o?"popupElement":"positionerElement"),f=t.context.triggerElements,v=(0,l.useRefWithInit)(()=>new g.FloatingRootStore({open:p,referenceElement:m,floatingElement:S,triggerElements:f,onOpenChange:s,floatingId:a,nested:d,noEmit:i})).current;return(0,c.useIsoLayoutEffect)(()=>{let e={open:p,floatingId:a,referenceElement:m,floatingElement:S};(0,u.isElement)(m)&&(e.domReferenceElement=m),v.state.positionReference===v.state.referenceElement&&(e.positionReference=m),v.update(e)},[p,a,m,S,v]),v.context.onOpenChange=s,v.context.nested=d,v.context.noEmit=i,v}e.s(["useSyncedFloatingRootContext",()=>d],67645)},37433,e=>{"use strict";var t=e.i(10545),r=e.i(43159),i=e.i(99094),n=e.i(58003);function o(){return{open:!1,openProp:void 0,mounted:!1,transitionStatus:"idle",floatingRootContext:new i.FloatingRootStore({open:!1,floatingElement:null,referenceElement:null,triggerElements:new r.PopupTriggerMap,floatingId:"",nested:!1,noEmit:!1,onOpenChange:void 0}),preventUnmountingOnClose:!1,payload:void 0,activeTriggerId:null,activeTriggerElement:null,triggerIdProp:void 0,popupElement:null,positionerElement:null,activeTriggerProps:n.EMPTY_OBJECT,inactiveTriggerProps:n.EMPTY_OBJECT,popupProps:n.EMPTY_OBJECT}}let s=(0,t.createSelector)(e=>e.triggerIdProp??e.activeTriggerId),a={open:(0,t.createSelector)(e=>e.openProp??e.open),mounted:(0,t.createSelector)(e=>e.mounted),transitionStatus:(0,t.createSelector)(e=>e.transitionStatus),floatingRootContext:(0,t.createSelector)(e=>e.floatingRootContext),preventUnmountingOnClose:(0,t.createSelector)(e=>e.preventUnmountingOnClose),payload:(0,t.createSelector)(e=>e.payload),activeTriggerId:s,activeTriggerElement:(0,t.createSelector)(e=>e.mounted?e.activeTriggerElement:null),isTriggerActive:(0,t.createSelector)((e,t)=>void 0!==t&&s(e)===t),isOpenedByTrigger:(0,t.createSelector)((e,t)=>void 0!==t&&s(e)===t&&e.open),isMountedByTrigger:(0,t.createSelector)((e,t)=>void 0!==t&&s(e)===t&&e.mounted),triggerProps:(0,t.createSelector)((e,t)=>t?e.activeTriggerProps:e.inactiveTriggerProps),popupProps:(0,t.createSelector)(e=>e.popupProps),popupElement:(0,t.createSelector)(e=>e.popupElement),positionerElement:(0,t.createSelector)(e=>e.positionerElement)};e.s(["createInitialPopupStoreState",()=>o,"popupStoreSelectors",0,a],37433)},46294,e=>{"use strict";var t=e.i(6865),r=e.i(15737),i=e.i(44017),n=e.i(92037),o=e.i(89876);function s(e,r){let i=t.useRef(null),n=t.useRef(null);return t.useCallback(t=>{if(void 0!==e){if(null!==i.current){let e=i.current,t=n.current,o=r.context.triggerElements.getById(e);t&&o===t&&r.context.triggerElements.delete(e),i.current=null,n.current=null}null!==t&&(i.current=e,n.current=t,r.context.triggerElements.add(e,t))}},[r,e])}function a(e,t,n,o){let a=n.useState("isMountedByTrigger",e),l=s(e,n),c=(0,r.useStableCallback)(t=>{if(l(t),!t||!n.select("open"))return;let r=n.select("activeTriggerId");r===e?n.update({activeTriggerElement:t,...o}):null==r&&n.update({activeTriggerId:e,activeTriggerElement:t,...o})});return(0,i.useIsoLayoutEffect)(()=>{a&&n.update({activeTriggerElement:t.current,...o})},[a,n,t,...Object.values(o)]),{registerTrigger:c,isMountedByThisTrigger:a}}function l(e){let t=e.useState("open");(0,i.useIsoLayoutEffect)(()=>{if(t&&!e.select("activeTriggerId")&&1===e.context.triggerElements.size){let t=e.context.triggerElements.entries().next();if(!t.done){let[r,i]=t.value;e.update({activeTriggerId:r,activeTriggerElement:i})}}},[t,e])}function c(e,t,i){let{mounted:s,setMounted:a,transitionStatus:l}=(0,n.useTransitionStatus)(e);t.useSyncedValues({mounted:s,transitionStatus:l});let c=(0,r.useStableCallback)(()=>{a(!1),t.update({activeTriggerId:null,activeTriggerElement:null,mounted:!1}),i?.(),t.context.onOpenChangeComplete?.(!1)}),u=t.useState("preventUnmountingOnClose");return(0,o.useOpenChangeComplete)({enabled:!u,open:e,ref:t.context.popupRef,onComplete(){e||c()}}),{forceUnmount:c,transitionStatus:l}}e.s(["useImplicitActiveTrigger",()=>l,"useOpenStateTransitions",()=>c,"useTriggerDataForwarding",()=>a,"useTriggerRegistration",()=>s])},81943,e=>{"use strict";var t=e.i(59443),r=e.i(6865),i=e.i(98784),n=e.i(9401),o=e.i(21181),s=e.i(58003);function a(e){let{render:a,className:l,state:c=s.EMPTY_OBJECT,props:u=s.EMPTY_ARRAY,refs:g=s.EMPTY_ARRAY,metadata:d,stateAttributesMapping:p,tag:m="div",...S}=e,{compositeProps:f,compositeRef:v}=function(e={}){let{highlightItemOnHover:t,highlightedIndex:s,onHighlightedIndexChange:a}=(0,n.useCompositeRootContext)(),{ref:l,index:c}=(0,o.useCompositeListItem)(e),u=s===c,g=r.useRef(null),d=(0,i.useMergedRefs)(l,g);return{compositeProps:r.useMemo(()=>({tabIndex:u?0:-1,onFocus(){a(c)},onMouseMove(){let e=g.current;if(!t||!e)return;let r=e.hasAttribute("disabled")||"true"===e.ariaDisabled;u||r||e.focus()}}),[u,a,c,t]),compositeRef:d,index:c}}({metadata:d});return(0,t.useRenderElement)(m,e,{state:c,ref:[...g,v],props:[f,...u,S],stateAttributesMapping:p})}e.s(["CompositeItem",()=>a],81943)},62545,e=>{"use strict";var t=e.i(79238),r=e.i(99085),i=e.i(20480),n=e.i(6865);let o="ui-settings",s="ui-settings-updated",a={enhancedView:!0,noBullshitMode:!1};function l(){let e,l,c,u,g,d,p=(0,t.c)(8),[m,S]=(0,n.useState)(a),[f,v]=(0,n.useState)(!1);p[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{let e=window.matchMedia("(min-width: 1024px)"),t=()=>v(e.matches);return t(),e.addEventListener("change",t),()=>e.removeEventListener("change",t)},l=[],p[0]=e,p[1]=l):(e=p[0],l=p[1]),(0,n.useEffect)(e,l),p[2]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{let e=()=>{let{ok:e,result:t}=(0,i.loadFromLocalStorage)(o,r.uiSettingsSchema);e?S(t):((0,i.saveToLocalStorage)(o,a),S(a))};e();let t=()=>e();return window.addEventListener("storage",t),window.addEventListener(s,t),()=>{window.removeEventListener("storage",t),window.removeEventListener(s,t)}},u=[],p[2]=c,p[3]=u):(c=p[2],u=p[3]),(0,n.useEffect)(c,u),p[4]===Symbol.for("react.memo_cache_sentinel")?(g=e=>{S(t=>{let r={...t,...e};return(0,i.saveToLocalStorage)(o,r),window.dispatchEvent(new Event(s)),r})},p[4]=g):g=p[4];let y=g;return p[5]!==f||p[6]!==m?(d={settings:m,updateSettings:y,isLargeScreen:f},p[5]=f,p[6]=m,p[7]=d):d=p[7],d}e.s(["useUiSettings",()=>l])},43130,e=>{"use strict";var t=e.i(76524),r=e.i(6865),i=e.i(85662);let n={gamePhase:"setup",players:[],matchId:null,activePlayerId:1,gameSettings:{startingScore:501,outMode:"single",gameMode:"bestOf",legsToWin:3,checkoutAssist:!1},currentLeg:1,currentVisitScores:[],currentVisitDarts:[],historyLegs:[],legWinner:null,matchWinner:null},o=(0,r.createContext)(void 0);e.s(["GameStoreContext",0,o,"GameStoreProvider",0,({children:e})=>{let s=(0,r.useRef)(null);return s.current??=((e=n)=>{var t;let r,o,s,a,l,c,u,g={...n,...e};return t=(u=(e,t)=>({...g,setPlayers(t){e(e=>{let r;r=e.gameSettings.startingScore,e.players=t.map((e,t)=>({id:t+1,name:e.name||`Player ${t+1}`,score:r,legsWon:0,dartsThrown:0,totalScore:0,scoreHistory:[[]]})),e.activePlayerId=1})},setGameSettings(t){e({gameSettings:t})},setActivePlayer(t){e({activePlayerId:t})},setGamePhase(t){e({gamePhase:t})},restorePendingGame(t){e(e=>{e.matchId=t.matchId,e.players=t.players,e.activePlayerId=t.activePlayerId,e.gameSettings=t.gameSettings,e.currentLeg=t.currentLeg,e.currentVisitScores=t.currentVisitScores,e.currentVisitDarts=t.currentVisitDarts,e.historyLegs=t.historyLegs,e.legWinner=null,e.matchWinner=null,e.gamePhase="playing"})},startGame(){e(e=>{e.gamePhase="playing",e.matchId=crypto.randomUUID(),e.currentLeg=1,e.currentVisitScores=[],e.currentVisitDarts=[],e.historyLegs=[{legNumber:1,winnerPlayerId:null,visits:[]}]})},finishVisit(){e(e=>{let t=e.players.find(t=>t.id===e.activePlayerId);if(t&&e.currentVisitDarts.length>0){let r=e.historyLegs[e.currentLeg-1],i=e.currentVisitDarts.reduce((e,t)=>e+t.validatedScore,0);r?.visits.push({playerId:t.id,playerName:t.name,legNumber:e.currentLeg,darts:[...e.currentVisitDarts],totalScore:i,startedScore:t.score+i,endedScore:t.score,timestamp:new Date().toISOString()})}if(e.players.length>1){let t=e.players.find(t=>t.id!==e.activePlayerId);t&&(e.activePlayerId=t.id)}e.currentVisitScores=[],e.currentVisitDarts=[]})},startNextLeg(){e(e=>{e.players.forEach(t=>{t.score=e.gameSettings.startingScore,t.scoreHistory.push([])}),e.currentLeg+=1,e.currentVisitScores=[],e.currentVisitDarts=[],e.historyLegs.push({legNumber:e.currentLeg,winnerPlayerId:null,visits:[]}),e.legWinner=null})},resetGame(){e(n)},handleDartThrow(r,i){var n,o,s;let a,l,c,u,g=t(),d=g.players.find(e=>e.id===g.activePlayerId);if(!d)throw Error("Active player not found");let{newScore:p,validatedScore:m,isBust:S,isLegWin:f}=(n=g.gameSettings,a=d.score-r,l=r,c=!1,u=!1,a<0||"double"===n.outMode&&1===a?(a=d.score,l=0,c=!0):0===a&&("single"===n.outMode||"double"===i?u=!0:(a=d.score,l=0,c=!0)),{newScore:a,validatedScore:l,isBust:c,isLegWin:u}),v=d.score<=170&&d.score>0&&("single"===g.gameSettings.outMode||1!==d.score),y="double"===i&&(50===(o=d.score)||o>0&&o<=40&&o%2==0),h=y&&!f,E="firstTo"===(s=g.gameSettings).gameMode?s.legsToWin:Math.ceil(s.legsToWin/2),b=d.legsWon+1,T=f&&b>=E,P=g.currentLeg-1,I=d.scoreHistory[P]?.reduce((e,t)=>e+t,0)??0;return e(e=>{let t=e.players.find(t=>t.id===e.activePlayerId);if(!t)return;let n=e.currentLeg-1,o=t.score;if(t.score=p,t.totalScore+=o-p,t.dartsThrown+=1,t.scoreHistory[n]??=[],t.scoreHistory[n].push(m),e.currentVisitDarts.push({score:r,modifier:i,validatedScore:m,isBust:S,isCheckoutAttempt:v,isCheckoutSuccess:f,isDoubleAttempt:y,isMissedDouble:h}),e.currentVisitScores.push(m),f){let r=e.historyLegs[e.currentLeg-1],i=e.currentVisitDarts.reduce((e,t)=>e+t.validatedScore,0);r?.visits.push({playerId:t.id,playerName:t.name,legNumber:e.currentLeg,darts:[...e.currentVisitDarts],totalScore:i,startedScore:t.score+i,endedScore:t.score,timestamp:new Date().toISOString()}),r&&(r.winnerPlayerId=t.id),e.currentVisitScores=[],e.currentVisitDarts=[],t.legsWon+=1,e.legWinner=t.id,T&&(e.matchWinner=t.id,e.gamePhase="gameOver")}}),{newScore:p,validatedScore:m,isBust:S,isLegWin:f,isMatchWin:T,matchWinner:T?d.id:null,currentVisitTotal:I+m}},handleUndoThrow(){let r=t();if(!r.players.find(e=>e.id===r.activePlayerId)||0===r.currentVisitScores.length)return{success:!1,lastScore:0,newVisitTotal:0};let i=r.currentVisitScores.at(-1),n=r.currentLeg-1,o=r.currentVisitScores.slice(0,-1).reduce((e,t)=>e+t,0);return e(e=>{let t=e.players.find(t=>t.id===e.activePlayerId);t&&(t.score+=i,t.totalScore-=i,t.dartsThrown-=1,t.scoreHistory[n]?.pop(),e.currentVisitScores.pop(),e.currentVisitDarts.pop())}),{success:!0,lastScore:i,newVisitTotal:o}},getDartsInVisit:()=>t().currentVisitDarts.length,getCurrentVisitScore:()=>t().currentVisitScores.reduce((e,t)=>e+t,0),getIsBust(){let e=t();if(0===e.currentVisitDarts.length)return!1;let r=e.currentVisitDarts[e.currentVisitDarts.length-1];return r?.isBust??!1}}),(e,t,r)=>(r.setState=(t,r,...n)=>e("function"==typeof t?(0,i.produce)(t):t,r,...n),u(r.setState,t,r))),o=new Set,s=(e,t)=>{let i="function"==typeof e?e(r):e;if(!Object.is(i,r)){let e=r;r=(null!=t?t:"object"!=typeof i||null===i)?i:Object.assign({},r,i),o.forEach(t=>t(r,e))}},l={setState:s,getState:a=()=>r,getInitialState:()=>c,subscribe:e=>(o.add(e),()=>o.delete(e))},c=r=t(s,a,l),l})(),(0,t.jsx)(o.Provider,{value:s.current,children:e})},"useGameStore",0,e=>{let t=(0,r.useContext)(o);if(!t)throw Error("useGameStore must be used within a GameStoreProvider");return function(e,t=e=>e){let i=r.default.useSyncExternalStore(e.subscribe,r.default.useCallback(()=>t(e.getState()),[e,t]),r.default.useCallback(()=>t(e.getInitialState()),[e,t]));return r.default.useDebugValue(i),i}(t,e)}],43130)}]);