module.exports=[57118,8672,a=>{"use strict";var b=a.i(45268),c=a.i(70778),d=a.i(97446),e=a.i(93960),f=a.i(24802);let g=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function h(a,i={}){let j="rootStore"in a?a.rootStore:a,k=j.useState("open"),l=j.useState("floatingId"),m=j.useState("domReferenceElement"),n=j.useState("floatingElement"),{role:o="dialog"}=i,p=(0,c.useId)(),q=m?.id||p,r=b.useMemo(()=>(0,d.getFloatingFocusElement)(n)?.id||l,[n,l]),s=g.get(o)??o,t=null!=(0,e.useFloatingParentNodeId)(),u=b.useMemo(()=>"tooltip"===s||"label"===o?f.EMPTY_OBJECT:{"aria-haspopup":"alertdialog"===s?"dialog":s,"aria-expanded":"false",..."listbox"===s&&{role:"combobox"},..."menu"===s&&t&&{role:"menuitem"},..."select"===o&&{"aria-autocomplete":"none"},..."combobox"===o&&{"aria-autocomplete":"list"}},[s,t,o]),v=b.useMemo(()=>"tooltip"===s||"label"===o?{[`aria-${"label"===o?"labelledby":"describedby"}`]:k?r:void 0}:{...u,"aria-expanded":k?"true":"false","aria-controls":k?r:void 0,..."menu"===s&&{id:q}},[s,r,k,q,o,u]),w=b.useMemo(()=>{let a={id:r,...s&&{role:s}};return"tooltip"===s||"label"===o?a:{...a,..."menu"===s&&{"aria-labelledby":q}}},[s,r,q,o]),x=b.useCallback(({active:a,selected:b})=>{let c={role:"option",...a&&{id:`${r}-fui-option`}};switch(o){case"select":case"combobox":return{...c,"aria-selected":b}}return{}},[r,o]);return b.useMemo(()=>({reference:v,floating:w,item:x,trigger:u}),[v,w,u,x])}a.s(["useRole",()=>h],57118);var i=a.i(97180),j=a.i(34351),k=a.i(36027),l=a.i(64384);function m(a){let{popupStore:b,noEmit:d=!1,treatPopupAsFloatingElement:f=!1,onOpenChange:g}=a,h=(0,c.useId)(),m=null!=(0,e.useFloatingParentNodeId)(),n=b.useState("open"),o=b.useState("activeTriggerElement"),p=b.useState(f?"popupElement":"positionerElement"),q=b.context.triggerElements,r=(0,i.useRefWithInit)(()=>new l.FloatingRootStore({open:n,referenceElement:o,floatingElement:p,triggerElements:q,onOpenChange:g,floatingId:h,nested:m,noEmit:d})).current;return(0,j.useIsoLayoutEffect)(()=>{let a={open:n,floatingId:h,referenceElement:o,floatingElement:p};(0,k.isElement)(o)&&(a.domReferenceElement=o),r.state.positionReference===r.state.referenceElement&&(a.positionReference=o),r.update(a)},[n,h,o,p,r]),r.context.onOpenChange=g,r.context.nested=m,r.context.noEmit=d,r}a.s(["useSyncedFloatingRootContext",()=>m],8672)},59005,a=>{"use strict";var b=a.i(64871),c=a.i(53242),d=a.i(64384),e=a.i(24802);function f(){return{open:!1,openProp:void 0,mounted:!1,transitionStatus:"idle",floatingRootContext:new d.FloatingRootStore({open:!1,floatingElement:null,referenceElement:null,triggerElements:new c.PopupTriggerMap,floatingId:"",nested:!1,noEmit:!1,onOpenChange:void 0}),preventUnmountingOnClose:!1,payload:void 0,activeTriggerId:null,activeTriggerElement:null,triggerIdProp:void 0,popupElement:null,positionerElement:null,activeTriggerProps:e.EMPTY_OBJECT,inactiveTriggerProps:e.EMPTY_OBJECT,popupProps:e.EMPTY_OBJECT}}let g=(0,b.createSelector)(a=>a.triggerIdProp??a.activeTriggerId),h={open:(0,b.createSelector)(a=>a.openProp??a.open),mounted:(0,b.createSelector)(a=>a.mounted),transitionStatus:(0,b.createSelector)(a=>a.transitionStatus),floatingRootContext:(0,b.createSelector)(a=>a.floatingRootContext),preventUnmountingOnClose:(0,b.createSelector)(a=>a.preventUnmountingOnClose),payload:(0,b.createSelector)(a=>a.payload),activeTriggerId:g,activeTriggerElement:(0,b.createSelector)(a=>a.mounted?a.activeTriggerElement:null),isTriggerActive:(0,b.createSelector)((a,b)=>void 0!==b&&g(a)===b),isOpenedByTrigger:(0,b.createSelector)((a,b)=>void 0!==b&&g(a)===b&&a.open),isMountedByTrigger:(0,b.createSelector)((a,b)=>void 0!==b&&g(a)===b&&a.mounted),triggerProps:(0,b.createSelector)((a,b)=>b?a.activeTriggerProps:a.inactiveTriggerProps),popupProps:(0,b.createSelector)(a=>a.popupProps),popupElement:(0,b.createSelector)(a=>a.popupElement),positionerElement:(0,b.createSelector)(a=>a.positionerElement)};a.s(["createInitialPopupStoreState",()=>f,"popupStoreSelectors",0,h],59005)},50848,a=>{"use strict";var b=a.i(45268),c=a.i(68499),d=a.i(34351),e=a.i(40823),f=a.i(96109);function g(a,c){let d=b.useRef(null),e=b.useRef(null);return b.useCallback(b=>{if(void 0!==a){if(null!==d.current){let a=d.current,b=e.current,f=c.context.triggerElements.getById(a);b&&f===b&&c.context.triggerElements.delete(a),d.current=null,e.current=null}null!==b&&(d.current=a,e.current=b,c.context.triggerElements.add(a,b))}},[c,a])}function h(a,b,e,f){let h=e.useState("isMountedByTrigger",a),i=g(a,e),j=(0,c.useStableCallback)(b=>{if(i(b),!b||!e.select("open"))return;let c=e.select("activeTriggerId");c===a?e.update({activeTriggerElement:b,...f}):null==c&&e.update({activeTriggerId:a,activeTriggerElement:b,...f})});return(0,d.useIsoLayoutEffect)(()=>{h&&e.update({activeTriggerElement:b.current,...f})},[h,e,b,...Object.values(f)]),{registerTrigger:j,isMountedByThisTrigger:h}}function i(a){let b=a.useState("open");(0,d.useIsoLayoutEffect)(()=>{if(b&&!a.select("activeTriggerId")&&1===a.context.triggerElements.size){let b=a.context.triggerElements.entries().next();if(!b.done){let[c,d]=b.value;a.update({activeTriggerId:c,activeTriggerElement:d})}}},[b,a])}function j(a,b,d){let{mounted:g,setMounted:h,transitionStatus:i}=(0,e.useTransitionStatus)(a);b.useSyncedValues({mounted:g,transitionStatus:i});let j=(0,c.useStableCallback)(()=>{h(!1),b.update({activeTriggerId:null,activeTriggerElement:null,mounted:!1}),d?.(),b.context.onOpenChangeComplete?.(!1)}),k=b.useState("preventUnmountingOnClose");return(0,f.useOpenChangeComplete)({enabled:!k,open:a,ref:b.context.popupRef,onComplete(){a||j()}}),{forceUnmount:j,transitionStatus:i}}a.s(["useImplicitActiveTrigger",()=>i,"useOpenStateTransitions",()=>j,"useTriggerDataForwarding",()=>h,"useTriggerRegistration",()=>g])},11218,a=>{"use strict";var b=a.i(25110),c=a.i(45268),d=a.i(49400),e=a.i(81279),f=a.i(41295),g=a.i(24802);function h(a){let{render:h,className:i,state:j=g.EMPTY_OBJECT,props:k=g.EMPTY_ARRAY,refs:l=g.EMPTY_ARRAY,metadata:m,stateAttributesMapping:n,tag:o="div",...p}=a,{compositeProps:q,compositeRef:r}=function(a={}){let{highlightItemOnHover:b,highlightedIndex:g,onHighlightedIndexChange:h}=(0,e.useCompositeRootContext)(),{ref:i,index:j}=(0,f.useCompositeListItem)(a),k=g===j,l=c.useRef(null),m=(0,d.useMergedRefs)(i,l);return{compositeProps:c.useMemo(()=>({tabIndex:k?0:-1,onFocus(){h(j)},onMouseMove(){let a=l.current;if(!b||!a)return;let c=a.hasAttribute("disabled")||"true"===a.ariaDisabled;k||c||a.focus()}}),[k,h,j,b]),compositeRef:m,index:j}}({metadata:m});return(0,b.useRenderElement)(o,a,{state:j,ref:[...l,r],props:[q,...k,p],stateAttributesMapping:n})}a.s(["CompositeItem",()=>h],11218)},34245,a=>{"use strict";a.i(27906);var b=a.i(47623),c=a.i(45268);let d={enhancedView:!0,noBullshitMode:!1};function e(){let[a,e]=(0,c.useState)(d),[f,g]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{},[]),(0,c.useEffect)(()=>{},[]),{settings:a,updateSettings:a=>{e(c=>{let d={...c,...a};return(0,b.saveToLocalStorage)("ui-settings",d),d})},isLargeScreen:f}}a.s(["useUiSettings",()=>e])},3988,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},55337,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DEFAULT_SEGMENT_KEY:function(){return l},NOT_FOUND_SEGMENT_KEY:function(){return m},PAGE_SEGMENT_KEY:function(){return k},addSearchParamsIfPageSegment:function(){return i},computeSelectedLayoutSegment:function(){return j},getSegmentValue:function(){return f},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,e=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return e;let h=f(g[0]);return!h||h.startsWith(k)?e:(e.push(h),a(g,c,!1,e))}},isGroupSegment:function(){return g},isParallelRouteSegment:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return Array.isArray(a)?a[1]:a}function g(a){return"("===a[0]&&a.endsWith(")")}function h(a){return a.startsWith("@")&&"@children"!==a}function i(a,b){if(a.includes(k)){let a=JSON.stringify(b);return"{}"!==a?k+"?"+a:k}return a}function j(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===l?null:c}let k="__PAGE__",l="__DEFAULT__",m="/_not-found"},76847,a=>{"use strict";var b=a.i(44432),c=a.i(45268),d=a.i(56293);let e={gamePhase:"setup",players:[],matchId:null,activePlayerId:1,gameSettings:{startingScore:501,outMode:"single",gameMode:"bestOf",legsToWin:3,checkoutAssist:!1},currentLeg:1,currentVisitScores:[],currentVisitDarts:[],historyLegs:[],legWinner:null,matchWinner:null},f=(0,c.createContext)(void 0);a.s(["GameStoreContext",0,f,"GameStoreProvider",0,({children:a})=>{let g=(0,c.useRef)(null);return g.current??=((a=e)=>{var b;let c,f,g,h,i,j,k,l={...e,...a};return b=(k=(a,b)=>({...l,setPlayers(b){a(a=>{var c;let d;(b.length<1||b.length>2)&&console.warn(`Invalid player count in setPlayers: ${b.length}. Must be 1-2 players.`),c=a.gameSettings.startingScore,(b.length<1||b.length>2)&&console.warn(`Invalid player count: ${b.length}. Clamping to 1-2 players.`),0===(d=b.slice(0,2)).length&&d.push({}),a.players=d.map((a,b)=>({id:b+1,name:a.name||`Player ${b+1}`,score:c,legsWon:0,dartsThrown:0,totalScore:0,scoreHistory:[[]]})),a.activePlayerId=1})},setGameSettings(b){a({gameSettings:b})},setActivePlayer(b){a({activePlayerId:b})},setGamePhase(b){a({gamePhase:b})},restorePendingGame(b){a(a=>{(b.players.length<1||b.players.length>2)&&(console.warn(`Invalid player count in restored game: ${b.players.length}. Clamping to 1-2 players.`),b.players=b.players.slice(0,2),0===b.players.length)?console.error("Cannot restore game with no players"):(a.matchId=b.matchId,a.players=b.players,a.activePlayerId=b.activePlayerId,a.gameSettings=b.gameSettings,a.currentLeg=b.currentLeg,a.currentVisitScores=b.currentVisitScores,a.currentVisitDarts=b.currentVisitDarts,a.historyLegs=b.historyLegs,a.legWinner=null,a.matchWinner=null,a.gamePhase="playing")})},startGame(){a(a=>{a.gamePhase="playing",a.matchId=crypto.randomUUID(),a.currentLeg=1,a.currentVisitScores=[],a.currentVisitDarts=[],a.historyLegs=[{legNumber:1,winnerPlayerId:null,visits:[]}]})},finishVisit(){a(a=>{let b=a.players.find(b=>b.id===a.activePlayerId);if(b&&a.currentVisitDarts.length>0){let c=a.historyLegs[a.currentLeg-1],d=a.currentVisitDarts.reduce((a,b)=>a+b.validatedScore,0);c?.visits.push({playerId:b.id,playerName:b.name,legNumber:a.currentLeg,darts:[...a.currentVisitDarts],totalScore:d,startedScore:b.score+d,endedScore:b.score,timestamp:new Date().toISOString()})}if(a.players.length>1){let b=a.players.find(b=>b.id!==a.activePlayerId);b&&(a.activePlayerId=b.id)}a.currentVisitScores=[],a.currentVisitDarts=[]})},startNextLeg(){a(a=>{a.players.forEach(b=>{b.score=a.gameSettings.startingScore,b.scoreHistory.push([])}),a.currentLeg+=1,a.currentVisitScores=[],a.currentVisitDarts=[],a.historyLegs.push({legNumber:a.currentLeg,winnerPlayerId:null,visits:[]}),a.legWinner=null})},resetGame(){a(e)},handleDartThrow(c,d){var e,f,g;let h,i,j,k,l=b(),m=l.players.find(a=>a.id===l.activePlayerId);if(!m)throw Error("Active player not found");let{newScore:n,validatedScore:o,isBust:p,isLegWin:q}=(e=l.gameSettings,h=m.score-c,i=c,j=!1,k=!1,h<0||"double"===e.outMode&&1===h?(h=m.score,i=0,j=!0):0===h&&("single"===e.outMode||"double"===d?k=!0:(h=m.score,i=0,j=!0)),{newScore:h,validatedScore:i,isBust:j,isLegWin:k}),r=m.score<=170&&m.score>0&&("single"===l.gameSettings.outMode||1!==m.score),s="double"===d&&(50===(f=m.score)||f>0&&f<=40&&f%2==0),t=s&&!q,u="firstTo"===(g=l.gameSettings).gameMode?g.legsToWin:Math.ceil(g.legsToWin/2),v=m.legsWon+1,w=q&&v>=u,x=l.currentLeg-1,y=m.scoreHistory[x]?.reduce((a,b)=>a+b,0)??0;return a(a=>{let b=a.players.find(b=>b.id===a.activePlayerId);if(!b)return;let e=a.currentLeg-1,f=b.score;if(b.score=n,b.totalScore+=f-n,b.dartsThrown+=1,b.scoreHistory[e]??=[],b.scoreHistory[e].push(o),a.currentVisitDarts.push({score:c,modifier:d,validatedScore:o,isBust:p,isCheckoutAttempt:r,isCheckoutSuccess:q,isDoubleAttempt:s,isMissedDouble:t}),a.currentVisitScores.push(o),q){let c=a.historyLegs[a.currentLeg-1],d=a.currentVisitDarts.reduce((a,b)=>a+b.validatedScore,0);c?.visits.push({playerId:b.id,playerName:b.name,legNumber:a.currentLeg,darts:[...a.currentVisitDarts],totalScore:d,startedScore:b.score+d,endedScore:b.score,timestamp:new Date().toISOString()}),c&&(c.winnerPlayerId=b.id),a.currentVisitScores=[],a.currentVisitDarts=[],b.legsWon+=1,a.legWinner=b.id,w&&(a.matchWinner=b.id,a.gamePhase="gameOver")}}),{newScore:n,validatedScore:o,isBust:p,isLegWin:q,isMatchWin:w,matchWinner:w?m.id:null,currentVisitTotal:y+o}},handleUndoThrow(){let c=b();if(!c.players.find(a=>a.id===c.activePlayerId)||0===c.currentVisitScores.length)return{success:!1,lastScore:0,newVisitTotal:0};let d=c.currentVisitScores.at(-1),e=c.currentLeg-1,f=c.currentVisitScores.slice(0,-1).reduce((a,b)=>a+b,0);return a(a=>{let b=a.players.find(b=>b.id===a.activePlayerId);b&&(b.score+=d,b.totalScore-=d,b.dartsThrown-=1,b.scoreHistory[e]?.pop(),a.currentVisitScores.pop(),a.currentVisitDarts.pop())}),{success:!0,lastScore:d,newVisitTotal:f}}}),(a,b,c)=>(c.setState=(b,c,...e)=>a("function"==typeof b?(0,d.produce)(b):b,c,...e),k(c.setState,b,c))),f=new Set,g=(a,b)=>{let d="function"==typeof a?a(c):a;if(!Object.is(d,c)){let a=c;c=(null!=b?b:"object"!=typeof d||null===d)?d:Object.assign({},c,d),f.forEach(b=>b(c,a))}},i={setState:g,getState:h=()=>c,getInitialState:()=>j,subscribe:a=>(f.add(a),()=>f.delete(a))},j=c=b(g,h,i),i})(),(0,b.jsx)(f.Provider,{value:g.current,children:a})},"useGameStore",0,a=>{let b=(0,c.useContext)(f);if(!b)throw Error("useGameStore must be used within a GameStoreProvider");return function(a,b=a=>a){let d=c.default.useSyncExternalStore(a.subscribe,c.default.useCallback(()=>b(a.getState()),[a,b]),c.default.useCallback(()=>b(a.getInitialState()),[a,b]));return c.default.useDebugValue(d),d}(b,a)}],76847)}];

//# sourceMappingURL=_2c61978b._.js.map