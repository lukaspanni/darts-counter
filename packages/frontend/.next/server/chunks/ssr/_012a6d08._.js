module.exports=[83601,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={UnrecognizedActionError:function(){return f},unstable_isUnrecognizedActionError:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});class f extends Error{constructor(...a){super(...a),this.name="UnrecognizedActionError"}}function g(a){return!!(a&&"object"==typeof a&&a instanceof f)}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},43435,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ReadonlyURLSearchParams",{enumerable:!0,get:function(){return e}});class d extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class e extends URLSearchParams{append(){throw new d}delete(){throw new d}set(){throw new d}sort(){throw new d}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},53029,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"RedirectStatusCode",{enumerable:!0,get:function(){return e}});var d,e=((d={})[d.SeeOther=303]="SeeOther",d[d.TemporaryRedirect=307]="TemporaryRedirect",d[d.PermanentRedirect=308]="PermanentRedirect",d);("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},55462,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={REDIRECT_ERROR_CODE:function(){return h},RedirectType:function(){return i},isRedirectError:function(){return j}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g=a.r(53029),h="NEXT_REDIRECT";var i=((d={}).push="push",d.replace="replace",d);function j(a){if("object"!=typeof a||null===a||!("digest"in a)||"string"!=typeof a.digest)return!1;let b=a.digest.split(";"),[c,d]=b,e=b.slice(2,-2).join(";"),f=Number(b.at(-2));return c===h&&("replace"===d||"push"===d)&&"string"==typeof e&&!isNaN(f)&&f in g.RedirectStatusCode}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},95618,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={getRedirectError:function(){return i},getRedirectStatusCodeFromError:function(){return n},getRedirectTypeFromError:function(){return m},getURLFromRedirectError:function(){return l},permanentRedirect:function(){return k},redirect:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(53029),g=a.r(55462),h=a.r(20635).actionAsyncStorage;function i(a,b,c=f.RedirectStatusCode.TemporaryRedirect){let d=Object.defineProperty(Error(g.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return d.digest=`${g.REDIRECT_ERROR_CODE};${b};${a};${c};`,d}function j(a,b){throw i(a,b??=h?.getStore()?.isAction?g.RedirectType.push:g.RedirectType.replace,f.RedirectStatusCode.TemporaryRedirect)}function k(a,b=g.RedirectType.replace){throw i(a,b,f.RedirectStatusCode.PermanentRedirect)}function l(a){return(0,g.isRedirectError)(a)?a.digest.split(";").slice(2,-2).join(";"):null}function m(a){if(!(0,g.isRedirectError)(a))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return a.digest.split(";",2)[1]}function n(a){if(!(0,g.isRedirectError)(a))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(a.digest.split(";").at(-2))}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},48621,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={HTTPAccessErrorStatus:function(){return f},HTTP_ERROR_FALLBACK_ERROR_CODE:function(){return h},getAccessFallbackErrorTypeByStatus:function(){return k},getAccessFallbackHTTPStatus:function(){return j},isHTTPAccessFallbackError:function(){return i}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401},g=new Set(Object.values(f)),h="NEXT_HTTP_ERROR_FALLBACK";function i(a){if("object"!=typeof a||null===a||!("digest"in a)||"string"!=typeof a.digest)return!1;let[b,c]=a.digest.split(";");return b===h&&g.has(Number(c))}function j(a){return Number(a.digest.split(";")[1])}function k(a){switch(a){case 401:return"unauthorized";case 403:return"forbidden";case 404:return"not-found";default:return}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},96835,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"notFound",{enumerable:!0,get:function(){return f}});let d=a.r(48621),e=`${d.HTTP_ERROR_FALLBACK_ERROR_CODE};404`;function f(){let a=Object.defineProperty(Error(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw a.digest=e,a}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},98739,(a,b,c)=>{"use strict";function d(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"forbidden",{enumerable:!0,get:function(){return d}}),a.r(48621).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},99847,(a,b,c)=>{"use strict";function d(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"unauthorized",{enumerable:!0,get:function(){return d}}),a.r(48621).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},92251,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={isHangingPromiseRejectionError:function(){return f},makeDevtoolsIOAwarePromise:function(){return l},makeHangingPromise:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return"object"==typeof a&&null!==a&&"digest"in a&&a.digest===g}let g="HANGING_PROMISE_REJECTION";class h extends Error{constructor(a,b){super(`During prerendering, ${b} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${b} to a different context by using \`setTimeout\`, \`after\`, or similar functions you may observe this error and you should handle it in that context. This occurred at route "${a}".`),this.route=a,this.expression=b,this.digest=g}}let i=new WeakMap;function j(a,b,c){if(a.aborted)return Promise.reject(new h(b,c));{let d=new Promise((d,e)=>{let f=e.bind(null,new h(b,c)),g=i.get(a);if(g)g.push(f);else{let b=[f];i.set(a,b),a.addEventListener("abort",()=>{for(let a=0;a<b.length;a++)b[a]()},{once:!0})}});return d.catch(k),d}}function k(){}function l(a,b,c){return b.stagedRendering?b.stagedRendering.delayUntilStage(c,void 0,a):new Promise(b=>{setTimeout(()=>{b(a)},0)})}},14899,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"isPostpone",{enumerable:!0,get:function(){return e}});let d=Symbol.for("react.postpone");function e(a){return"object"==typeof a&&null!==a&&a.$$typeof===d}},74364,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={BailoutToCSRError:function(){return g},isBailoutToCSRError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="BAILOUT_TO_CLIENT_SIDE_RENDERING";class g extends Error{constructor(a){super(`Bail out to client-side rendering: ${a}`),this.reason=a,this.digest=f}}function h(a){return"object"==typeof a&&null!==a&&"digest"in a&&a.digest===f}},66623,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"isNextRouterError",{enumerable:!0,get:function(){return f}});let d=a.r(48621),e=a.r(55462);function f(a){return(0,e.isRedirectError)(a)||(0,d.isHTTPAccessFallbackError)(a)}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},68998,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DynamicServerError:function(){return g},isDynamicServerError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="DYNAMIC_SERVER_USAGE";class g extends Error{constructor(a){super(`Dynamic server usage: ${a}`),this.description=a,this.digest=f}}function h(a){return"object"==typeof a&&null!==a&&"digest"in a&&"string"==typeof a.digest&&a.digest===f}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},6946,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={StaticGenBailoutError:function(){return g},isStaticGenBailoutError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="NEXT_STATIC_GEN_BAILOUT";class g extends Error{constructor(...a){super(...a),this.code=f}}function h(a){return"object"==typeof a&&null!==a&&"code"in a&&a.code===f}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},15418,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={METADATA_BOUNDARY_NAME:function(){return f},OUTLET_BOUNDARY_NAME:function(){return h},ROOT_LAYOUT_BOUNDARY_NAME:function(){return i},VIEWPORT_BOUNDARY_NAME:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="__next_metadata_boundary__",g="__next_viewport_boundary__",h="__next_outlet_boundary__",i="__next_root_layout_boundary__"},39731,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={atLeastOneTask:function(){return h},scheduleImmediate:function(){return g},scheduleOnNextTick:function(){return f},waitAtLeastOneReactRenderTask:function(){return i}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a=>{Promise.resolve().then(()=>{process.nextTick(a)})},g=a=>{setImmediate(a)};function h(){return new Promise(a=>g(a))}function i(){return new Promise(a=>setImmediate(a))}},98362,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"InvariantError",{enumerable:!0,get:function(){return d}});class d extends Error{constructor(a,b){super(`Invariant: ${a.endsWith(".")?a:a+"."} This is a bug in Next.js.`,b),this.name="InvariantError"}}},85173,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e,f={Postpone:function(){return B},PreludeState:function(){return $},abortAndThrowOnSynchronousRequestDataAccess:function(){return A},abortOnSynchronousPlatformIOAccess:function(){return z},accessedDynamicData:function(){return J},annotateDynamicAccess:function(){return O},consumeDynamicAccess:function(){return K},createDynamicTrackingState:function(){return s},createDynamicValidationState:function(){return t},createHangingInputAbortSignal:function(){return N},createRenderInBrowserAbortSignal:function(){return M},delayUntilRuntimeStage:function(){return ac},formatDynamicAPIAccesses:function(){return L},getFirstDynamicReason:function(){return u},getStaticShellDisallowedDynamicReasons:function(){return ab},isDynamicPostpone:function(){return E},isPrerenderInterruptedError:function(){return I},logDisallowedDynamicError:function(){return _},markCurrentScopeAsDynamic:function(){return v},postponeWithTracking:function(){return C},throwIfDisallowedDynamic:function(){return aa},throwToInterruptStaticGeneration:function(){return w},trackAllowedDynamicAccess:function(){return W},trackDynamicDataInDynamicRender:function(){return x},trackDynamicHoleInRuntimeShell:function(){return X},trackDynamicHoleInStaticShell:function(){return Y},useDynamicRouteParams:function(){return P},useDynamicSearchParams:function(){return Q}};for(var g in f)Object.defineProperty(c,g,{enumerable:!0,get:f[g]});let h=(d=a.r(45268))&&d.__esModule?d:{default:d},i=a.r(68998),j=a.r(6946),k=a.r(32319),l=a.r(56704),m=a.r(92251),n=a.r(15418),o=a.r(39731),p=a.r(74364),q=a.r(98362),r="function"==typeof h.default.unstable_postpone;function s(a){return{isDebugDynamicAccesses:a,dynamicAccesses:[],syncDynamicErrorWithStack:null}}function t(){return{hasSuspenseAboveBody:!1,hasDynamicMetadata:!1,dynamicMetadata:null,hasDynamicViewport:!1,hasAllowedDynamic:!1,dynamicErrors:[]}}function u(a){var b;return null==(b=a.dynamicAccesses[0])?void 0:b.expression}function v(a,b,c){if(b)switch(b.type){case"cache":case"unstable-cache":case"private-cache":return}if(!a.forceDynamic&&!a.forceStatic){if(a.dynamicShouldError)throw Object.defineProperty(new j.StaticGenBailoutError(`Route ${a.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${c}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(b)switch(b.type){case"prerender-ppr":return C(a.route,c,b.dynamicTracking);case"prerender-legacy":b.revalidate=0;let d=Object.defineProperty(new i.DynamicServerError(`Route ${a.route} couldn't be rendered statically because it used ${c}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E550",enumerable:!1,configurable:!0});throw a.dynamicUsageDescription=c,a.dynamicUsageStack=d.stack,d}}}function w(a,b,c){let d=Object.defineProperty(new i.DynamicServerError(`Route ${b.route} couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw c.revalidate=0,b.dynamicUsageDescription=a,b.dynamicUsageStack=d.stack,d}function x(a){switch(a.type){case"cache":case"unstable-cache":case"private-cache":return}}function y(a,b,c){let d=H(`Route ${a} needs to bail out of prerendering at this point because it used ${b}.`);c.controller.abort(d);let e=c.dynamicTracking;e&&e.dynamicAccesses.push({stack:e.isDebugDynamicAccesses?Error().stack:void 0,expression:b})}function z(a,b,c,d){let e=d.dynamicTracking;y(a,b,d),e&&null===e.syncDynamicErrorWithStack&&(e.syncDynamicErrorWithStack=c)}function A(a,b,c,d){if(!1===d.controller.signal.aborted){y(a,b,d);let e=d.dynamicTracking;e&&null===e.syncDynamicErrorWithStack&&(e.syncDynamicErrorWithStack=c)}throw H(`Route ${a} needs to bail out of prerendering at this point because it used ${b}.`)}function B({reason:a,route:b}){let c=k.workUnitAsyncStorage.getStore();C(b,a,c&&"prerender-ppr"===c.type?c.dynamicTracking:null)}function C(a,b,c){(function(){if(!r)throw Object.defineProperty(Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E224",enumerable:!1,configurable:!0})})(),c&&c.dynamicAccesses.push({stack:c.isDebugDynamicAccesses?Error().stack:void 0,expression:b}),h.default.unstable_postpone(D(a,b))}function D(a,b){return`Route ${a} needs to bail out of prerendering at this point because it used ${b}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`}function E(a){return"object"==typeof a&&null!==a&&"string"==typeof a.message&&F(a.message)}function F(a){return a.includes("needs to bail out of prerendering at this point because it used")&&a.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")}if(!1===F(D("%%%","^^^")))throw Object.defineProperty(Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E296",enumerable:!1,configurable:!0});let G="NEXT_PRERENDER_INTERRUPTED";function H(a){let b=Object.defineProperty(Error(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return b.digest=G,b}function I(a){return"object"==typeof a&&null!==a&&a.digest===G&&"name"in a&&"message"in a&&a instanceof Error}function J(a){return a.length>0}function K(a,b){return a.dynamicAccesses.push(...b.dynamicAccesses),a.dynamicAccesses}function L(a){return a.filter(a=>"string"==typeof a.stack&&a.stack.length>0).map(({expression:a,stack:b})=>(b=b.split("\n").slice(4).filter(a=>!(a.includes("node_modules/next/")||a.includes(" (<anonymous>)")||a.includes(" (node:"))).join("\n"),`Dynamic API Usage Debug - ${a}:
${b}`))}function M(){let a=new AbortController;return a.abort(Object.defineProperty(new p.BailoutToCSRError("Render in Browser"),"__NEXT_ERROR_CODE",{value:"E721",enumerable:!1,configurable:!0})),a.signal}function N(a){switch(a.type){case"prerender":case"prerender-runtime":let b=new AbortController;if(a.cacheSignal)a.cacheSignal.inputReady().then(()=>{b.abort()});else{let c=(0,k.getRuntimeStagePromise)(a);c?c.then(()=>(0,o.scheduleOnNextTick)(()=>b.abort())):(0,o.scheduleOnNextTick)(()=>b.abort())}return b.signal;case"prerender-client":case"prerender-ppr":case"prerender-legacy":case"request":case"cache":case"private-cache":case"unstable-cache":return}}function O(a,b){let c=b.dynamicTracking;c&&c.dynamicAccesses.push({stack:c.isDebugDynamicAccesses?Error().stack:void 0,expression:a})}function P(a){let b=l.workAsyncStorage.getStore(),c=k.workUnitAsyncStorage.getStore();if(b&&c)switch(c.type){case"prerender-client":case"prerender":{let d=c.fallbackRouteParams;d&&d.size>0&&h.default.use((0,m.makeHangingPromise)(c.renderSignal,b.route,a));break}case"prerender-ppr":{let d=c.fallbackRouteParams;if(d&&d.size>0)return C(b.route,a,c.dynamicTracking);break}case"prerender-runtime":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called during a runtime prerender. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E771",enumerable:!1,configurable:!0});case"cache":case"private-cache":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called inside a cache scope. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0})}}function Q(a){let b=l.workAsyncStorage.getStore(),c=k.workUnitAsyncStorage.getStore();if(b)switch(!c&&(0,k.throwForMissingRequestStore)(a),c.type){case"prerender-client":h.default.use((0,m.makeHangingPromise)(c.renderSignal,b.route,a));break;case"prerender-legacy":case"prerender-ppr":if(b.forceStatic)return;throw Object.defineProperty(new p.BailoutToCSRError(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called from a Server Component. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E795",enumerable:!1,configurable:!0});case"cache":case"unstable-cache":case"private-cache":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called inside a cache scope. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0});case"request":return}}let R=/\n\s+at Suspense \(<anonymous>\)/,S=RegExp(`\\n\\s+at Suspense \\(<anonymous>\\)(?:(?!\\n\\s+at (?:body|div|main|section|article|aside|header|footer|nav|form|p|span|h1|h2|h3|h4|h5|h6) \\(<anonymous>\\))[\\s\\S])*?\\n\\s+at ${n.ROOT_LAYOUT_BOUNDARY_NAME} \\([^\\n]*\\)`),T=RegExp(`\\n\\s+at ${n.METADATA_BOUNDARY_NAME}[\\n\\s]`),U=RegExp(`\\n\\s+at ${n.VIEWPORT_BOUNDARY_NAME}[\\n\\s]`),V=RegExp(`\\n\\s+at ${n.OUTLET_BOUNDARY_NAME}[\\n\\s]`);function W(a,b,c,d){if(!V.test(b)){if(T.test(b)){c.hasDynamicMetadata=!0;return}if(U.test(b)){c.hasDynamicViewport=!0;return}if(S.test(b)){c.hasAllowedDynamic=!0,c.hasSuspenseAboveBody=!0;return}else if(R.test(b)){c.hasAllowedDynamic=!0;return}else{if(d.syncDynamicErrorWithStack)return void c.dynamicErrors.push(d.syncDynamicErrorWithStack);let e=Z(`Route "${a.route}": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,b);return void c.dynamicErrors.push(e)}}}function X(a,b,c,d){if(!V.test(b)){if(T.test(b)){c.dynamicMetadata=Z(`Route "${a.route}": Uncached data or \`connection()\` was accessed inside \`generateMetadata\`. Except for this instance, the page would have been entirely prerenderable which may have been the intended behavior. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`,b);return}if(U.test(b)){let d=Z(`Route "${a.route}": Uncached data or \`connection()\` was accessed inside \`generateViewport\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`,b);c.dynamicErrors.push(d);return}if(S.test(b)){c.hasAllowedDynamic=!0,c.hasSuspenseAboveBody=!0;return}else if(R.test(b)){c.hasAllowedDynamic=!0;return}else{if(d.syncDynamicErrorWithStack)return void c.dynamicErrors.push(d.syncDynamicErrorWithStack);let e=Z(`Route "${a.route}": Uncached data or \`connection()\` was accessed outside of \`<Suspense>\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,b);return void c.dynamicErrors.push(e)}}}function Y(a,b,c,d){if(!V.test(b)){if(T.test(b)){c.dynamicMetadata=Z(`Route "${a.route}": Runtime data such as \`cookies()\`, \`headers()\`, \`params\`, or \`searchParams\` was accessed inside \`generateMetadata\` or you have file-based metadata such as icons that depend on dynamic params segments. Except for this instance, the page would have been entirely prerenderable which may have been the intended behavior. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`,b);return}if(U.test(b)){let d=Z(`Route "${a.route}": Runtime data such as \`cookies()\`, \`headers()\`, \`params\`, or \`searchParams\` was accessed inside \`generateViewport\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`,b);c.dynamicErrors.push(d);return}if(S.test(b)){c.hasAllowedDynamic=!0,c.hasSuspenseAboveBody=!0;return}else if(R.test(b)){c.hasAllowedDynamic=!0;return}else{if(d.syncDynamicErrorWithStack)return void c.dynamicErrors.push(d.syncDynamicErrorWithStack);let e=Z(`Route "${a.route}": Runtime data such as \`cookies()\`, \`headers()\`, \`params\`, or \`searchParams\` was accessed outside of \`<Suspense>\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,b);return void c.dynamicErrors.push(e)}}}function Z(a,b){let c=Object.defineProperty(Error(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return c.stack=c.name+": "+a+b,c}var $=((e={})[e.Full=0]="Full",e[e.Empty=1]="Empty",e[e.Errored=2]="Errored",e);function _(a,b){console.error(b),a.dev||(a.hasReadableErrorStacks?console.error(`To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \`next dev\`, then open "${a.route}" in your browser to investigate the error.`):console.error(`To get a more detailed stack trace and pinpoint the issue, try one of the following:
  - Start the app in development mode by running \`next dev\`, then open "${a.route}" in your browser to investigate the error.
  - Rerun the production build with \`next build --debug-prerender\` to generate better stack traces.`))}function aa(a,b,c,d){if(d.syncDynamicErrorWithStack)throw _(a,d.syncDynamicErrorWithStack),new j.StaticGenBailoutError;if(0!==b){if(c.hasSuspenseAboveBody)return;let d=c.dynamicErrors;if(d.length>0){for(let b=0;b<d.length;b++)_(a,d[b]);throw new j.StaticGenBailoutError}if(c.hasDynamicViewport)throw console.error(`Route "${a.route}" has a \`generateViewport\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) without explicitly allowing fully dynamic rendering. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`),new j.StaticGenBailoutError;if(1===b)throw console.error(`Route "${a.route}" did not produce a static shell and Next.js was unable to determine a reason. This is a bug in Next.js.`),new j.StaticGenBailoutError}else if(!1===c.hasAllowedDynamic&&c.hasDynamicMetadata)throw console.error(`Route "${a.route}" has a \`generateMetadata\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) when the rest of the route does not. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`),new j.StaticGenBailoutError}function ab(a,b,c){if(c.hasSuspenseAboveBody)return[];if(0!==b){let d=c.dynamicErrors;if(d.length>0)return d;if(1===b)return[Object.defineProperty(new q.InvariantError(`Route "${a.route}" did not produce a static shell and Next.js was unable to determine a reason.`),"__NEXT_ERROR_CODE",{value:"E936",enumerable:!1,configurable:!0})]}else if(!1===c.hasAllowedDynamic&&0===c.dynamicErrors.length&&c.dynamicMetadata)return[c.dynamicMetadata];return[]}function ac(a,b){return a.runtimeStagePromise?a.runtimeStagePromise.then(()=>b):b}},29459,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"unstable_rethrow",{enumerable:!0,get:function(){return function a(b){if((0,g.isNextRouterError)(b)||(0,f.isBailoutToCSRError)(b)||(0,i.isDynamicServerError)(b)||(0,h.isDynamicPostpone)(b)||(0,e.isPostpone)(b)||(0,d.isHangingPromiseRejectionError)(b)||(0,h.isPrerenderInterruptedError)(b))throw b;b instanceof Error&&"cause"in b&&a(b.cause)}}});let d=a.r(92251),e=a.r(14899),f=a.r(74364),g=a.r(66623),h=a.r(85173),i=a.r(68998);("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},1170,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"unstable_rethrow",{enumerable:!0,get:function(){return d}});let d=a.r(29459).unstable_rethrow;("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},33700,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={ReadonlyURLSearchParams:function(){return f.ReadonlyURLSearchParams},RedirectType:function(){return h.RedirectType},forbidden:function(){return j.forbidden},notFound:function(){return i.notFound},permanentRedirect:function(){return g.permanentRedirect},redirect:function(){return g.redirect},unauthorized:function(){return k.unauthorized},unstable_isUnrecognizedActionError:function(){return m},unstable_rethrow:function(){return l.unstable_rethrow}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(43435),g=a.r(95618),h=a.r(55462),i=a.r(96835),j=a.r(98739),k=a.r(99847),l=a.r(1170);function m(){throw Object.defineProperty(Error("`unstable_isUnrecognizedActionError` can only be used on the client."),"__NEXT_ERROR_CODE",{value:"E776",enumerable:!1,configurable:!0})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},88512,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={ReadonlyURLSearchParams:function(){return h.ReadonlyURLSearchParams},RedirectType:function(){return l.RedirectType},ServerInsertedHTMLContext:function(){return j.ServerInsertedHTMLContext},forbidden:function(){return l.forbidden},notFound:function(){return l.notFound},permanentRedirect:function(){return l.permanentRedirect},redirect:function(){return l.redirect},unauthorized:function(){return l.unauthorized},unstable_isUnrecognizedActionError:function(){return k.unstable_isUnrecognizedActionError},unstable_rethrow:function(){return l.unstable_rethrow},useParams:function(){return r},usePathname:function(){return p},useRouter:function(){return q},useSearchParams:function(){return o},useSelectedLayoutSegment:function(){return t},useSelectedLayoutSegments:function(){return s},useServerInsertedHTML:function(){return j.useServerInsertedHTML}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(3988)._(a.r(45268)),g=a.r(20828),h=a.r(95015),i=a.r(55337),j=a.r(30460),k=a.r(83601),l=a.r(33700),m=a.r(85173).useDynamicRouteParams,n=a.r(85173).useDynamicSearchParams;function o(){n?.("useSearchParams()");let a=(0,f.useContext)(h.SearchParamsContext);return(0,f.useMemo)(()=>a?new h.ReadonlyURLSearchParams(a):null,[a])}function p(){return m?.("usePathname()"),(0,f.useContext)(h.PathnameContext)}function q(){let a=(0,f.useContext)(g.AppRouterContext);if(null===a)throw Object.defineProperty(Error("invariant expected app router to be mounted"),"__NEXT_ERROR_CODE",{value:"E238",enumerable:!1,configurable:!0});return a}function r(){return m?.("useParams()"),(0,f.useContext)(h.PathParamsContext)}function s(a="children"){m?.("useSelectedLayoutSegments()");let b=(0,f.useContext)(g.LayoutRouterContext);return b?(0,i.getSelectedLayoutSegmentPath)(b.parentTree,a):null}function t(a="children"){m?.("useSelectedLayoutSegment()"),(0,f.useContext)(h.NavigationPromisesContext);let b=s(a);return(0,i.computeSelectedLayoutSegment)(b,a)}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},73064,(a,b,c)=>{b.exports=a.r(88512)},55817,a=>{"use strict";var b,c,d,e,f,g=a.i(44432);a.i(42688);var h=a.i(4249),i=a.i(81196);function j({className:a,size:b="default",...c}){return(0,g.jsx)("div",{"data-slot":"card","data-size":b,className:(0,i.cn)("ring-foreground/10 bg-card text-card-foreground group/card flex flex-col gap-6 overflow-hidden rounded-xl py-6 text-sm shadow-xs ring-1 has-[>img:first-child]:pt-0 data-[size=sm]:gap-4 data-[size=sm]:py-4 *:[img:first-child]:rounded-t-xl *:[img:last-child]:rounded-b-xl",a),...c})}function k({className:a,...b}){return(0,g.jsx)("div",{"data-slot":"card-header",className:(0,i.cn)("group/card-header @container/card-header grid auto-rows-min items-start gap-1 rounded-t-xl px-6 group-data-[size=sm]/card:px-4 has-data-[slot=card-action]:grid-cols-[1fr_auto] has-data-[slot=card-description]:grid-rows-[auto_auto] [.border-b]:pb-6 group-data-[size=sm]/card:[.border-b]:pb-4",a),...b})}function l({className:a,...b}){return(0,g.jsx)("div",{"data-slot":"card-title",className:(0,i.cn)("text-base leading-normal font-medium group-data-[size=sm]/card:text-sm",a),...b})}function m({className:a,...b}){return(0,g.jsx)("div",{"data-slot":"card-description",className:(0,i.cn)("text-muted-foreground text-sm",a),...b})}function n({className:a,...b}){return(0,g.jsx)("div",{"data-slot":"card-content",className:(0,i.cn)("px-6 group-data-[size=sm]/card:px-4",a),...b})}function o({className:a,...b}){return(0,g.jsx)("div",{"data-slot":"card-footer",className:(0,i.cn)("flex items-center rounded-b-xl px-6 group-data-[size=sm]/card:px-4 [.border-t]:pt-6 group-data-[size=sm]/card:[.border-t]:pt-4",a),...b})}var p=a.i(45268),q=a=>a instanceof Date,r=a=>null==a,s=a=>!r(a)&&!Array.isArray(a)&&"object"==typeof a&&!q(a),t=a=>s(a)&&a.target?"checkbox"===a.target.type?a.target.checked:a.target.value:a,u=(a,b)=>a.has(b.substring(0,b.search(/\.\d+(\.|$)/))||b);function v(a){let b;if(a instanceof Date)return new Date(a);"u">typeof FileList&&FileList;let c=Array.isArray(a);if(!c&&!(s(a)&&s(b=a.constructor&&a.constructor.prototype)&&b.hasOwnProperty("isPrototypeOf")))return a;let d=c?[]:Object.create(Object.getPrototypeOf(a));for(let b in a)Object.prototype.hasOwnProperty.call(a,b)&&(d[b]=v(a[b]));return d}var w=a=>void 0===a,x=a=>Array.isArray(a)?a.filter(Boolean):[],y=a=>x(a.replace(/["|']|\]/g,"").split(/\.|\[/)),z=(a,b,c)=>{if(!b||!s(a))return c;let d=(/^\w*$/.test(b)?[b]:y(b)).reduce((a,b)=>r(a)?a:a[b],a);return w(d)||d===a?w(a[b])?c:a[b]:d},A=a=>"function"==typeof a,B=(a,b,c)=>{let d=-1,e=/^\w*$/.test(b)?[b]:y(b),f=e.length,g=f-1;for(;++d<f;){let b=e[d],f=c;if(d!==g){let c=a[b];f=s(c)||Array.isArray(c)?c:isNaN(+e[d+1])?{}:[]}if("__proto__"===b||"constructor"===b||"prototype"===b)return;a[b]=f,a=a[b]}};let C="blur",D="onChange",E="onSubmit",F="maxLength",G="minLength",H="pattern",I="required",J=p.default.createContext(null);J.displayName="HookFormControlContext";var K=(a,b,c,d=!0)=>{let e={defaultValues:b._defaultValues};for(let f in a)Object.defineProperty(e,f,{get:()=>("all"!==b._proxyFormState[f]&&(b._proxyFormState[f]=!d||"all"),c&&(c[f]=!0),a[f])});return e};let L=p.default.useEffect;function M(a){let b=p.default.useContext(J),{control:c=b,disabled:d,name:e,exact:f}=a||{},[g,h]=p.default.useState(c._formState),i=p.default.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return L(()=>c._subscribe({name:e,formState:i.current,exact:f,callback:a=>{d||h({...c._formState,...a})}}),[e,d,f]),p.default.useEffect(()=>{i.current.isValid&&c._setValid(!0)},[c]),p.default.useMemo(()=>K(g,c,i.current,!1),[g,c])}var N=a=>"string"==typeof a,O=(a,b,c,d,e)=>N(a)?(d&&b.watch.add(a),z(c,a,e)):Array.isArray(a)?a.map(a=>(d&&b.watch.add(a),z(c,a))):(d&&(b.watchAll=!0),c),P=a=>r(a)||"object"!=typeof a;function Q(a,b,c=new WeakSet){if(P(a)||P(b))return Object.is(a,b);if(q(a)&&q(b))return Object.is(a.getTime(),b.getTime());let d=Object.keys(a),e=Object.keys(b);if(d.length!==e.length)return!1;if(c.has(a)||c.has(b))return!0;for(let f of(c.add(a),c.add(b),d)){let d=a[f];if(!e.includes(f))return!1;if("ref"!==f){let a=b[f];if(q(d)&&q(a)||s(d)&&s(a)||Array.isArray(d)&&Array.isArray(a)?!Q(d,a,c):!Object.is(d,a))return!1}}return!0}let R=a=>a.render(function(a){let b=p.default.useContext(J),{name:c,disabled:d,control:e=b,shouldUnregister:f,defaultValue:g,exact:h=!0}=a,i=u(e._names.array,c),j=p.default.useMemo(()=>z(e._formValues,c,z(e._defaultValues,c,g)),[e,c,g]),k=function(a){let b=p.default.useContext(J),{control:c=b,name:d,defaultValue:e,disabled:f,exact:g,compute:h}=a||{},i=p.default.useRef(e),j=p.default.useRef(h),k=p.default.useRef(void 0),l=p.default.useRef(c),m=p.default.useRef(d);j.current=h;let[n,o]=p.default.useState(()=>{let a=c._getWatch(d,i.current);return j.current?j.current(a):a}),q=p.default.useCallback(a=>{let b=O(d,c._names,a||c._formValues,!1,i.current);return j.current?j.current(b):b},[c._formValues,c._names,d]),r=p.default.useCallback(a=>{if(!f){let b=O(d,c._names,a||c._formValues,!1,i.current);if(j.current){let a=j.current(b);Q(a,k.current)||(o(a),k.current=a)}else o(b)}},[c._formValues,c._names,f,d]);L(()=>(l.current===c&&Q(m.current,d)||(l.current=c,m.current=d,r()),c._subscribe({name:d,formState:{values:!0},exact:g,callback:a=>{r(a.values)}})),[c,g,d,r]),p.default.useEffect(()=>c._removeUnmounted());let s=l.current!==c,t=m.current,u=p.default.useMemo(()=>{if(f)return null;let a=!s&&!Q(t,d);return s||a?q():null},[f,s,d,t,q]);return null!==u?u:n}({control:e,name:c,defaultValue:j,exact:h}),l=M({control:e,name:c,exact:h}),m=p.default.useRef(a),n=p.default.useRef(void 0),o=p.default.useRef(e.register(c,{...a.rules,value:k,..."boolean"==typeof a.disabled?{disabled:a.disabled}:{}}));m.current=a;let q=p.default.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!z(l.errors,c)},isDirty:{enumerable:!0,get:()=>!!z(l.dirtyFields,c)},isTouched:{enumerable:!0,get:()=>!!z(l.touchedFields,c)},isValidating:{enumerable:!0,get:()=>!!z(l.validatingFields,c)},error:{enumerable:!0,get:()=>z(l.errors,c)}}),[l,c]),r=p.default.useCallback(a=>o.current.onChange({target:{value:t(a),name:c},type:"change"}),[c]),s=p.default.useCallback(()=>o.current.onBlur({target:{value:z(e._formValues,c),name:c},type:C}),[c,e._formValues]),x=p.default.useCallback(a=>{let b=z(e._fields,c);b&&b._f&&a&&(b._f.ref={focus:()=>A(a.focus)&&a.focus(),select:()=>A(a.select)&&a.select(),setCustomValidity:b=>A(a.setCustomValidity)&&a.setCustomValidity(b),reportValidity:()=>A(a.reportValidity)&&a.reportValidity()})},[e._fields,c]),y=p.default.useMemo(()=>({name:c,value:k,..."boolean"==typeof d||l.disabled?{disabled:l.disabled||d}:{},onChange:r,onBlur:s,ref:x}),[c,d,l.disabled,r,s,x,k]);return p.default.useEffect(()=>{let a=e._options.shouldUnregister||f,b=n.current;b&&b!==c&&!i&&e.unregister(b),e.register(c,{...m.current.rules,..."boolean"==typeof m.current.disabled?{disabled:m.current.disabled}:{}});let d=(a,b)=>{let c=z(e._fields,a);c&&c._f&&(c._f.mount=b)};if(d(c,!0),a){let a=v(z(e._options.defaultValues,c,m.current.defaultValue));B(e._defaultValues,c,a),w(z(e._formValues,c))&&B(e._formValues,c,a)}return i||e.register(c),n.current=c,()=>{(i?a&&!e._state.action:a)?e.unregister(c):d(c,!1)}},[c,e,i,f]),p.default.useEffect(()=>{e._setDisabledField({disabled:d,name:c})},[d,c,e]),p.default.useMemo(()=>({field:y,formState:l,fieldState:q}),[y,l,q])}(a)),S=p.default.createContext(null);S.displayName="HookFormContext";var T=(a,b,c,d,e)=>b?{...c[a],types:{...c[a]&&c[a].types?c[a].types:{},[d]:e||!0}}:{},U=a=>Array.isArray(a)?a:[a],V=()=>{let a=[];return{get observers(){return a},next:b=>{for(let c of a)c.next&&c.next(b)},subscribe:b=>(a.push(b),{unsubscribe:()=>{a=a.filter(a=>a!==b)}}),unsubscribe:()=>{a=[]}}},W=a=>s(a)&&!Object.keys(a).length,X=a=>!1;function Y(a,b){let c=Array.isArray(b)?b:/^\w*$/.test(b)?[b]:y(b),d=1===c.length?a:function(a,b){let c=b.slice(0,-1).length,d=0;for(;d<c;)a=w(a)?d++:a[b[d++]];return a}(a,c),e=c.length-1,f=c[e];return d&&delete d[f],0!==e&&(s(d)&&W(d)||Array.isArray(d)&&function(a){for(let b in a)if(a.hasOwnProperty(b)&&!w(a[b]))return!1;return!0}(d))&&Y(a,c.slice(0,-1)),a}function Z(a){return Array.isArray(a)||s(a)&&!(a=>{for(let b in a)if(A(a[b]))return!0;return!1})(a)}function $(a,b={}){for(let c in a){let d=a[c];Z(d)?(b[c]=Array.isArray(d)?[]:{},$(d,b[c])):w(d)||(b[c]=!0)}return b}function _(a,b,c){for(let d in c||(c=$(b)),a){let e=a[d];if(Z(e))w(b)||P(c[d])?c[d]=$(e,Array.isArray(e)?[]:{}):_(e,r(b)?{}:b[d],c[d]);else{let a=b[d];c[d]=!Q(e,a)}}return c}let aa={value:!1,isValid:!1},ab={value:!0,isValid:!0};var ac=a=>{if(Array.isArray(a)){if(a.length>1){let b=a.filter(a=>a&&a.checked&&!a.disabled).map(a=>a.value);return{value:b,isValid:!!b.length}}return a[0].checked&&!a[0].disabled?a[0].attributes&&!w(a[0].attributes.value)?w(a[0].value)||""===a[0].value?ab:{value:a[0].value,isValid:!0}:ab:aa}return aa},ad=(a,{valueAsNumber:b,valueAsDate:c,setValueAs:d})=>w(a)?a:b?""===a?NaN:a?+a:a:c&&N(a)?new Date(a):d?d(a):a;let ae={isValid:!1,value:null};var af=a=>Array.isArray(a)?a.reduce((a,b)=>b&&b.checked&&!b.disabled?{isValid:!0,value:b.value}:a,ae):ae;function ag(a){let b=a.ref;return"file"===b.type?b.files:"radio"===b.type?af(a.refs).value:"select-multiple"===b.type?[...b.selectedOptions].map(({value:a})=>a):"checkbox"===b.type?ac(a.refs).value:ad(w(b.value)?a.ref.value:b.value,a)}var ah=a=>w(a)?a:a instanceof RegExp?a.source:s(a)?a.value instanceof RegExp?a.value.source:a.value:a,ai=a=>({isOnSubmit:!a||a===E,isOnBlur:"onBlur"===a,isOnChange:a===D,isOnAll:"all"===a,isOnTouch:"onTouched"===a});let aj="AsyncFunction";var ak=a=>!!a&&!!a.validate&&!!(A(a.validate)&&a.validate.constructor.name===aj||s(a.validate)&&Object.values(a.validate).find(a=>a.constructor.name===aj)),al=(a,b,c)=>!c&&(b.watchAll||b.watch.has(a)||[...b.watch].some(b=>a.startsWith(b)&&/^\.\w+/.test(a.slice(b.length))));let am=(a,b,c,d)=>{for(let e of c||Object.keys(a)){let c=z(a,e);if(c){let{_f:a,...f}=c;if(a){if(a.refs&&a.refs[0]&&b(a.refs[0],e)&&!d)return!0;else if(a.ref&&b(a.ref,a.name)&&!d)return!0;else if(am(f,b))break}else if(s(f)&&am(f,b))break}}};function an(a,b,c){let d=z(a,c);if(d||/^\w*$/.test(c))return{error:d,name:c};let e=c.split(".");for(;e.length;){let d=e.join("."),f=z(b,d),g=z(a,d);if(f&&!Array.isArray(f)&&c!==d)break;if(g&&g.type)return{name:d,error:g};if(g&&g.root&&g.root.type)return{name:`${d}.root`,error:g.root};e.pop()}return{name:c}}var ao=(a,b,c)=>{let d=U(z(a,c));return B(d,"root",b[c]),B(a,c,d),a};function ap(a,b,c="validate"){if(N(a)||Array.isArray(a)&&a.every(N)||"boolean"==typeof a&&!a)return{type:c,message:N(a)?a:"",ref:b}}var aq=a=>!s(a)||a instanceof RegExp?{value:a,message:""}:a,ar=async(a,b,c,d,e,f)=>{let{ref:g,refs:h,required:i,maxLength:j,minLength:k,min:l,max:m,pattern:n,validate:o,name:p,valueAsNumber:q,mount:t}=a._f,u=z(c,p);if(!t||b.has(p))return{};let v=h?h[0]:g,x=a=>{e&&v.reportValidity&&(v.setCustomValidity("boolean"==typeof a?"":a||""),v.reportValidity())},y={},B="radio"===g.type,C="checkbox"===g.type,D=(q||"file"===g.type)&&w(g.value)&&w(u)||""===u||Array.isArray(u)&&!u.length,E=T.bind(null,p,d,y),J=(a,b,c,d=F,e=G)=>{let f=a?b:c;y[p]={type:a?d:e,message:f,ref:g,...E(a?d:e,f)}};if(f?!Array.isArray(u)||!u.length:i&&(!(B||C)&&(D||r(u))||"boolean"==typeof u&&!u||C&&!ac(h).isValid||B&&!af(h).isValid)){let{value:a,message:b}=N(i)?{value:!!i,message:i}:aq(i);if(a&&(y[p]={type:I,message:b,ref:v,...E(I,b)},!d))return x(b),y}if(!D&&(!r(l)||!r(m))){let a,b,c=aq(m),e=aq(l);if(r(u)||isNaN(u)){let d=g.valueAsDate||new Date(u),f=a=>new Date(new Date().toDateString()+" "+a),h="time"==g.type,i="week"==g.type;N(c.value)&&u&&(a=h?f(u)>f(c.value):i?u>c.value:d>new Date(c.value)),N(e.value)&&u&&(b=h?f(u)<f(e.value):i?u<e.value:d<new Date(e.value))}else{let d=g.valueAsNumber||(u?+u:u);r(c.value)||(a=d>c.value),r(e.value)||(b=d<e.value)}if((a||b)&&(J(!!a,c.message,e.message,"max","min"),!d))return x(y[p].message),y}if((j||k)&&!D&&(N(u)||f&&Array.isArray(u))){let a=aq(j),b=aq(k),c=!r(a.value)&&u.length>+a.value,e=!r(b.value)&&u.length<+b.value;if((c||e)&&(J(c,a.message,b.message),!d))return x(y[p].message),y}if(n&&!D&&N(u)){let{value:a,message:b}=aq(n);if(a instanceof RegExp&&!u.match(a)&&(y[p]={type:H,message:b,ref:g,...E(H,b)},!d))return x(b),y}if(o){if(A(o)){let a=ap(await o(u,c),v);if(a&&(y[p]={...a,...E("validate",a.message)},!d))return x(a.message),y}else if(s(o)){let a={};for(let b in o){if(!W(a)&&!d)break;let e=ap(await o[b](u,c),v,b);e&&(a={...e,...E(b,e.message)},x(e.message),d&&(y[p]=a))}if(!W(a)&&(y[p]={ref:v,...a},!d))return y}}return x(!0),y};let as={mode:E,reValidateMode:D,shouldFocusError:!0};function at({className:a,...b}){return(0,g.jsx)("label",{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...b})}let au=a=>{let{children:b,watch:c,getValues:d,getFieldState:e,setError:f,clearErrors:g,setValue:h,trigger:i,formState:j,resetField:k,reset:l,handleSubmit:m,unregister:n,control:o,register:q,setFocus:r,subscribe:s}=a;return p.default.createElement(S.Provider,{value:p.default.useMemo(()=>({watch:c,getValues:d,getFieldState:e,setError:f,clearErrors:g,setValue:h,trigger:i,formState:j,resetField:k,reset:l,handleSubmit:m,unregister:n,control:o,register:q,setFocus:r,subscribe:s}),[g,o,j,e,d,m,q,l,k,f,r,h,s,i,n,c])},p.default.createElement(J.Provider,{value:o},b))},av=p.createContext({}),aw=({...a})=>(0,g.jsx)(av.Provider,{value:{name:a.name},children:(0,g.jsx)(R,{...a})}),ax=()=>{let a=p.useContext(av),b=p.useContext(ay),{getFieldState:c}=p.default.useContext(S),d=M({name:a.name}),e=c(a.name,d);if(!a)throw Error("useFormField should be used within <FormField>");let{id:f}=b;return{id:f,name:a.name,formItemId:`${f}-form-item`,formDescriptionId:`${f}-form-item-description`,formMessageId:`${f}-form-item-message`,...e}},ay=p.createContext({});function az({className:a,...b}){let c=p.useId();return(0,g.jsx)(ay.Provider,{value:{id:c},children:(0,g.jsx)("div",{"data-slot":"form-item",className:(0,i.cn)("grid gap-2",a),...b})})}function aA({className:a,...b}){let{error:c,formItemId:d}=ax();return(0,g.jsx)(at,{"data-slot":"form-label","data-error":!!c,className:(0,i.cn)("data-[error=true]:text-destructive",a),htmlFor:d,...b})}function aB({className:a,children:b,...c}){let{error:d,formItemId:e,formDescriptionId:f,formMessageId:g}=ax(),h=p.Children.only(b);if(!p.isValidElement(h))throw Error("FormControl expects a single React element child.");let j=d?`${f} ${g}`:`${f}`,k={...c,id:e,"aria-describedby":j,"aria-invalid":!!d,"data-slot":"form-control",className:(0,i.cn)(h.props.className,a)};return p.cloneElement(h,k)}function aC({className:a,...b}){let{error:c,formMessageId:d}=ax(),e=c?String(c?.message??""):b.children;return e?(0,g.jsx)("p",{"data-slot":"form-message",id:d,className:(0,i.cn)("text-destructive text-sm",a),...b,children:e}):null}var aD=a.i(5255),aE=a.i(709);a.s([],43945),a.i(43945);var aF=a.i(23039),aG=a.i(68499),aH=a.i(49400),aI=a.i(34351),aJ=a.i(83525),aK=a.i(24802),aL=a.i(25110),aM=a.i(6889),aN=a.i(63761),aO=a.i(18636),aP=a.i(7741);let aQ=p.createContext(void 0);var aR=a.i(82938);let aS=((b={}).checked="data-checked",b.unchecked="data-unchecked",b.disabled="data-disabled",b.readonly="data-readonly",b.required="data-required",b.valid="data-valid",b.invalid="data-invalid",b.touched="data-touched",b.dirty="data-dirty",b.filled="data-filled",b.focused="data-focused",b),aT={...aR.fieldValidityMapping,checked:a=>a?{[aS.checked]:""}:{[aS.unchecked]:""}};var aU=a.i(58044),aV=a.i(7295),aW=a.i(58886),aX=a.i(55840),aY=a.i(36023),aZ=a.i(45351),a$=a.i(87222),a_=a.i(60050);let a0=p.forwardRef(function(a,b){let{checked:c,className:d,defaultChecked:e,id:f,inputRef:h,name:i,nativeButton:j=!1,onCheckedChange:k,readOnly:l=!1,required:m=!1,disabled:n=!1,render:o,uncheckedValue:q,value:r,...s}=a,{clearErrors:t}=(0,aW.useFormContext)(),{state:u,setTouched:v,setDirty:w,validityData:x,setFilled:y,setFocused:z,shouldValidateOnChange:A,validationMode:B,disabled:C,name:D,validation:E}=(0,aV.useFieldRootContext)(),{labelId:F}=(0,aX.useLabelableContext)(),G=C||n,H=D??i,I=(0,aG.useStableCallback)(k),J=p.useRef(null),K=(0,aH.useMergedRefs)(J,h,E.inputRef),L=p.useRef(null),M=(0,aN.useBaseUiId)(),N=(0,aY.useLabelableId)({id:f,implicit:!1,controlRef:L}),O=j?void 0:N,[P,Q]=(0,aF.useControlled)({controlled:c,default:!!e,name:"Switch",state:"checked"});(0,aU.useField)({id:M,commit:E.commit,value:P,controlRef:L,name:H,getValue:()=>P}),(0,aI.useIsoLayoutEffect)(()=>{J.current&&y(J.current.checked)},[J,y]),(0,a_.useValueChanged)(P,()=>{t(H),w(P!==x.initialValue),y(P),A()?E.commit(P):E.commit(P,!0)});let{getButtonProps:R,buttonRef:S}=(0,aO.useButton)({disabled:G,native:j}),T=p.useMemo(()=>(0,aM.mergeProps)({checked:P,disabled:G,id:O,name:H,required:m,style:H?aJ.visuallyHiddenInput:aJ.visuallyHidden,tabIndex:-1,type:"checkbox","aria-hidden":!0,ref:K,onChange(a){if(a.nativeEvent.defaultPrevented)return;let b=a.target.checked,c=(0,aZ.createChangeEventDetails)(a$.REASONS.none,a.nativeEvent);I?.(b,c),c.isCanceled||Q(b)},onFocus(){L.current?.focus()}},E.getInputValidationProps,void 0!==r?{value:r}:aK.EMPTY_OBJECT),[P,G,K,O,H,I,m,Q,E,r]),U=p.useMemo(()=>({...u,checked:P,disabled:G,readOnly:l,required:m}),[u,P,G,l,m]),V=(0,aL.useRenderElement)("span",a,{state:U,ref:[b,L,S],props:[{id:j?N:M,role:"switch","aria-checked":P,"aria-readonly":l||void 0,"aria-required":m||void 0,"aria-labelledby":F,onFocus(){G||z(!0)},onBlur(){let a=J.current;a&&!G&&(v(!0),z(!1),"onBlur"===B&&E.commit(a.checked))},onClick(a){l||G||(a.preventDefault(),J.current?.dispatchEvent(new PointerEvent("click",{bubbles:!0,shiftKey:a.shiftKey,ctrlKey:a.ctrlKey,altKey:a.altKey,metaKey:a.metaKey})))}},E.getValidationProps,s,R],stateAttributesMapping:aT});return(0,g.jsxs)(aQ.Provider,{value:U,children:[V,!P&&H&&void 0!==q&&(0,g.jsx)("input",{type:"hidden",name:H,value:q}),(0,g.jsx)("input",{...T})]})}),a1=p.forwardRef(function(a,b){let{render:c,className:d,...e}=a,{state:f}=(0,aV.useFieldRootContext)(),g=function(){let a=p.useContext(aQ);if(void 0===a)throw Error((0,aP.default)(63));return a}(),h={...f,...g};return(0,aL.useRenderElement)("span",a,{state:h,ref:b,stateAttributesMapping:aT,props:e})});a.s(["Root",0,a0,"Thumb",0,a1],98943);var a2=a.i(98943),a2=a2;function a3({className:a,size:b="default",...c}){return(0,g.jsx)(a2.Root,{"data-slot":"switch","data-size":b,className:(0,i.cn)("data-checked:bg-primary data-unchecked:bg-input focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:aria-invalid:border-destructive/50 dark:data-unchecked:bg-input/80 peer group/switch relative inline-flex shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none after:absolute after:-inset-x-3 after:-inset-y-2 focus-visible:ring-3 aria-invalid:ring-3 data-disabled:cursor-not-allowed data-disabled:opacity-50 data-[size=default]:h-[18.4px] data-[size=default]:w-[32px] data-[size=sm]:h-[14px] data-[size=sm]:w-[24px]",a),...c,children:(0,g.jsx)(a2.Thumb,{"data-slot":"switch-thumb",className:"bg-background dark:data-unchecked:bg-foreground dark:data-checked:bg-primary-foreground pointer-events-none block rounded-full ring-0 transition-transform group-data-[size=default]/switch:size-4 group-data-[size=sm]/switch:size-3 group-data-[size=default]/switch:data-checked:translate-x-[calc(100%-2px)] group-data-[size=sm]/switch:data-checked:translate-x-[calc(100%-2px)] group-data-[size=default]/switch:data-unchecked:translate-x-0 group-data-[size=sm]/switch:data-unchecked:translate-x-0"})})}var a4=a.i(27906),a5=a.i(76847),a6=a.i(47623);let a7="pending-game-v1";function a8(){let[a,b]=(0,p.useState)(null);return(0,p.useEffect)(()=>{let a=window.localStorage.getItem(a7);if(a)try{let c=JSON.parse(a);c?.status==="pending"&&c.snapshot&&b(c)}catch{window.localStorage.removeItem(a7)}},[]),{pendingGame:a,savePendingGame:(0,p.useCallback)(a=>{let c={status:"pending",snapshot:a};b(c),(0,a6.saveToLocalStorage)(a7,c)},[]),clearPendingGame:(0,p.useCallback)(()=>{b(null),window.localStorage.removeItem(a7)},[])}}let a9=(a,b,c)=>{if(a&&"reportValidity"in a){let d=z(c,b);a.setCustomValidity(d&&d.message||""),a.reportValidity()}},ba=(a,b)=>{for(let c in b.fields){let d=b.fields[c];d&&d.ref&&"reportValidity"in d.ref?a9(d.ref,c,a):d&&d.refs&&d.refs.forEach(b=>a9(b,c,a))}},bb=(a,b)=>{b.shouldUseNativeValidation&&ba(a,b);let c={};for(let d in a){let e=z(b.fields,d),f=Object.assign(a[d]||{},{ref:e&&e.ref});if(bc(b.names||Object.keys(a),d)){let a=Object.assign({},z(c,d));B(a,"root",f),B(c,d,a)}else B(c,d,f)}return c},bc=(a,b)=>{let c=bd(b);return a.some(a=>bd(a).match(`^${c}\\.\\d+`))};function bd(a){return a.replace(/\]|\[/g,"")}a.i(14459);var be=a.i(54124),bf=a.i(26085);function bg(a,b){try{var c=a()}catch(a){return b(a)}return c&&c.then?c.then(void 0,b):c}var bh=a.i(47701),bi=a.i(43192);let bj=a4.gameSettingsSchema.extend({startingScore:bi.z.enum(["301","501"]),gameMode:bi.z.enum(["bestOf","firstTo"]),legsToWin:bi.z.enum(["3","5","6","7","8","9"]),player1:bi.z.string().min(1,"Player 1 name is required"),player2:bi.z.string().optional(),checkoutAssist:bi.z.boolean()}),bk=[{value:"501",label:"501"},{value:"301",label:"301"}],bl=[{value:"single",label:"Single Out"},{value:"double",label:"Double Out"}],bm=[{value:"bestOf",label:"Best of X legs"},{value:"firstTo",label:"First to X legs"}],bn=[{value:"3",label:"3"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"8",label:"8"},{value:"9",label:"9"}];function bo(){let{setGameSettings:a,setPlayers:b,setGamePhase:c,restorePendingGame:d}=(0,a5.useGameStore)(a=>a),{pendingGame:e,clearPendingGame:f}=a8(),i=function(a={}){let b=p.default.useRef(void 0),c=p.default.useRef(void 0),[d,e]=p.default.useState({isDirty:!1,isValidating:!1,isLoading:A(a.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:a.errors||{},disabled:a.disabled||!1,isReady:!1,defaultValues:A(a.defaultValues)?void 0:a.defaultValues});if(!b.current)if(a.formControl)b.current={...a.formControl,formState:d},a.defaultValues&&!A(a.defaultValues)&&a.formControl.reset(a.defaultValues,a.resetOptions);else{let{formControl:c,...e}=function(a={}){let b,c={...as,...a},d={submitCount:0,isDirty:!1,isReady:!1,isLoading:A(c.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:c.errors||{},disabled:c.disabled||!1},e={},f=(s(c.defaultValues)||s(c.values))&&v(c.defaultValues||c.values)||{},g=c.shouldUnregister?{}:v(f),h={action:!1,mount:!1,watch:!1,keepIsValid:!1},i={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},j=0,k={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},l={...k},m={...l},n={array:V(),state:V()},o="all"===c.criteriaMode,p=async a=>{if(!h.keepIsValid&&!c.disabled&&(l.isValid||m.isValid||a)){let a;c.resolver?(a=W((await F()).errors),y()):a=await H(e,!0),a!==d.isValid&&n.state.next({isValid:a})}},y=(a,b)=>{!c.disabled&&(l.isValidating||l.validatingFields||m.isValidating||m.validatingFields)&&((a||Array.from(i.mount)).forEach(a=>{a&&(b?B(d.validatingFields,a,b):Y(d.validatingFields,a))}),n.state.next({validatingFields:d.validatingFields,isValidating:!W(d.validatingFields)}))},D=(a,b,c,d)=>{let i=z(e,a);if(i){let e=z(g,a,w(c)?z(f,a):c);w(e)||d&&d.defaultChecked||b?B(g,a,b?e:ag(i._f)):K(a,e),h.mount&&!h.action&&p()}},E=(a,b,e,g,h)=>{let i=!1,j=!1,k={name:a};if(!c.disabled){if(!e||g){(l.isDirty||m.isDirty)&&(j=d.isDirty,d.isDirty=k.isDirty=I(),i=j!==k.isDirty);let c=Q(z(f,a),b);j=!!z(d.dirtyFields,a),c?Y(d.dirtyFields,a):B(d.dirtyFields,a,!0),k.dirtyFields=d.dirtyFields,i=i||(l.dirtyFields||m.dirtyFields)&&!c!==j}if(e){let b=z(d.touchedFields,a);b||(B(d.touchedFields,a,e),k.touchedFields=d.touchedFields,i=i||(l.touchedFields||m.touchedFields)&&b!==e)}i&&h&&n.state.next(k)}return i?k:{}},F=async a=>(y(a,!0),await c.resolver(g,c.context,((a,b,c,d)=>{let e={};for(let c of a){let a=z(b,c);a&&B(e,c,a._f)}return{criteriaMode:c,names:[...a],fields:e,shouldUseNativeValidation:d}})(a||i.mount,e,c.criteriaMode,c.shouldUseNativeValidation))),G=async a=>{let{errors:b}=await F(a);if(y(a),a)for(let c of a){let a=z(b,c);a?B(d.errors,c,a):Y(d.errors,c)}else d.errors=b;return b},H=async(b,e,f={valid:!0})=>{for(let h in b){let j=b[h];if(j){let{_f:b,...h}=j;if(b){let h=i.array.has(b.name),k=j._f&&ak(j._f);k&&l.validatingFields&&y([b.name],!0);let m=await ar(j,i.disabled,g,o,c.shouldUseNativeValidation&&!e,h);if(k&&l.validatingFields&&y([b.name]),m[b.name]&&(f.valid=!1,e||a.shouldUseNativeValidation))break;e||(z(m,b.name)?h?ao(d.errors,m,b.name):B(d.errors,b.name,m[b.name]):Y(d.errors,b.name))}W(h)||await H(h,e,f)}}return f.valid},I=(a,b)=>!c.disabled&&(a&&b&&B(g,a,b),!Q(T(),f)),J=(a,b,c)=>O(a,i,{...h.mount?g:w(b)?f:N(a)?{[a]:b}:b},c,b),K=(a,b,c={})=>{let d=z(e,a),f=b;if(d){let c=d._f;c&&(c.disabled||B(g,a,ad(b,c)),c.ref,f=b,"select-multiple"===c.ref.type?[...c.ref.options].forEach(a=>a.selected=f.includes(a.value)):c.refs?"checkbox"===c.ref.type?c.refs.forEach(a=>{a.defaultChecked&&a.disabled||(Array.isArray(f)?a.checked=!!f.find(b=>b===a.value):a.checked=f===a.value||!!f)}):c.refs.forEach(a=>a.checked=a.value===f):"file"===c.ref.type?c.ref.value="":(c.ref.value=f,c.ref.type||n.state.next({name:a,values:v(g)})))}(c.shouldDirty||c.shouldTouch)&&E(a,f,c.shouldTouch,c.shouldDirty,!0),c.shouldValidate&&S(a)},L=(a,b,c)=>{for(let d in b){if(!b.hasOwnProperty(d))return;let f=b[d],g=a+"."+d,h=z(e,g);(i.array.has(a)||s(f)||h&&!h._f)&&!q(f)?L(g,f,c):K(g,f,c)}},M=(a,b,c={})=>{let j=z(e,a),k=i.array.has(a),o=v(b);B(g,a,o),k?(n.array.next({name:a,values:v(g)}),(l.isDirty||l.dirtyFields||m.isDirty||m.dirtyFields)&&c.shouldDirty&&n.state.next({name:a,dirtyFields:_(f,g),isDirty:I(a,o)})):!j||j._f||r(o)?K(a,o,c):L(a,o,c),al(a,i)?n.state.next({...d,name:a,values:v(g)}):n.state.next({name:h.mount?a:void 0,values:v(g)})},P=async a=>{h.mount=!0;let f=a.target,k=f.name,r=!0,s=z(e,k),u=a=>{r=Number.isNaN(a)||q(a)&&isNaN(a.getTime())||Q(a,z(g,k,a))},w=ai(c.mode),x=ai(c.reValidateMode);if(s){var A,D,G,I,J;let h,q,N,O=f.type?ag(s._f):t(a),P=a.type===C||"focusout"===a.type,R=!((N=s._f).mount&&(N.required||N.min||N.max||N.maxLength||N.minLength||N.pattern||N.validate))&&!c.resolver&&!z(d.errors,k)&&!s._f.deps||(A=P,D=z(d.touchedFields,k),G=d.isSubmitted,I=x,!(J=w).isOnAll&&(!G&&J.isOnTouch?!(D||A):(G?I.isOnBlur:J.isOnBlur)?!A:(G?!I.isOnChange:!J.isOnChange)||A)),T=al(k,i,P);B(g,k,O),P?f&&f.readOnly||(s._f.onBlur&&s._f.onBlur(a),b&&b(0)):s._f.onChange&&s._f.onChange(a);let U=E(k,O,P),V=!W(U)||T;if(P||n.state.next({name:k,type:a.type,values:v(g)}),R)return(l.isValid||m.isValid)&&("onBlur"===c.mode?P&&p():P||p()),V&&n.state.next({name:k,...T?{}:U});if(!P&&T&&n.state.next({...d}),c.resolver){let{errors:a}=await F([k]);if(y([k]),u(O),r){let b=an(d.errors,e,k),c=an(a,e,b.name||k);h=c.error,k=c.name,q=W(a)}}else y([k],!0),h=(await ar(s,i.disabled,g,o,c.shouldUseNativeValidation))[k],y([k]),u(O),r&&(h?q=!1:(l.isValid||m.isValid)&&(q=await H(e,!0)));if(r){s._f.deps&&(!Array.isArray(s._f.deps)||s._f.deps.length>0)&&S(s._f.deps);var K=k,L=q,M=h;let a=z(d.errors,K),e=(l.isValid||m.isValid)&&"boolean"==typeof L&&d.isValid!==L;if(c.delayError&&M){let a;a=()=>{B(d.errors,K,M),n.state.next({errors:d.errors})},(b=b=>{clearTimeout(j),j=setTimeout(a,b)})(c.delayError)}else clearTimeout(j),b=null,M?B(d.errors,K,M):Y(d.errors,K);if((M?!Q(a,M):a)||!W(U)||e){let a={...U,...e&&"boolean"==typeof L?{isValid:L}:{},errors:d.errors,name:K};d={...d,...a},n.state.next(a)}}}},R=(a,b)=>{if(z(d.errors,b)&&a.focus)return a.focus(),1},S=async(a,b={})=>{let f,g,h=U(a);if(c.resolver){let b=await G(w(a)?a:h);f=W(b),g=a?!h.some(a=>z(b,a)):f}else a?((g=(await Promise.all(h.map(async a=>{let b=z(e,a);return await H(b&&b._f?{[a]:b}:b)}))).every(Boolean))||d.isValid)&&p():g=f=await H(e);return n.state.next({...!N(a)||(l.isValid||m.isValid)&&f!==d.isValid?{}:{name:a},...c.resolver||!a?{isValid:f}:{},errors:d.errors}),b.shouldFocus&&!g&&am(e,R,a?h:i.mount),g},T=(a,b)=>{let c={...h.mount?g:f};return b&&(c=function a(b,c){let d={};for(let e in b)if(b.hasOwnProperty(e)){let f=b[e],g=c[e];if(f&&s(f)&&g){let b=a(f,g);s(b)&&(d[e]=b)}else b[e]&&(d[e]=g)}return d}(b.dirtyFields?d.dirtyFields:d.touchedFields,c)),w(a)?c:N(a)?z(c,a):a.map(a=>z(c,a))},Z=(a,b)=>({invalid:!!z((b||d).errors,a),isDirty:!!z((b||d).dirtyFields,a),error:z((b||d).errors,a),isValidating:!!z(d.validatingFields,a),isTouched:!!z((b||d).touchedFields,a)}),$=(a,b,c)=>{let f=(z(e,a,{_f:{}})._f||{}).ref,{ref:g,message:h,type:i,...j}=z(d.errors,a)||{};B(d.errors,a,{...j,...b,ref:f}),n.state.next({name:a,errors:d.errors,isValid:!1}),c&&c.shouldFocus&&f&&f.focus&&f.focus()},aa=a=>n.state.subscribe({next:b=>{let c,e,h;c=a.name,e=b.name,h=a.exact,(!c||!e||c===e||U(c).some(a=>a&&(h?a===e:a.startsWith(e)||e.startsWith(a))))&&((a,b,c,d)=>{c(a);let{name:e,...f}=a;return W(f)||Object.keys(f).length>=Object.keys(b).length||Object.keys(f).find(a=>b[a]===(!d||"all"))})(b,a.formState||l,at,a.reRenderRoot)&&a.callback({values:{...g},...d,...b,defaultValues:f})}}).unsubscribe,ab=(a,b={})=>{for(let h of a?U(a):i.mount)i.mount.delete(h),i.array.delete(h),b.keepValue||(Y(e,h),Y(g,h)),b.keepError||Y(d.errors,h),b.keepDirty||Y(d.dirtyFields,h),b.keepTouched||Y(d.touchedFields,h),b.keepIsValidating||Y(d.validatingFields,h),c.shouldUnregister||b.keepDefaultValue||Y(f,h);n.state.next({values:v(g)}),n.state.next({...d,...!b.keepDirty?{}:{isDirty:I()}}),b.keepIsValid||p()},ac=({disabled:a,name:b})=>{if("boolean"==typeof a&&h.mount||a||i.disabled.has(b)){let c=i.disabled.has(b);a?i.disabled.add(b):i.disabled.delete(b),!!a!==c&&h.mount&&!h.action&&p()}},ae=(a,b={})=>{let d=z(e,a),g="boolean"==typeof b.disabled||"boolean"==typeof c.disabled;return(B(e,a,{...d||{},_f:{...d&&d._f?d._f:{ref:{name:a}},name:a,mount:!0,...b}}),i.mount.add(a),d)?ac({disabled:"boolean"==typeof b.disabled?b.disabled:c.disabled,name:a}):D(a,!0,b.value),{...g?{disabled:b.disabled||c.disabled}:{},...c.progressive?{required:!!b.required,min:ah(b.min),max:ah(b.max),minLength:ah(b.minLength),maxLength:ah(b.maxLength),pattern:ah(b.pattern)}:{},name:a,onChange:P,onBlur:P,ref:g=>{if(g){let c;ae(a,b),d=z(e,a);let h=w(g.value)&&g.querySelectorAll&&g.querySelectorAll("input,select,textarea")[0]||g,i="radio"===(c=h).type||"checkbox"===c.type,j=d._f.refs||[];(i?j.find(a=>a===h):h===d._f.ref)||(B(e,a,{_f:{...d._f,...i?{refs:[...j.filter(X),h,...Array.isArray(z(f,a))?[{}]:[]],ref:{type:h.type,name:a}}:{ref:h}}}),D(a,!1,void 0,h))}else(d=z(e,a,{}))._f&&(d._f.mount=!1),(c.shouldUnregister||b.shouldUnregister)&&!(u(i.array,a)&&h.action)&&i.unMount.add(a)}}},af=()=>c.shouldFocusError&&am(e,R,i.mount),aj=(a,b)=>async f=>{let h;f&&(f.preventDefault&&f.preventDefault(),f.persist&&f.persist());let j=v(g);if(n.state.next({isSubmitting:!0}),c.resolver){let{errors:a,values:b}=await F();y(),d.errors=a,j=v(b)}else await H(e);if(i.disabled.size)for(let a of i.disabled)Y(j,a);if(Y(d.errors,"root"),W(d.errors)){n.state.next({errors:{}});try{await a(j,f)}catch(a){h=a}}else b&&await b({...d.errors},f),af(),setTimeout(af);if(n.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:W(d.errors)&&!h,submitCount:d.submitCount+1,errors:d.errors}),h)throw h},ap=(a,b={})=>{let j=a?v(a):f,k=v(j),m=W(a),o=m?f:k;if(b.keepDefaultValues||(f=j),!b.keepValues){if(b.keepDirtyValues)for(let a of Array.from(new Set([...i.mount,...Object.keys(_(f,g))]))){let b=z(d.dirtyFields,a),c=z(g,a),e=z(o,a);b&&!w(c)?B(o,a,c):b||w(e)||M(a,e)}else if(b.keepFieldsRef)for(let a of i.mount)M(a,z(o,a));else e={};g=c.shouldUnregister?b.keepDefaultValues?v(f):{}:v(o),n.array.next({values:{...o}}),n.state.next({values:{...o}})}i={mount:b.keepDirtyValues?i.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},h.mount=!l.isValid||!!b.keepIsValid||!!b.keepDirtyValues||!c.shouldUnregister&&!W(o),h.watch=!!c.shouldUnregister,h.keepIsValid=!!b.keepIsValid,h.action=!1,b.keepErrors||(d.errors={}),n.state.next({submitCount:b.keepSubmitCount?d.submitCount:0,isDirty:!m&&(b.keepDirty?d.isDirty:!!(b.keepDefaultValues&&!Q(a,f))),isSubmitted:!!b.keepIsSubmitted&&d.isSubmitted,dirtyFields:m?{}:b.keepDirtyValues?b.keepDefaultValues&&g?_(f,g):d.dirtyFields:b.keepDefaultValues&&a?_(f,a):b.keepDirty?d.dirtyFields:{},touchedFields:b.keepTouched?d.touchedFields:{},errors:b.keepErrors?d.errors:{},isSubmitSuccessful:!!b.keepIsSubmitSuccessful&&d.isSubmitSuccessful,isSubmitting:!1,defaultValues:f})},aq=(a,b)=>ap(A(a)?a(g):a,{...c.resetOptions,...b}),at=a=>{d={...d,...a}},au={control:{register:ae,unregister:ab,getFieldState:Z,handleSubmit:aj,setError:$,_subscribe:aa,_runSchema:F,_updateIsValidating:y,_focusError:af,_getWatch:J,_getDirty:I,_setValid:p,_setFieldArray:(a,b=[],i,j,k=!0,o=!0)=>{if(j&&i&&!c.disabled){if(h.action=!0,o&&Array.isArray(z(e,a))){let b=i(z(e,a),j.argA,j.argB);k&&B(e,a,b)}if(o&&Array.isArray(z(d.errors,a))){let b,c=i(z(d.errors,a),j.argA,j.argB);k&&B(d.errors,a,c),x(z(b=d.errors,a)).length||Y(b,a)}if((l.touchedFields||m.touchedFields)&&o&&Array.isArray(z(d.touchedFields,a))){let b=i(z(d.touchedFields,a),j.argA,j.argB);k&&B(d.touchedFields,a,b)}(l.dirtyFields||m.dirtyFields)&&(d.dirtyFields=_(f,g)),n.state.next({name:a,isDirty:I(a,b),dirtyFields:d.dirtyFields,errors:d.errors,isValid:d.isValid})}else B(g,a,b)},_setDisabledField:ac,_setErrors:a=>{d.errors=a,n.state.next({errors:d.errors,isValid:!1})},_getFieldArray:a=>x(z(h.mount?g:f,a,c.shouldUnregister?z(f,a,[]):[])),_reset:ap,_resetDefaultValues:()=>A(c.defaultValues)&&c.defaultValues().then(a=>{aq(a,c.resetOptions),n.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(let a of i.unMount){let b=z(e,a);b&&(b._f.refs?b._f.refs.every(a=>!X(a)):!X(b._f.ref))&&ab(a)}i.unMount=new Set},_disableForm:a=>{"boolean"==typeof a&&(n.state.next({disabled:a}),am(e,(b,c)=>{let d=z(e,c);d&&(b.disabled=d._f.disabled||a,Array.isArray(d._f.refs)&&d._f.refs.forEach(b=>{b.disabled=d._f.disabled||a}))},0,!1))},_subjects:n,_proxyFormState:l,get _fields(){return e},get _formValues(){return g},get _state(){return h},set _state(value){h=value},get _defaultValues(){return f},get _names(){return i},set _names(value){i=value},get _formState(){return d},get _options(){return c},set _options(value){c={...c,...value}}},subscribe:a=>(h.mount=!0,m={...m,...a.formState},aa({...a,formState:{...k,...a.formState}})),trigger:S,register:ae,handleSubmit:aj,watch:(a,b)=>A(a)?n.state.subscribe({next:c=>"values"in c&&a(J(void 0,b),c)}):J(a,b,!0),setValue:M,getValues:T,reset:aq,resetField:(a,b={})=>{z(e,a)&&(w(b.defaultValue)?M(a,v(z(f,a))):(M(a,b.defaultValue),B(f,a,v(b.defaultValue))),b.keepTouched||Y(d.touchedFields,a),b.keepDirty||(Y(d.dirtyFields,a),d.isDirty=b.defaultValue?I(a,v(z(f,a))):I()),!b.keepError&&(Y(d.errors,a),l.isValid&&p()),n.state.next({...d}))},clearErrors:a=>{a&&U(a).forEach(a=>Y(d.errors,a)),n.state.next({errors:a?d.errors:{}})},unregister:ab,setError:$,setFocus:(a,b={})=>{let c=z(e,a),d=c&&c._f;if(d){let a=d.refs?d.refs[0]:d.ref;a.focus&&setTimeout(()=>{a.focus(),b.shouldSelect&&A(a.select)&&a.select()})}},getFieldState:Z};return{...au,formControl:au}}(a);b.current={...e,formState:d}}let f=b.current.control;return f._options=a,L(()=>{let a=f._subscribe({formState:f._proxyFormState,callback:()=>e({...f._formState}),reRenderRoot:!0});return e(a=>({...a,isReady:!0})),f._formState.isReady=!0,a},[f]),p.default.useEffect(()=>f._disableForm(a.disabled),[f,a.disabled]),p.default.useEffect(()=>{a.mode&&(f._options.mode=a.mode),a.reValidateMode&&(f._options.reValidateMode=a.reValidateMode)},[f,a.mode,a.reValidateMode]),p.default.useEffect(()=>{a.errors&&(f._setErrors(a.errors),f._focusError())},[f,a.errors]),p.default.useEffect(()=>{a.shouldUnregister&&f._subjects.state.next({values:f._getWatch()})},[f,a.shouldUnregister]),p.default.useEffect(()=>{if(f._proxyFormState.isDirty){let a=f._getDirty();a!==d.isDirty&&f._subjects.state.next({isDirty:a})}},[f,d.isDirty]),p.default.useEffect(()=>{var b;a.values&&!Q(a.values,c.current)?(f._reset(a.values,{keepFieldsRef:!0,...f._options.resetOptions}),(null==(b=f._options.resetOptions)?void 0:b.keepIsValid)||f._setValid(),c.current=a.values,e(a=>({...a}))):f._resetDefaultValues()},[f,a.values]),p.default.useEffect(()=>{f._state.mount||(f._setValid(),f._state.mount=!0),f._state.watch&&(f._state.watch=!1,f._subjects.state.next({...f._formState})),f._removeUnmounted()}),b.current.formState=p.default.useMemo(()=>K(d,f),[f,d]),b.current}({resolver:function(a,b,c){if(void 0===c&&(c={}),"_def"in a&&"object"==typeof a._def&&"typeName"in a._def)return function(b,d,e){try{return Promise.resolve(bg(function(){return Promise.resolve(a["sync"===c.mode?"parse":"parseAsync"](b,void 0)).then(function(a){return e.shouldUseNativeValidation&&ba({},e),{errors:{},values:c.raw?Object.assign({},b):a}})},function(a){if(Array.isArray(null==a?void 0:a.issues))return{values:{},errors:bb(function(a,b){for(var c={};a.length;){var d=a[0],e=d.code,f=d.message,g=d.path.join(".");if(!c[g])if("unionErrors"in d){var h=d.unionErrors[0].errors[0];c[g]={message:h.message,type:h.code}}else c[g]={message:f,type:e};if("unionErrors"in d&&d.unionErrors.forEach(function(b){return b.errors.forEach(function(b){return a.push(b)})}),b){var i=c[g].types,j=i&&i[d.code];c[g]=T(g,b,c,e,j?[].concat(j,d.message):d.message)}a.shift()}return c}(a.errors,!e.shouldUseNativeValidation&&"all"===e.criteriaMode),e)};throw a}))}catch(a){return Promise.reject(a)}};if("_zod"in a&&"object"==typeof a._zod)return function(b,d,e){try{return Promise.resolve(bg(function(){return Promise.resolve(("sync"===c.mode?bf.parse:bf.parseAsync)(a,b,void 0)).then(function(a){return e.shouldUseNativeValidation&&ba({},e),{errors:{},values:c.raw?Object.assign({},b):a}})},function(a){if(a instanceof be.$ZodError)return{values:{},errors:bb(function(a,b){for(var c={};a.length;){var d=a[0],e=d.code,f=d.message,g=d.path.join(".");if(!c[g])if("invalid_union"===d.code&&d.errors.length>0){var h=d.errors[0][0];c[g]={message:h.message,type:h.code}}else c[g]={message:f,type:e};if("invalid_union"===d.code&&d.errors.forEach(function(b){return b.forEach(function(b){return a.push(b)})}),b){var i=c[g].types,j=i&&i[d.code];c[g]=T(g,b,c,e,j?[].concat(j,d.message):d.message)}a.shift()}return c}(a.issues,!e.shouldUseNativeValidation&&"all"===e.criteriaMode),e)};throw a}))}catch(a){return Promise.reject(a)}};throw Error("Invalid input: not a Zod schema")}(bj),defaultValues:{startingScore:"501",outMode:"single",gameMode:"bestOf",legsToWin:"3",player1:"",player2:"",checkoutAssist:!1}}),m=e?.status==="pending";return(0,g.jsxs)(j,{className:"w-full lg:mx-auto lg:w-xl",children:[(0,g.jsx)(k,{children:(0,g.jsx)(l,{className:"text-center",children:"New Match Setup"})}),(0,g.jsxs)(n,{children:[m&&(0,g.jsxs)("div",{className:"mb-6 rounded-lg border p-4",children:[(0,g.jsx)("p",{className:"mb-3 text-sm font-medium",children:"Pending game found"}),(0,g.jsx)("p",{className:"text-muted-foreground mb-4 text-sm",children:"Continue your previous game or discard it and start a new match."}),(0,g.jsxs)("div",{className:"flex gap-2",children:[(0,g.jsx)(h.Button,{className:"flex-1",onClick:()=>d(e.snapshot),children:"Continue game"}),(0,g.jsx)(h.Button,{className:"flex-1",variant:"outline",onClick:f,children:"Discard pending game"})]})]}),(0,g.jsx)(au,{...i,children:(0,g.jsxs)("form",{onSubmit:i.handleSubmit(d=>{f();let e=d.player2&&""!==d.player2.trim()?2:1;bh.default.capture("match_setup_completed",{history_event:"match_setup_completed",starting_score:Number.parseInt(d.startingScore),out_mode:d.outMode,game_mode:d.gameMode,legs_to_win:Number.parseInt(d.legsToWin),checkout_assist:d.checkoutAssist,player_count:e}),a({startingScore:Number.parseInt(d.startingScore),outMode:d.outMode,gameMode:d.gameMode,legsToWin:Number.parseInt(d.legsToWin),checkoutAssist:d.checkoutAssist});let g=[{name:d.player1}];d.player2&&""!==d.player2.trim()&&g.push({name:d.player2}),b(g),c("preGame")}),className:"space-y-6",children:[(0,g.jsx)(aw,{control:i.control,name:"startingScore",render:({field:a})=>(0,g.jsxs)(az,{children:[(0,g.jsx)(aA,{children:"Starting Score"}),(0,g.jsxs)(aE.Select,{value:a.value,onValueChange:b=>a.onChange(b??""),items:bk,children:[(0,g.jsx)(aB,{children:(0,g.jsx)(aE.SelectTrigger,{className:"w-full",children:(0,g.jsx)(aE.SelectValue,{placeholder:"Select starting score"})})}),(0,g.jsx)(aE.SelectContent,{children:bk.map(a=>(0,g.jsx)(aE.SelectItem,{value:a.value,children:a.label},a.value))})]}),(0,g.jsx)(aC,{})]})}),(0,g.jsx)(aw,{control:i.control,name:"outMode",render:({field:a})=>(0,g.jsxs)(az,{children:[(0,g.jsx)(aA,{children:"Game Mode"}),(0,g.jsxs)(aE.Select,{value:a.value,onValueChange:b=>a.onChange(b??""),items:bl,children:[(0,g.jsx)(aB,{children:(0,g.jsx)(aE.SelectTrigger,{className:"w-full",children:(0,g.jsx)(aE.SelectValue,{placeholder:"Select game mode"})})}),(0,g.jsx)(aE.SelectContent,{children:bl.map(a=>(0,g.jsx)(aE.SelectItem,{value:a.value,children:a.label},a.value))})]}),(0,g.jsx)(aC,{})]})}),(0,g.jsx)(aw,{control:i.control,name:"gameMode",render:({field:a})=>(0,g.jsxs)(az,{children:[(0,g.jsx)(aA,{children:"Match Format"}),(0,g.jsxs)(aE.Select,{value:a.value,onValueChange:b=>a.onChange(b??""),items:bm,children:[(0,g.jsx)(aB,{children:(0,g.jsx)(aE.SelectTrigger,{className:"w-full",children:(0,g.jsx)(aE.SelectValue,{placeholder:"Select match format"})})}),(0,g.jsx)(aE.SelectContent,{children:bm.map(a=>(0,g.jsx)(aE.SelectItem,{value:a.value,children:a.label},a.value))})]}),(0,g.jsx)(aC,{})]})}),(0,g.jsx)(aw,{control:i.control,name:"legsToWin",render:({field:a})=>(0,g.jsxs)(az,{children:[(0,g.jsx)(aA,{children:"Number of Legs"}),(0,g.jsxs)(aE.Select,{value:a.value,onValueChange:b=>a.onChange(b??""),items:bn,children:[(0,g.jsx)(aB,{children:(0,g.jsx)(aE.SelectTrigger,{className:"w-full",children:(0,g.jsx)(aE.SelectValue,{placeholder:"Select number of legs"})})}),(0,g.jsx)(aE.SelectContent,{children:bn.map(a=>(0,g.jsx)(aE.SelectItem,{value:a.value,children:a.label},a.value))})]}),(0,g.jsx)(aC,{})]})}),(0,g.jsx)(aw,{control:i.control,name:"player1",render:({field:a})=>(0,g.jsxs)(az,{children:[(0,g.jsx)(aA,{children:"Player 1 Name"}),(0,g.jsx)(aB,{children:(0,g.jsx)(aD.Input,{placeholder:"Enter name",className:"w-full",...a})}),(0,g.jsx)(aC,{})]})}),(0,g.jsx)(aw,{control:i.control,name:"player2",render:({field:a})=>(0,g.jsxs)(az,{children:[(0,g.jsx)(aA,{children:"Player 2 Name (Optional)"}),(0,g.jsx)(aB,{children:(0,g.jsx)(aD.Input,{placeholder:"Enter name for 2-player mode",className:"w-full",...a})}),(0,g.jsx)(aC,{})]})}),(0,g.jsx)(aw,{control:i.control,name:"checkoutAssist",render:({field:a})=>(0,g.jsxs)(az,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[(0,g.jsxs)("div",{className:"space-y-0.5",children:[(0,g.jsx)(aA,{children:"Checkout Assist"}),(0,g.jsx)(aC,{})]}),(0,g.jsx)(aB,{children:(0,g.jsx)(a3,{checked:a.value,onCheckedChange:b=>a.onChange(b)})})]})}),(0,g.jsx)(h.Button,{type:"submit",className:"w-full",children:"Continue"})]})})]})]})}a.s([],26930),a.i(26930);var bp=a.i(29515);let bq=((c={}).checked="data-checked",c.unchecked="data-unchecked",c.disabled="data-disabled",c.readonly="data-readonly",c.required="data-required",c.valid="data-valid",c.invalid="data-invalid",c.touched="data-touched",c.dirty="data-dirty",c.filled="data-filled",c.focused="data-focused",c),br={checked:a=>a?{[bq.checked]:""}:{[bq.unchecked]:""},...bp.transitionStatusMapping,...aR.fieldValidityMapping},bs="data-composite-item-active";var bt=a.i(11218),bu=a.i(79952);let bv=p.createContext(void 0);var bw=a.i(28595);let bx=p.createContext(void 0),by=p.forwardRef(function(a,b){let{render:c,className:d,disabled:e=!1,readOnly:f=!1,required:h=!1,value:i,inputRef:j,nativeButton:k=!1,id:l,...m}=a,n=p.useContext(bv),{disabled:o,readOnly:q,required:r,checkedValue:s,touched:t=!1,validation:u,name:v}=n??{},w=n?.setCheckedValue??aK.NOOP,x=n?.setTouched??aK.NOOP,y=n?.registerControlRef??aK.NOOP,z=n?.registerInputRef??aK.NOOP,{setDirty:A,validityData:B,setTouched:C,setFilled:D,state:E,disabled:F}=(0,aV.useFieldRootContext)(),G=(0,bu.useFieldItemContext)(),{labelId:H,getDescriptionProps:I}=(0,aX.useLabelableContext)(),J=F||G.disabled||o||e,K=q||f,L=r||h,M=n?s===i:""===i,N=p.useMemo(()=>(0,bw.serializeValue)(i),[i]),O=p.useRef(null),P=p.useRef(null),Q=(0,aG.useStableCallback)(a=>{a&&y(a,J)}),R=(0,aH.useMergedRefs)(j,P,z);(0,aI.useIsoLayoutEffect)(()=>{P.current?.checked&&D(!0)},[D]),(0,aI.useIsoLayoutEffect)(()=>{if(P.current){if(J&&M)return void z(null);O.current&&y(O.current,J),z(P.current)}},[M,J,y,z]);let S=(0,aN.useBaseUiId)(),T=(0,aY.useLabelableId)({id:l,implicit:!1,controlRef:O}),{getButtonProps:U,buttonRef:V}=(0,aO.useButton)({disabled:J,native:k}),W={type:"radio",ref:R,id:k?void 0:T,name:v,tabIndex:-1,style:v?aJ.visuallyHiddenInput:aJ.visuallyHidden,"aria-hidden":!0,...void 0!==i?{value:N}:aK.EMPTY_OBJECT,disabled:J,checked:M,required:L,readOnly:K,onChange(a){if(a.nativeEvent.defaultPrevented||J||K||void 0===i)return;let b=(0,aZ.createChangeEventDetails)(a$.REASONS.none,a.nativeEvent);b.isCanceled||(C(!0),A(i!==B.initialValue),D(!0),w(i,b))},onFocus(){O.current?.focus()}},X=p.useMemo(()=>({...E,required:L,disabled:J,readOnly:K,checked:M}),[E,J,K,M,L]),Y=void 0!==n,Z=[b,O,V,Q],$=[{role:"radio","aria-checked":M,"aria-required":L||void 0,"aria-readonly":K||void 0,"aria-labelledby":H,[bs]:M?"":void 0,id:k?T:S,onKeyDown(a){"Enter"===a.key&&a.preventDefault()},onClick(a){a.defaultPrevented||J||K||(a.preventDefault(),P.current?.dispatchEvent(new PointerEvent("click",{bubbles:!0,shiftKey:a.shiftKey,ctrlKey:a.ctrlKey,altKey:a.altKey,metaKey:a.metaKey})))},onFocus(a){a.defaultPrevented||J||K||!t||(P.current?.click(),x(!1))}},I,u?.getValidationProps??aK.EMPTY_OBJECT,m,U],_=(0,aL.useRenderElement)("span",a,{enabled:!Y,state:X,ref:Z,props:$,stateAttributesMapping:br});return(0,g.jsxs)(bx.Provider,{value:X,children:[Y?(0,g.jsx)(bt.CompositeItem,{tag:"span",render:c,className:d,state:X,refs:Z,props:$,stateAttributesMapping:br}):_,(0,g.jsx)("input",{...W})]})});var bz=a.i(96109),bA=a.i(40823);let bB=p.forwardRef(function(a,b){let{render:c,className:d,keepMounted:e=!1,...f}=a,g=function(){let a=p.useContext(bx);if(void 0===a)throw Error((0,aP.default)(52));return a}(),h=g.checked,{mounted:i,transitionStatus:j,setMounted:k}=(0,bA.useTransitionStatus)(h),l={...g,transitionStatus:j},m=p.useRef(null),n=(0,aL.useRenderElement)("span",a,{ref:[b,m],state:l,props:f,stateAttributesMapping:br});return((0,bz.useOpenChangeComplete)({open:h,ref:m,onComplete(){h||k(!1)}}),e||i)?n:null});a.s(["Indicator",0,bB,"Root",0,by],51343);var bC=a.i(51343),bC=bC,bD=a.i(97446),bE=a.i(49315),bF=a.i(22508),bG=a.i(77019);let bH=[];var bI=a.i(81279),bJ=a.i(96551);function bK(a){let{render:b,className:c,refs:d=aK.EMPTY_ARRAY,props:e=aK.EMPTY_ARRAY,state:f=aK.EMPTY_OBJECT,stateAttributesMapping:h,highlightedIndex:i,onHighlightedIndexChange:j,orientation:k,dense:l,itemSizes:m,loopFocus:n,cols:o,enableHomeAndEndKeys:q,onMapChange:r,stopEventPropagation:s=!0,rootRef:t,disabledIndices:u,modifierKeys:v,highlightItemOnHover:w=!1,tag:x="div",...y}=a,{props:z,highlightedIndex:A,onHighlightedIndexChange:B,elementsRef:C,onMapChange:D,relayKeyboardEvent:E}=function(a){let{itemSizes:b,cols:c=1,loopFocus:d=!0,dense:e=!1,orientation:f="both",direction:g,highlightedIndex:h,onHighlightedIndexChange:i,rootRef:j,enableHomeAndEndKeys:k=!1,stopEventPropagation:l=!1,disabledIndices:m,modifierKeys:n=bH}=a,[o,q]=p.useState(0),r=c>1,s=p.useRef(null),t=(0,aH.useMergedRefs)(s,j),u=p.useRef([]),v=p.useRef(!1),w=h??o,x=(0,aG.useStableCallback)((a,b=!1)=>{if((i??q)(a),b){let b=u.current[a];(0,bE.scrollIntoViewIfNeeded)(s.current,b,g,f)}}),y=(0,aG.useStableCallback)(a=>{if(0===a.size||v.current)return;v.current=!0;let b=Array.from(a.keys()),c=b.find(a=>a?.hasAttribute(bs))??null,d=c?b.indexOf(c):-1;-1!==d&&x(d),(0,bE.scrollIntoViewIfNeeded)(s.current,c,g,f)}),z=p.useMemo(()=>({"aria-orientation":"both"===f?void 0:f,ref:t,onFocus(a){s.current&&(0,bE.isNativeInput)(a.target)&&a.target.setSelectionRange(0,a.target.value.length??0)},onKeyDown(a){var h;let i=k?bE.ALL_KEYS:bE.ARROW_KEYS;if(!i.has(a.key)||function(a,b){for(let c of bE.MODIFIER_KEYS.values())if(!b.includes(c)&&a.getModifierState(c))return!0;return!1}(a,n)||!s.current)return;let j="rtl"===g,o=j?bE.ARROW_LEFT:bE.ARROW_RIGHT,p={horizontal:o,vertical:bE.ARROW_DOWN,both:o}[f],q=j?bE.ARROW_RIGHT:bE.ARROW_LEFT,t={horizontal:q,vertical:bE.ARROW_UP,both:q}[f];if((0,bE.isNativeInput)(a.target)&&!(null==(h=a.target)||h.hasAttribute("disabled")||"true"===h.getAttribute("aria-disabled"))){let b=a.target.selectionStart,c=a.target.selectionEnd,d=a.target.value??"";if(null==b||a.shiftKey||b!==c||a.key!==t&&b<d.length||a.key!==p&&b>0)return}let v=w,y=(0,bG.getMinListIndex)(u,m),z=(0,bG.getMaxListIndex)(u,m);if(r){let g=b||Array.from({length:u.current.length},()=>({width:1,height:1})),h=(0,bG.createGridCellMap)(g,c,e),i=h.findIndex(a=>null!=a&&!(0,bG.isListIndexDisabled)(u,a,m)),k=h.reduce((a,b,c)=>null==b||(0,bG.isListIndexDisabled)(u,b,m)?a:c,-1);v=h[(0,bG.getGridNavigatedIndex)({current:h.map(a=>a?u.current[a]:null)},{event:a,orientation:f,loopFocus:d,cols:c,disabledIndices:(0,bG.getGridCellIndices)([...m||u.current.map((a,b)=>(0,bG.isListIndexDisabled)(u,b)?b:void 0),void 0],h),minIndex:i,maxIndex:k,prevIndex:(0,bG.getGridCellIndexOfCorner)(w>z?y:w,g,h,c,a.key===bE.ARROW_DOWN?"bl":a.key===bE.ARROW_RIGHT?"tr":"tl"),rtl:j})]}let A={horizontal:[o],vertical:[bE.ARROW_DOWN],both:[o,bE.ARROW_DOWN]}[f],B={horizontal:[q],vertical:[bE.ARROW_UP],both:[q,bE.ARROW_UP]}[f],C=r?i:({horizontal:k?bE.HORIZONTAL_KEYS_WITH_EXTRA_KEYS:bE.HORIZONTAL_KEYS,vertical:k?bE.VERTICAL_KEYS_WITH_EXTRA_KEYS:bE.VERTICAL_KEYS,both:i})[f];k&&(a.key===bE.HOME?v=y:a.key===bE.END&&(v=z)),v===w&&(A.includes(a.key)||B.includes(a.key))&&(v=d&&v===z&&A.includes(a.key)?y:d&&v===y&&B.includes(a.key)?z:(0,bG.findNonDisabledListIndex)(u,{startingIndex:v,decrement:B.includes(a.key),disabledIndices:m})),v===w||(0,bG.isIndexOutOfListBounds)(u,v)||(l&&a.stopPropagation(),C.has(a.key)&&a.preventDefault(),x(v,!0),queueMicrotask(()=>{u.current[v]?.focus()}))}}),[c,e,g,m,u,k,w,r,b,d,t,n,x,f,l]);return p.useMemo(()=>({props:z,highlightedIndex:w,onHighlightedIndexChange:x,elementsRef:u,disabledIndices:m,onMapChange:y,relayKeyboardEvent:z.onKeyDown}),[z,w,x,u,m,y])}({itemSizes:m,cols:o,loopFocus:n,dense:l,orientation:k,highlightedIndex:i,onHighlightedIndexChange:j,rootRef:t,stopEventPropagation:s,enableHomeAndEndKeys:q,direction:(0,bJ.useDirection)(),disabledIndices:u,modifierKeys:v}),F=(0,aL.useRenderElement)(x,a,{state:f,ref:d,props:[z,...e,y],stateAttributesMapping:h}),G=p.useMemo(()=>({highlightedIndex:A,onHighlightedIndexChange:B,highlightItemOnHover:w,relayKeyboardEvent:E}),[A,B,w,E]);return(0,g.jsx)(bI.CompositeRootContext.Provider,{value:G,children:(0,g.jsx)(bF.CompositeList,{elementsRef:C,onMapChange:a=>{r?.(a),D(a)},children:F})})}var bL=a.i(44006);let bM=[bE.SHIFT],bN=p.forwardRef(function(a,b){let{render:c,className:d,disabled:e,readOnly:f,required:h,onValueChange:i,value:j,defaultValue:k,name:l,inputRef:m,id:n,...o}=a,{setTouched:q,setFocused:r,shouldValidateOnChange:s,validationMode:t,name:u,disabled:v,state:w,validation:x,setDirty:y,setFilled:z,validityData:A}=(0,aV.useFieldRootContext)(),{labelId:B}=(0,aX.useLabelableContext)(),{clearErrors:C}=(0,aW.useFormContext)(),D=(0,bL.useFieldsetRootContext)(!0),E=v||e,F=u??l,G=(0,aN.useBaseUiId)(n),[H,I]=(0,aF.useControlled)({controlled:j,default:k,name:"RadioGroup",state:"value"}),J=(0,aG.useStableCallback)(i),K=(0,aG.useStableCallback)((a,b)=>{J(a,b),b.isCanceled||I(a)}),L=p.useRef(null),M=p.useRef(null),N=p.useRef(null);function O(a){let b;return m&&("function"==typeof m?b=m(a):m.current=a),M.current=a,x.inputRef.current=a,b}let P=(0,aG.useStableCallback)((a,b=!1)=>{if(a){if(b){L.current===a&&(L.current=null);return}null==L.current&&(L.current=a)}}),Q=(0,aG.useStableCallback)(a=>{if(!a||a.disabled)return;N.current||(N.current=a);let b=M.current;if(a.checked||null==b||b.disabled)return O(a)});(0,aU.useField)({id:G,commit:x.commit,value:H,controlRef:L,name:F,getValue:()=>H??null}),(0,a_.useValueChanged)(H,()=>{C(F),y(H!==A.initialValue),z(null!=H),s()?x.commit(H):x.commit(H,!0);let a=N.current;null==H&&a&&!a.disabled&&O(a)});let[R,S]=p.useState(!1),T=o["aria-labelledby"]??B??D?.legendId,U={...w,disabled:E??!1,required:h??!1,readOnly:f??!1},V=p.useMemo(()=>({...w,checkedValue:H,disabled:E,validation:x,name:F,onValueChange:J,readOnly:f,registerControlRef:P,registerInputRef:Q,required:h,setCheckedValue:K,setTouched:S,touched:R}),[H,E,x,w,F,J,f,P,Q,h,K,S,R]);return(0,g.jsx)(bv.Provider,{value:V,children:(0,g.jsx)(bK,{render:c,className:d,state:U,props:[{role:"radiogroup","aria-required":h||void 0,"aria-disabled":E||void 0,"aria-readonly":f||void 0,"aria-labelledby":T,onFocus(){r(!0)},onBlur(a){(0,bD.contains)(a.currentTarget,a.relatedTarget)||(q(!0),r(!1),"onBlur"===t&&x.commit(H))},onKeyDownCapture(a){a.key.startsWith("Arrow")&&(q(!0),S(!0),r(!0))}},x.getValidationProps,o],refs:[b],stateAttributesMapping:aR.fieldValidityMapping,enableHomeAndEndKeys:!1,modifierKeys:bM})})});var bO=a.i(70056);let bP=(0,bO.default)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);function bQ({className:a,...b}){return(0,g.jsx)(bN,{"data-slot":"radio-group",className:(0,i.cn)("grid w-full gap-3",a),...b})}function bR({className:a,...b}){return(0,g.jsx)(bC.Root,{"data-slot":"radio-group-item",className:(0,i.cn)("border-input text-primary dark:bg-input/30 focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:aria-invalid:border-destructive/50 group/radio-group-item peer relative flex aspect-square size-4 shrink-0 rounded-full border shadow-xs outline-none after:absolute after:-inset-x-3 after:-inset-y-2 focus-visible:ring-3 disabled:cursor-not-allowed disabled:opacity-50 aria-invalid:ring-3",a),...b,children:(0,g.jsx)(bC.Indicator,{"data-slot":"radio-group-indicator",className:"group-aria-invalid/radio-group-item:text-destructive text-primary flex size-4 items-center justify-center",children:(0,g.jsx)(bP,{className:"absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2 fill-current"})})})}a.i(9241);var bS=a.i(18204);class bT{ws=null;connection=null;eventHandlers=new Set;connectionStateHandlers=new Set;reconnectAttempts=0;maxReconnectAttempts=5;reconnectTimeout=null;sessionId;isDisconnecting=!1;connectionState="disconnected";workerUrl=null;isHost=!1;connectionId=0;hasEverConnected=!1;lastEventSentAt=null;lastEventReceivedAt=null;constructor(){this.sessionId=crypto.randomUUID()}async createGame(a){try{let b=await fetch(`${a}/game`,{method:"POST"});if(!b.ok)return console.error("Failed to create game:",b.statusText),null;let c=await b.json(),d=bS.createGameResponseSchema.safeParse(c);if(!d.success)return console.error("Invalid response from createGame:",d.error),null;let e={gameId:d.data.gameId,hostSecret:d.data.hostSecret};return this.connection=e,e}catch(a){return console.error("Error creating game:",a),null}}connect(a,b,c){this.connectionId++;let d=this.connectionId;if("connected"===this.connectionState&&this.connection?.gameId===b.gameId)return void console.log("[LiveStream] Already connected to this game");this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.ws&&this.cleanupWebSocket(),this.connection=b,this.isDisconnecting=!1,this.workerUrl=a,this.isHost=c,this.setConnectionState("connecting");let e=this.buildWebSocketUrl(a,b,c);console.log("[LiveStream] Connecting to WebSocket at:",e.replace(/hostSecret=[^&]+/,"hostSecret=***")),this.createWebSocket(e,d)}buildWebSocketUrl(a,b,c){let d=a.replace(/^http/,"ws"),e=new URL(`${d}/game/${b.gameId}/`);return e.searchParams.set("sessionId",this.sessionId),c&&e.searchParams.set("hostSecret",b.hostSecret),e.toString()}createWebSocket(a,b){try{this.ws=new WebSocket(a),this.setupWebSocketHandlers(b)}catch(a){console.error("[LiveStream] Error creating WebSocket:",a),this.setConnectionState("disconnected"),this.notifyHandlers({type:"error",message:"Failed to create WebSocket connection"})}}setupWebSocketHandlers(a){this.ws&&(this.ws.onopen=()=>{a!==this.connectionId?console.log("[LiveStream] Ignoring stale connection open"):this.handleWebSocketOpen()},this.ws.onmessage=b=>{a===this.connectionId&&this.handleWebSocketMessage(b)},this.ws.onerror=b=>{a!==this.connectionId?console.log("[LiveStream] Ignoring stale connection error"):this.handleWebSocketError(b)},this.ws.onclose=b=>{a!==this.connectionId?console.log("[LiveStream] Ignoring stale connection close"):this.handleWebSocketClose(b)})}handleWebSocketOpen(){console.log("[LiveStream] Connected"),console.debug("LiveStream","WebSocket connection opened",{sessionId:this.sessionId,isHost:this.isHost,gameId:this.connection?.gameId}),this.setConnectionState("connected"),this.reconnectAttempts=0,this.hasEverConnected=!0}handleWebSocketMessage(a){let b;this.lastEventReceivedAt=Date.now();let c=a.data,d="string"==typeof c?c:String(c);try{b=JSON.parse(d)}catch(a){console.error("[LiveStream] Error parsing message JSON:",a);return}let e=bS.serverEventSchema.safeParse(b);e.success?(console.debug("LiveStream","Event received",{eventType:e.data.type,timestamp:this.lastEventReceivedAt,event:e.data}),this.notifyHandlers(e.data)):console.error("[LiveStream] Invalid message format:",e.error)}handleWebSocketError(a){console.error("[LiveStream] WebSocket error:",a)}handleWebSocketClose(a){console.log(`[LiveStream] Disconnected (code: ${a.code}, clean: ${a.wasClean})`);let b=this.connectionState;this.setConnectionState("disconnected"),this.ws=null,this.isDisconnecting||("connected"===b||"reconnecting"===b||"connecting"===b)&&this.attemptReconnection()}attemptReconnection(){if(null!==this.reconnectTimeout)return void console.log("[LiveStream] Reconnection already scheduled");if(!this.connection||!this.workerUrl)return void this.notifyHandlers({type:"error",message:"Failed to reconnect: missing connection details"});if(this.reconnectAttempts>=this.maxReconnectAttempts){this.notifyHandlers({type:"error",message:"Failed to reconnect after multiple attempts"}),this.reconnectAttempts=0;return}this.reconnectAttempts++,this.setConnectionState("reconnecting");let a=Math.min(1e3*2**this.reconnectAttempts,3e4);console.log(`[LiveStream] Reconnecting in ${a}ms... (attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts})`),this.reconnectTimeout=setTimeout(()=>{this.reconnectTimeout=null,this.connection&&this.workerUrl&&!this.isDisconnecting&&this.connect(this.workerUrl,this.connection,this.isHost)},a)}sendEvent(a){if(this.ws?.readyState===WebSocket.OPEN){this.lastEventSentAt=Date.now();let b=JSON.stringify(a);console.debug("LiveStream","Event sent",{eventType:a.type,timestamp:this.lastEventSentAt,event:a}),this.ws.send(b)}else console.warn("[LiveStream] Cannot send event, not connected")}disconnect(){this.isDisconnecting=!0,this.setConnectionState("disconnecting"),this.connectionId++,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.cleanupWebSocket(),this.connection=null,this.reconnectAttempts=0,this.workerUrl=null,this.setConnectionState("disconnected")}cleanupWebSocket(){this.ws&&(this.ws.onopen=null,this.ws.onmessage=null,this.ws.onerror=null,this.ws.onclose=null,(this.ws.readyState===WebSocket.OPEN||this.ws.readyState===WebSocket.CONNECTING)&&this.ws.close(),this.ws=null)}subscribe(a){return this.eventHandlers.add(a),()=>{this.eventHandlers.delete(a)}}subscribeToConnectionState(a){return this.connectionStateHandlers.add(a),()=>{this.connectionStateHandlers.delete(a)}}notifyHandlers(a){this.eventHandlers.forEach(b=>{try{b(a)}catch(a){console.error("[LiveStream] Error in event handler:",a)}})}notifyConnectionStateHandlers(){this.connectionStateHandlers.forEach(a=>{try{a(this.connectionState)}catch(a){console.error("[LiveStream] Error in connection state handler:",a)}})}setConnectionState(a){this.connectionState!==a&&(this.connectionState=a,this.notifyConnectionStateHandlers())}getSessionId(){return this.sessionId}isConnected(){return"connected"===this.connectionState&&this.ws?.readyState===WebSocket.OPEN}getConnectionState(){return this.connectionState}getConnection(){return this.connection}getLastEventSentAt(){return this.lastEventSentAt}getLastEventReceivedAt(){return this.lastEventReceivedAt}forceClose(){console.debug("LiveStream","Forcing WebSocket close"),this.disconnect()}retryConnection(){return this.connection&&this.workerUrl?"connecting"===this.connectionState||"connected"===this.connectionState?(console.warn("[LiveStream] Cannot retry: already connecting or connected"),!1):(console.log("[LiveStream] Manually retrying connection"),this.reconnectAttempts=0,this.isDisconnecting=!1,this.connect(this.workerUrl,this.connection,this.isHost),!0):(console.warn("[LiveStream] Cannot retry: no connection details available"),!1)}ensureConnected(){this.connection&&this.workerUrl&&!this.isDisconnecting&&"connecting"!==this.connectionState&&"connected"!==this.connectionState&&"reconnecting"!==this.connectionState&&(this.hasEverConnected&&(this.reconnectAttempts=0),this.connect(this.workerUrl,this.connection,this.isHost))}}let bU=null,bV=new Map;function bW(a){let b=bV.get(a);return b||(b=new bT,bV.set(a,b)),b}let bX=process.env.NEXT_PUBLIC_LIVE_STREAM_WORKER_URL||"http://localhost:8787";function bY(){let a=(0,p.useRef)(bU??=new bT),b=(0,p.useRef)(null),c=(0,p.useRef)(null),[d,e]=(0,p.useState)(()=>{let b=a.current,c=b.getConnectionState(),d=b.getConnection();return{isActive:null!==d,connection:d,status:"connected"===c?"connected":"connecting"===c||"reconnecting"===c?"connecting":"disconnected",error:null}});(0,p.useEffect)(()=>{let b=a.current,c=b.subscribe(a=>{"sync"===a.type||"broadcast"===a.type&&"gameUpdate"===a.event.type?e(a=>({...a,status:"connected",error:null})):"error"===a.type&&e(b=>({...b,status:"error",error:a.message}))}),d=b.subscribeToConnectionState(a=>{e(c=>({...c,status:"connected"===a?"connected":"connecting"===a||"reconnecting"===a?"connecting":"disconnected"===a?"disconnected":c.status,isActive:null!==b.getConnection(),connection:b.getConnection()}))});return()=>{c(),d()}},[]);let f=(0,p.useCallback)(()=>{b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{a.current.isConnected()&&a.current.sendEvent({type:"heartbeat",timestamp:Date.now()}),f()},4e4)},[]);(0,p.useEffect)(()=>(f(),()=>{b.current&&clearTimeout(b.current),c.current&&clearTimeout(c.current)}),[f]),(0,p.useEffect)(()=>{let b=a.current;c.current&&clearTimeout(c.current),d.isActive&&"connected"!==d.status&&(c.current=setTimeout(()=>{b.ensureConnected()},1e4))},[d.isActive,d.status]);let g=(0,p.useCallback)(async()=>{let b=a.current;e(a=>({...a,status:"connecting"}));try{let a=await b.createGame(bX);if(!a)return void e(a=>({...a,status:"error",error:"Failed to create live stream"}));b.connect(bX,a,!0),e({isActive:!0,connection:a,status:"connecting",error:null})}catch(a){console.error("Error starting live stream:",a),e(a=>({...a,status:"error",error:"Failed to start live stream"}))}},[]),h=(0,p.useCallback)(()=>{a.current.disconnect(),e({isActive:!1,connection:null,status:"disconnected",error:null})},[]),i=(0,p.useCallback)(()=>{let b=a.current.retryConnection();return b&&e(a=>({...a,status:"connecting",error:null})),b},[]),j=(0,p.useCallback)(b=>{a.current.sendEvent(b),f()},[f]),k=(0,p.useCallback)(b=>a.current.subscribe(b),[]),l=(0,p.useCallback)(()=>d.connection?`?live-stream=${d.connection.gameId}`:null,[d.connection]);return{state:d,startLiveStream:g,stopLiveStream:h,retryConnection:i,sendEvent:j,subscribeToEvents:k,getLiveStreamUrl:l,manager:a.current}}function bZ(a){switch(a){case"connected":return"text-green-500";case"connecting":return"text-yellow-500";case"error":return"text-red-500";default:return"text-gray-500"}}function b$(a,b){switch(a){case"connected":return"Live";case"connecting":return"Connecting...";case"error":return b||"Error";default:return"Not streaming"}}function b_(a){let b=Math.floor((Date.now()-a)/1e3);if(b<1)return"just now";if(b<60)return`${b}s ago`;let c=Math.floor(b/60);if(c<60)return`${c}m ago`;let d=Math.floor(c/60);if(d<24)return`${d}h ago`;let e=Math.floor(d/24);return`${e}d ago`}let b0=(0,bO.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var b1=a.i(16856),b1=b1;let b2=(0,bO.default)("radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]),b3=(0,bO.default)("radio-tower",[["path",{d:"M4.9 16.1C1 12.2 1 5.8 4.9 1.9",key:"s0qx1y"}],["path",{d:"M7.8 4.7a6.14 6.14 0 0 0-.8 7.5",key:"1idnkw"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}],["path",{d:"M16.2 4.8c2 2 2.26 5.11.8 7.47",key:"ojru2q"}],["path",{d:"M19.1 1.9a9.96 9.96 0 0 1 0 14.1",key:"rhi7fg"}],["path",{d:"M9.5 18h5",key:"mfy3pd"}],["path",{d:"m8 22 4-11 4 11",key:"25yftu"}]]),b4=(0,bO.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),b5=(0,bO.default)("bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]),b6=(0,bO.default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),b7=(0,bO.default)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var b8=(0,p.createContext)({client:bh.default,bootstrap:void 0}),b9=function(a){return"function"==typeof a};function ca(a){var b,c,d=(0,p.useContext)(b8),e=d.client,f=d.bootstrap,g=(0,p.useState)(function(){return e.isFeatureEnabled(a)}),h=g[0],i=g[1];(0,p.useEffect)(function(){return e.onFeatureFlags(function(){i(e.isFeatureEnabled(a))})},[e,a]);var j=null==(b=null==f?void 0:f.featureFlags)?void 0:b[a];return!(null==(c=null==e?void 0:e.featureFlags)?void 0:c.hasLoadedFlags)&&(null==f?void 0:f.featureFlags)?void 0===j?void 0:!!j:h}var cb=function(a,b){return(cb=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)};"function"==typeof SuppressedError&&SuppressedError;var cc={componentStack:null,exceptionEvent:null,error:null};function cd({onSendEvent:a,onReconnect:b,onClose:c,isConnected:d}){let[e,f]=(0,p.useState)('{\n  "type": "heartbeat",\n  "timestamp": '+Date.now()+"\n}"),[i,o]=(0,p.useState)(null);if(!ca("enableDebugLogs"))return null;let q=a=>{f({heartbeat:JSON.stringify({type:"heartbeat",timestamp:Date.now()},null,2),score:JSON.stringify({type:"score",playerId:1,score:60,modifier:"single",newScore:441,validatedScore:60,isLegWin:!1,isBust:!1,currentVisitTotal:60},null,2),undo:JSON.stringify({type:"undo",playerId:1,lastScore:60,newVisitTotal:0},null,2)}[a]||"{}"),o(null)};return(0,g.jsxs)(j,{className:"border-dashed",children:[(0,g.jsxs)(k,{children:[(0,g.jsxs)(l,{className:"flex items-center gap-2",children:[(0,g.jsx)(b5,{className:"h-5 w-5 text-purple-500"}),"Debug Panel"]}),(0,g.jsx)(m,{children:"Developer tools for testing live stream events"})]}),(0,g.jsxs)(n,{className:"space-y-4",children:[(0,g.jsxs)("div",{className:"flex gap-2",children:[(0,g.jsxs)(h.Button,{onClick:b,size:"sm",variant:"outline",className:"flex-1",children:[(0,g.jsx)(b4,{className:"mr-2 h-4 w-4"}),"Reconnect"]}),(0,g.jsxs)(h.Button,{onClick:c,size:"sm",variant:"outline",className:"flex-1",disabled:!d,children:[(0,g.jsx)(b7,{className:"mr-2 h-4 w-4"}),"Close Socket"]})]}),(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsx)("label",{className:"text-sm font-medium",children:"Quick Templates:"}),(0,g.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,g.jsx)(h.Button,{onClick:()=>q("heartbeat"),size:"sm",variant:"secondary",children:"Heartbeat"}),(0,g.jsx)(h.Button,{onClick:()=>q("score"),size:"sm",variant:"secondary",children:"Score"}),(0,g.jsx)(h.Button,{onClick:()=>q("undo"),size:"sm",variant:"secondary",children:"Undo"})]})]}),(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsx)("label",{className:"text-sm font-medium",children:"Custom Event JSON:"}),(0,g.jsx)("textarea",{value:e,onChange:a=>{f(a.target.value),o(null)},className:"border-input bg-background min-h-[200px] w-full rounded-md border p-3 font-mono text-sm",placeholder:"Enter JSON event..."}),i&&(0,g.jsxs)("p",{className:"text-sm text-red-500",children:["Error: ",i]})]}),(0,g.jsxs)(h.Button,{onClick:()=>{try{let b=JSON.parse(e);a(b),o(null)}catch(a){o(a instanceof Error?a.message:"Invalid JSON")}},className:"w-full",disabled:!d,children:[(0,g.jsx)(b6,{className:"mr-2 h-4 w-4"}),"Send Event"]})]})]})}var ce=p.default.Component;if("function"!=typeof ce&&null!==ce)throw TypeError("Class extends value "+String(ce)+" is not a constructor or null");function cf(){this.constructor=cg}function cg(a){var b=ce.call(this,a)||this;return b.state=cc,b}cb(cg,ce),cg.prototype=null===ce?Object.create(ce):(cf.prototype=ce.prototype,new cf),cg.prototype.componentDidCatch=function(a,b){var c,d=this.props.additionalProperties;b9(d)?c=d(a):"object"==typeof d&&(c=d);var e=this.context.client.captureException(a,c),f=b.componentStack;this.setState({error:a,componentStack:null!=f?f:null,exceptionEvent:e})},cg.prototype.render=function(){var a=this.props,b=a.children,c=a.fallback,d=this.state;if(null==d.componentStack)return b9(b)?b():b;var e=b9(c)?p.default.createElement(c,{error:d.error,componentStack:d.componentStack,exceptionEvent:d.exceptionEvent}):c;return p.default.isValidElement(e)?e:(console.warn("[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element."),p.default.createElement(p.default.Fragment,null))},cg.contextType=b8;var ch=(0,p.createContext)({client:bh.default,bootstrap:void 0}),ci=function(a){return"function"==typeof a},cj=function(a,b){return(cj=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)};"function"==typeof SuppressedError&&SuppressedError;var ck={componentStack:null,exceptionEvent:null,error:null},cl=p.default.Component;if("function"!=typeof cl&&null!==cl)throw TypeError("Class extends value "+String(cl)+" is not a constructor or null");function cm(){this.constructor=cn}function cn(a){var b=cl.call(this,a)||this;return b.state=ck,b}function co(){var a,b,c,d,e,f,i,o,q,r;let{state:s,startLiveStream:t,stopLiveStream:u,retryConnection:v,getLiveStreamUrl:w,manager:x,sendEvent:y}=bY(),[z,A]=(0,p.useState)(!1),[B,C]=(0,p.useState)(null),D=w(),E=(a="enableDebugLogs",e=(d=(0,p.useContext)(ch)).client,f=d.bootstrap,o=(i=(0,p.useState)(function(){return e.isFeatureEnabled(a)}))[0],q=i[1],(0,p.useEffect)(function(){return e.onFeatureFlags(function(){q(e.isFeatureEnabled(a))})},[e,a]),r=null==(b=null==f?void 0:f.featureFlags)?void 0:b[a],!(null==(c=null==e?void 0:e.featureFlags)?void 0:c.hasLoadedFlags)&&(null==f?void 0:f.featureFlags)?void 0===r?void 0:!!r:o);(0,p.useEffect)(()=>{if(!E||!x)return;let a=()=>{let a=x.getLastEventSentAt(),b=x.getLastEventReceivedAt();a||b?C(b_(Math.max(a||0,b||0))):C(null)};a();let b=setInterval(a,1e3);return()=>clearInterval(b)},[E,x]);let F=async()=>{D&&(bh.default.capture("live_stream_url_copied",{history_event:"live_stream_url_copied"}),await navigator.clipboard.writeText(D),A(!0),setTimeout(()=>A(!1),2e3))},G=async()=>{bh.default.capture("live_stream_started",{history_event:"live_stream_started"}),await t()},H=()=>{v()},I="error"===s.status&&s.isActive;return(0,g.jsxs)(j,{children:[(0,g.jsxs)(k,{children:[(0,g.jsxs)(l,{className:"flex items-center gap-2",children:[(0,g.jsx)(b3,{className:"h-5 w-5"}),"Live Stream (experimental)"]}),(0,g.jsx)(m,{children:"Share your game in real-time with others"})]}),(0,g.jsxs)(n,{className:"space-y-4",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[(0,g.jsx)(b2,{className:`h-4 w-4 ${bZ(s.status)}`}),(0,g.jsx)("span",{className:"text-sm font-medium",children:b$(s.status,s.error)}),E&&B&&(0,g.jsxs)("span",{className:"text-muted-foreground text-xs",children:[" Last event: ",B]})]}),(0,g.jsxs)("div",{className:"flex gap-2",children:[I&&(0,g.jsxs)(h.Button,{onClick:H,size:"sm",variant:"outline",children:[(0,g.jsx)(b4,{className:"mr-2 h-4 w-4"}),"Retry"]}),s.isActive?(0,g.jsx)(h.Button,{onClick:()=>{bh.default.capture("live_stream_stopped",{history_event:"live_stream_stopped"}),u()},variant:"destructive",size:"sm",children:"Stop Stream"}):(0,g.jsx)(h.Button,{onClick:G,size:"sm",children:"Start Stream"})]})]}),s.isActive&&D&&(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsx)("p",{className:"text-muted-foreground text-sm",children:"Share this URL with viewers:"}),(0,g.jsxs)("div",{className:"flex gap-2",children:[(0,g.jsx)("input",{type:"text",value:D,readOnly:!0,className:"border-input bg-background flex-1 rounded-md border px-3 py-2 text-sm"}),(0,g.jsx)(h.Button,{onClick:F,size:"sm",variant:"outline",className:"flex-shrink-0",children:z?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(b1.default,{className:"mr-2 h-4 w-4"}),"Copied"]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(b0,{className:"mr-2 h-4 w-4"}),"Copy"]})})]})]}),E&&s.isActive&&(0,g.jsx)(cd,{onSendEvent:y,onReconnect:H,onClose:()=>{x&&x.forceClose()},isConnected:"connected"===s.status})]})]})}function cp(){let{players:a,setActivePlayer:b,setGamePhase:c,startGame:d,gameSettings:e}=(0,a5.useGameStore)(a=>a),[f,i]=(0,p.useState)(a[0]?.id||1),m=(0,p.useCallback)(()=>{bh.default.capture("match_started",{history_event:"match_started",player_count:a.length,starting_score:e.startingScore,out_mode:e.outMode,game_mode:e.gameMode,legs_to_win:e.legsToWin}),b(f),d()},[f,b,d,a.length,e]),q=(0,p.useCallback)(()=>{c("setup")},[c]);return(0,p.useEffect)(()=>{1===a.length&&m()},[m,a.length]),(0,g.jsxs)("div",{className:"flex w-full flex-col gap-4 lg:mx-auto lg:w-xl",children:[(0,g.jsxs)(j,{children:[(0,g.jsx)(k,{children:(0,g.jsx)(l,{className:"text-center",children:"Who starts?"})}),(0,g.jsx)(n,{children:(0,g.jsx)(bQ,{value:f.toString(),onValueChange:a=>i(Number.parseInt(String(a))),className:"space-y-4",children:a.map(a=>(0,g.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,g.jsx)(bR,{value:a.id.toString(),id:`player-${a.id}`}),(0,g.jsx)(at,{htmlFor:`player-${a.id}`,className:"text-lg font-medium",children:a.name})]},a.id))})}),(0,g.jsxs)(o,{className:"flex justify-between",children:[(0,g.jsx)(h.Button,{variant:"outline",onClick:q,children:"Back"}),(0,g.jsx)(h.Button,{onClick:m,children:"Start Match"})]})]}),(0,g.jsx)(co,{})]})}cj(cn,cl),cn.prototype=null===cl?Object.create(cl):(cm.prototype=cl.prototype,new cm),cn.prototype.componentDidCatch=function(a,b){var c,d=this.props.additionalProperties;ci(d)?c=d(a):"object"==typeof d&&(c=d);var e=this.context.client.captureException(a,c),f=b.componentStack;this.setState({error:a,componentStack:null!=f?f:null,exceptionEvent:e})},cn.prototype.render=function(){var a=this.props,b=a.children,c=a.fallback,d=this.state;if(null==d.componentStack)return ci(b)?b():b;var e=ci(c)?p.default.createElement(c,{error:d.error,componentStack:d.componentStack,exceptionEvent:d.exceptionEvent}):c;return p.default.isValidElement(e)?e:(console.warn("[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element."),p.default.createElement(p.default.Fragment,null))},cn.contextType=ch,a.s([],59598),a.i(59598);var cq=a.i(97180),cr=a.i(37676),cs=a.i(81309),ct=a.i(83599),cu=a.i(57118),cv=a.i(8672),cw=a.i(79162),cx=a.i(50848);function cy(a){let{store:b,parentContext:c,actionsRef:d}=a,e=b.useState("open"),f=b.useState("disablePointerDismissal"),g=b.useState("modal"),h=b.useState("popupElement"),{openMethod:i,triggerProps:j,reset:k}=(0,cw.useOpenInteractionType)(e);(0,cx.useImplicitActiveTrigger)(b);let{forceUnmount:l}=(0,cx.useOpenStateTransitions)(e,b,()=>{k()}),m=(0,aG.useStableCallback)(a=>{let c=(0,aZ.createChangeEventDetails)(a);return c.preventUnmountOnClose=()=>{b.set("preventUnmountingOnClose",!0)},c}),n=p.useCallback(()=>{b.setOpen(!1,m(a$.REASONS.imperativeAction))},[b,m]);p.useImperativeHandle(d,()=>({unmount:l,close:n}),[l,n]);let o=(0,cv.useSyncedFloatingRootContext)({popupStore:b,onOpenChange:b.setOpen,treatPopupAsFloatingElement:!0,noEmit:!0}),[q,r]=p.useState(0),s=0===q,t=(0,cu.useRole)(o),u=(0,cs.useDismiss)(o,{outsidePressEvent:()=>b.context.internalBackdropRef.current||b.context.backdropRef.current?"intentional":{mouse:"trap-focus"===g?"sloppy":"intentional",touch:"sloppy"},outsidePress(a){if(!b.context.outsidePressEnabledRef.current||"button"in a&&0!==a.button||"touches"in a&&1!==a.touches.length)return!1;let c=(0,bD.getTarget)(a);return!!s&&!f&&(!g||!b.context.internalBackdropRef.current&&!b.context.backdropRef.current||b.context.internalBackdropRef.current===c||b.context.backdropRef.current===c||(0,bD.contains)(c,h)&&!c?.hasAttribute("data-base-ui-portal"))},escapeKey:s});(0,cr.useScrollLock)(e&&!0===g,h);let{getReferenceProps:v,getFloatingProps:w,getTriggerProps:x}=(0,ct.useInteractions)([t,u]);b.useContextCallback("onNestedDialogOpen",a=>{r(a+1)}),b.useContextCallback("onNestedDialogClose",()=>{r(0)}),p.useEffect(()=>(c?.onNestedDialogOpen&&e&&c.onNestedDialogOpen(q),c?.onNestedDialogClose&&!e&&c.onNestedDialogClose(),()=>{c?.onNestedDialogClose&&e&&c.onNestedDialogClose()}),[e,c,q]);let y=p.useMemo(()=>v(j),[v,j]),z=p.useMemo(()=>x(j),[x,j]),A=p.useMemo(()=>w(),[w]);b.useSyncedValues({openMethod:i,activeTriggerProps:y,inactiveTriggerProps:z,popupProps:A,floatingRootContext:o,nestedOpenDialogCount:q})}let cz=p.createContext(void 0);function cA(a){let b=p.useContext(cz);if(!1===a&&void 0===b)throw Error((0,aP.default)(27));return b}var cB=a.i(64871),cC=a.i(10152),cD=a.i(59005),cE=a.i(53242);let cF={...cD.popupStoreSelectors,modal:(0,cB.createSelector)(a=>a.modal),nested:(0,cB.createSelector)(a=>a.nested),nestedOpenDialogCount:(0,cB.createSelector)(a=>a.nestedOpenDialogCount),disablePointerDismissal:(0,cB.createSelector)(a=>a.disablePointerDismissal),openMethod:(0,cB.createSelector)(a=>a.openMethod),descriptionElementId:(0,cB.createSelector)(a=>a.descriptionElementId),titleElementId:(0,cB.createSelector)(a=>a.titleElementId),viewportElement:(0,cB.createSelector)(a=>a.viewportElement),role:(0,cB.createSelector)(a=>a.role)};class cG extends cC.ReactStore{constructor(a){super(function(a={}){return{...(0,cD.createInitialPopupStoreState)(),modal:!0,disablePointerDismissal:!1,popupElement:null,viewportElement:null,descriptionElementId:void 0,titleElementId:void 0,openMethod:null,nested:!1,nestedOpenDialogCount:0,role:"dialog",...a}}(a),{popupRef:p.createRef(),backdropRef:p.createRef(),internalBackdropRef:p.createRef(),outsidePressEnabledRef:{current:!0},triggerElements:new cE.PopupTriggerMap,onOpenChange:void 0,onOpenChangeComplete:void 0},cF)}setOpen=(a,b)=>{if(b.preventUnmountOnClose=()=>{this.set("preventUnmountingOnClose",!0)},a||null!=b.trigger||null==this.state.activeTriggerId||(b.trigger=this.state.activeTriggerElement??void 0),this.context.onOpenChange?.(a,b),b.isCanceled)return;let c={open:a,nativeEvent:b.event,reason:b.reason,nested:this.state.nested};this.state.floatingRootContext.context.events?.emit("openchange",c);let d={open:a},e=b.trigger?.id??null;(e||a)&&(d.activeTriggerId=e,d.activeTriggerElement=b.trigger??null),this.update(d)}}function cH(a){let{children:b,open:c,defaultOpen:d=!1,onOpenChange:e,onOpenChangeComplete:f,actionsRef:h,handle:i,triggerId:j,defaultTriggerId:k=null}=a,l=cA(),m=!!l,n=(0,cq.useRefWithInit)(()=>i?.store??new cG({open:d,openProp:c,activeTriggerId:k,triggerIdProp:j,modal:!0,disablePointerDismissal:!0,nested:m,role:"alertdialog"})).current;n.useControlledProp("openProp",c),n.useControlledProp("triggerIdProp",j),n.useSyncedValue("nested",m),n.useContextCallback("onOpenChange",e),n.useContextCallback("onOpenChangeComplete",f);let o=n.useState("payload");cy({store:n,actionsRef:h,parentContext:l?.store.context,onOpenChange:e,triggerIdProp:j});let q=p.useMemo(()=>({store:n}),[n]);return(0,g.jsx)(cz.Provider,{value:q,children:"function"==typeof b?b({payload:o}):b})}var cI=a.i(34176);let cJ={...cI.popupStateMapping,...bp.transitionStatusMapping},cK=p.forwardRef(function(a,b){let{render:c,className:d,forceRender:e=!1,...f}=a,{store:g}=cA(),h=g.useState("open"),i=g.useState("nested"),j=g.useState("mounted"),k=g.useState("transitionStatus");return(0,aL.useRenderElement)("div",a,{state:{open:h,transitionStatus:k},ref:[g.context.backdropRef,b],stateAttributesMapping:cJ,props:[{role:"presentation",hidden:!j,style:{userSelect:"none",WebkitUserSelect:"none"}},f],enabled:e||!i})}),cL=p.forwardRef(function(a,b){let{render:c,className:d,disabled:e=!1,nativeButton:f=!0,...g}=a,{store:h}=cA(),i=h.useState("open"),{getButtonProps:j,buttonRef:k}=(0,aO.useButton)({disabled:e,native:f});return(0,aL.useRenderElement)("button",a,{state:{disabled:e},ref:[b,k],props:[{onClick:function(a){i&&h.setOpen(!1,(0,aZ.createChangeEventDetails)(a$.REASONS.closePress,a.nativeEvent))}},g,j]})}),cM=p.forwardRef(function(a,b){let{render:c,className:d,id:e,...f}=a,{store:g}=cA(),h=(0,aN.useBaseUiId)(e);return g.useSyncedValueWithCleanup("descriptionElementId",h),(0,aL.useRenderElement)("p",a,{ref:b,props:[{id:h},f]})});var cN=a.i(14337);let cO=((d={}).nestedDialogs="--nested-dialogs",d),cP=((e={})[e.open=cI.CommonPopupDataAttributes.open]="open",e[e.closed=cI.CommonPopupDataAttributes.closed]="closed",e[e.startingStyle=cI.CommonPopupDataAttributes.startingStyle]="startingStyle",e[e.endingStyle=cI.CommonPopupDataAttributes.endingStyle]="endingStyle",e.nested="data-nested",e.nestedDialogOpen="data-nested-dialog-open",e),cQ=p.createContext(void 0);function cR(){let a=p.useContext(cQ);if(void 0===a)throw Error((0,aP.default)(26));return a}let cS={...cI.popupStateMapping,...bp.transitionStatusMapping,nestedDialogOpen:a=>a?{[cP.nestedDialogOpen]:""}:null},cT=p.forwardRef(function(a,b){let{className:c,finalFocus:d,initialFocus:e,render:f,...h}=a,{store:i}=cA(),j=i.useState("descriptionElementId"),k=i.useState("disablePointerDismissal"),l=i.useState("floatingRootContext"),m=i.useState("popupProps"),n=i.useState("modal"),o=i.useState("mounted"),p=i.useState("nested"),q=i.useState("nestedOpenDialogCount"),r=i.useState("open"),s=i.useState("openMethod"),t=i.useState("titleElementId"),u=i.useState("transitionStatus"),v=i.useState("role");cR(),(0,bz.useOpenChangeComplete)({open:r,ref:i.context.popupRef,onComplete(){r&&i.context.onOpenChangeComplete?.(!0)}});let w=void 0===e?function(a){return"touch"!==a||i.context.popupRef.current}:e,x=(0,aL.useRenderElement)("div",a,{state:{open:r,nested:p,transitionStatus:u,nestedDialogOpen:q>0},props:[m,{"aria-labelledby":t??void 0,"aria-describedby":j??void 0,role:v,tabIndex:-1,hidden:!o,onKeyDown(a){bE.COMPOSITE_KEYS.has(a.key)&&a.stopPropagation()},style:{[cO.nestedDialogs]:q}},h],ref:[b,i.context.popupRef,i.useStateSetter("popupElement")],stateAttributesMapping:cS});return(0,g.jsx)(cN.FloatingFocusManager,{context:l,openInteractionType:s,disabled:!o,closeOnFocusOut:!k,initialFocus:w,returnFocus:d,modal:!1!==n,restoreFocus:"popup",children:x})});var cU=a.i(60657),cV=a.i(80572),cW=a.i(28030);let cX=p.forwardRef(function(a,b){let{keepMounted:c=!1,...d}=a,{store:e}=cA(),f=e.useState("mounted"),h=e.useState("modal"),i=e.useState("open");return f||c?(0,g.jsx)(cQ.Provider,{value:c,children:(0,g.jsxs)(cV.FloatingPortal,{ref:b,...d,children:[f&&!0===h&&(0,g.jsx)(cW.InternalBackdrop,{ref:e.context.internalBackdropRef,inert:(0,cU.inertValue)(!i)}),a.children]})}):null}),cY=p.forwardRef(function(a,b){let{render:c,className:d,id:e,...f}=a,{store:g}=cA(),h=(0,aN.useBaseUiId)(e);return g.useSyncedValueWithCleanup("titleElementId",h),(0,aL.useRenderElement)("h2",a,{ref:b,props:[{id:h},f]})});var cZ=a.i(80308),c$=a.i(95508);let c_=p.forwardRef(function(a,b){let{render:c,className:d,disabled:e=!1,nativeButton:f=!0,id:g,payload:h,handle:i,...j}=a,k=cA(!0),l=i?.store??k?.store;if(!l)throw Error((0,aP.default)(79));let m=(0,aN.useBaseUiId)(g),n=l.useState("floatingRootContext"),o=l.useState("isOpenedByTrigger",m),q=p.useRef(null),{registerTrigger:r,isMountedByThisTrigger:s}=(0,cx.useTriggerDataForwarding)(m,q,l,{payload:h}),{getButtonProps:t,buttonRef:u}=(0,aO.useButton)({disabled:e,native:f}),v=(0,c$.useClick)(n,{enabled:null!=n}),w=(0,ct.useInteractions)([v]),x=l.useState("triggerProps",s);return(0,aL.useRenderElement)("button",a,{state:{disabled:e,open:o},ref:[u,b,r,q],props:[w.getReferenceProps(),x,{[cZ.CLICK_TRIGGER_IDENTIFIER]:"",id:m},j,t],stateAttributesMapping:cI.triggerOpenStateMapping})}),c0=((f={})[f.open=cI.CommonPopupDataAttributes.open]="open",f[f.closed=cI.CommonPopupDataAttributes.closed]="closed",f[f.startingStyle=cI.CommonPopupDataAttributes.startingStyle]="startingStyle",f[f.endingStyle=cI.CommonPopupDataAttributes.endingStyle]="endingStyle",f.nested="data-nested",f.nestedDialogOpen="data-nested-dialog-open",f),c1={...cI.popupStateMapping,...bp.transitionStatusMapping,nested:a=>a?{[c0.nested]:""}:null,nestedDialogOpen:a=>a?{[c0.nestedDialogOpen]:""}:null},c2=p.forwardRef(function(a,b){let{className:c,render:d,children:e,...f}=a,g=cR(),{store:h}=cA(),i=h.useState("open"),j=h.useState("nested"),k=h.useState("transitionStatus"),l=h.useState("nestedOpenDialogCount"),m=h.useState("mounted");return(0,aL.useRenderElement)("div",a,{enabled:g||m,state:{open:i,nested:j,transitionStatus:k,nestedDialogOpen:l>0},ref:[b,h.useStateSetter("viewportElement")],stateAttributesMapping:c1,props:[{role:"presentation",hidden:!m,style:{pointerEvents:i?void 0:"none"},children:e},f]})});class c3{constructor(a){this.store=a??new cG}open(a){let b=a?this.store.context.triggerElements.getById(a):void 0;this.store.setOpen(!0,(0,aZ.createChangeEventDetails)(a$.REASONS.imperativeAction,void 0,b))}openWithPayload(a){this.store.set("payload",a),this.store.setOpen(!0,(0,aZ.createChangeEventDetails)(a$.REASONS.imperativeAction,void 0,void 0))}close(){this.store.setOpen(!1,(0,aZ.createChangeEventDetails)(a$.REASONS.imperativeAction,void 0,void 0))}get isOpen(){return this.store.state.open}}function c4(){return new c3}function c5(){return new c3(new cG({modal:!0,disablePointerDismissal:!0,role:"alertdialog"}))}a.s(["Backdrop",0,cK,"Close",0,cL,"Description",0,cM,"Handle",()=>c3,"Popup",0,cT,"Portal",0,cX,"Root",()=>cH,"Title",0,cY,"Trigger",0,c_,"Viewport",0,c2,"createHandle",()=>c5],84657);var c6=a.i(84657),c6=c6;function c7({...a}){return(0,g.jsx)(c6.Root,{"data-slot":"alert-dialog",...a})}function c8({...a}){return(0,g.jsx)(c6.Portal,{"data-slot":"alert-dialog-portal",...a})}function c9({className:a,...b}){return(0,g.jsx)(c6.Backdrop,{"data-slot":"alert-dialog-overlay",className:(0,i.cn)("data-open:animate-in data-closed:animate-out data-closed:fade-out-0 data-open:fade-in-0 fixed inset-0 isolate z-50 bg-black/10 duration-100 supports-backdrop-filter:backdrop-blur-xs",a),...b})}function da({className:a,size:b="default",...c}){return(0,g.jsxs)(c8,{children:[(0,g.jsx)(c9,{}),(0,g.jsx)(c6.Popup,{"data-slot":"alert-dialog-content","data-size":b,className:(0,i.cn)("data-open:animate-in data-closed:animate-out data-closed:fade-out-0 data-open:fade-in-0 data-closed:zoom-out-95 data-open:zoom-in-95 bg-background ring-foreground/10 group/alert-dialog-content fixed top-1/2 left-1/2 z-50 grid w-full -translate-x-1/2 -translate-y-1/2 gap-4 rounded-xl p-4 ring-1 duration-100 outline-none data-[size=default]:max-w-xs data-[size=sm]:max-w-xs data-[size=default]:sm:max-w-sm",a),...c})]})}function db({className:a,...b}){return(0,g.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,i.cn)("grid grid-rows-[auto_1fr] place-items-center gap-1.5 text-center has-data-[slot=alert-dialog-media]:grid-rows-[auto_auto_1fr] has-data-[slot=alert-dialog-media]:gap-x-4 sm:group-data-[size=default]/alert-dialog-content:place-items-start sm:group-data-[size=default]/alert-dialog-content:text-left sm:group-data-[size=default]/alert-dialog-content:has-data-[slot=alert-dialog-media]:grid-rows-[auto_1fr]",a),...b})}function dc({className:a,...b}){return(0,g.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,i.cn)("bg-muted/50 -mx-4 -mb-4 flex flex-col-reverse gap-2 rounded-b-xl border-t p-4 group-data-[size=sm]/alert-dialog-content:grid group-data-[size=sm]/alert-dialog-content:grid-cols-2 sm:flex-row sm:justify-end",a),...b})}function dd({className:a,...b}){return(0,g.jsx)(c6.Title,{"data-slot":"alert-dialog-title",className:(0,i.cn)("text-base font-medium sm:group-data-[size=default]/alert-dialog-content:group-has-data-[slot=alert-dialog-media]/alert-dialog-content:col-start-2",a),...b})}function de({className:a,...b}){return(0,g.jsx)(c6.Description,{"data-slot":"alert-dialog-description",className:(0,i.cn)("text-muted-foreground *:[a]:hover:text-foreground text-sm text-balance md:text-pretty *:[a]:underline *:[a]:underline-offset-3",a),...b})}function df({className:a,...b}){return(0,g.jsx)(h.Button,{"data-slot":"alert-dialog-action",className:(0,i.cn)(a),...b})}function dg({className:a,variant:b="outline",size:c="default",...d}){return(0,g.jsx)(c6.Close,{"data-slot":"alert-dialog-cancel",className:(0,i.cn)(a),render:(0,g.jsx)(h.Button,{variant:b,size:c}),...d})}function dh({isOpen:a,onClose:b,onConfirm:c,title:d,description:e,confirmText:f="Confirm",cancelText:h="Cancel"}){return(0,g.jsx)(c7,{open:a,onOpenChange:b,children:(0,g.jsxs)(da,{children:[(0,g.jsxs)(db,{children:[(0,g.jsx)(dd,{children:d}),(0,g.jsx)(de,{children:e})]}),(0,g.jsxs)(dc,{children:[(0,g.jsx)(dg,{onClick:b,children:h}),(0,g.jsx)(df,{onClick:c,children:f})]})]})})}let di=[20,1,18,4,13,6,10,15,2,17,3,19,7,16,8,11,14,9,12,5],dj={single:1,double:2,triple:3},dk=360/di.length,dl=(a,b)=>{let c=(b-90)*Math.PI/180;return{x:100+a*Math.cos(c),y:100+a*Math.sin(c)}},dm=[{key:"double",outerRadius:100,innerRadius:90,modifier:"double",getClassName:a=>a%2==0?"fill-red-600 dark:fill-red-500":"fill-green-600 dark:fill-green-500"},{key:"outer-single",outerRadius:90,innerRadius:60,modifier:"single",getClassName:a=>a%2==0?"fill-neutral-100 dark:fill-neutral-800":"fill-neutral-300 dark:fill-neutral-700"},{key:"triple",outerRadius:60,innerRadius:50,modifier:"triple",getClassName:a=>a%2==0?"fill-red-500 dark:fill-red-400":"fill-green-500 dark:fill-green-400"},{key:"inner-single",outerRadius:50,innerRadius:25,modifier:"single",getClassName:a=>a%2==0?"fill-neutral-100 dark:fill-neutral-800":"fill-neutral-300 dark:fill-neutral-700"}],dn=a=>a?"cursor-not-allowed":"cursor-pointer";function dp({onScoreEntry:a,disabled:b=!1}){let[c,d]=(0,p.useState)(null);(0,p.useEffect)(()=>{if(c){let a=setTimeout(()=>d(null),200);return()=>clearTimeout(a)}},[c]);let e=(c,e,f)=>{b||(d(f),a(c,e))};return(0,g.jsxs)(j,{children:[(0,g.jsx)(k,{className:"pb-2",children:(0,g.jsx)(l,{className:"text-center text-lg",children:"Dartboard"})}),(0,g.jsxs)(n,{className:"flex flex-col items-center gap-4",children:[(0,g.jsxs)("svg",{viewBox:"0 0 200 200",role:"img","aria-label":"Interactive dartboard",className:(0,i.cn)("h-[260px] w-[260px] overflow-visible sm:h-[320px] sm:w-[320px]",b&&"pointer-events-none opacity-60",dn(b)),children:[dm.map(a=>di.map((d,f)=>{var h,j,k;let l,m,n,o,p,q=f*dk-dk/2,r=(h=a.outerRadius,j=a.innerRadius,l=dl(h,k=q+dk),m=dl(h,q),n=dl(j,q),o=dl(j,k),p=k-q<=180?0:1,`M ${l.x} ${l.y} A ${h} ${h} 0 ${p} 0 ${m.x} ${m.y} L ${n.x} ${n.y} A ${j} ${j} 0 ${p} 1 ${o.x} ${o.y} Z`),s=dj[a.modifier],t=`${a.key}-${d}`,u=c===t;return(0,g.jsx)("path",{d:r,onClick:()=>e(d*s,a.modifier,t),className:(0,i.cn)(a.getClassName(f),dn(b),"stroke-background stroke-[0.5px] transition-opacity duration-200",u&&"opacity-60"),children:(0,g.jsxs)("title",{children:[a.modifier," ",d]})},t)})),di.map((a,b)=>{let c=dl(108,b*dk);return(0,g.jsx)("text",{x:c.x,y:c.y,textAnchor:"middle",dominantBaseline:"middle",className:"fill-muted-foreground pointer-events-none text-xs font-semibold",children:a},`label-${a}`)}),(0,g.jsx)("circle",{cx:100,cy:100,r:25,className:(0,i.cn)("stroke-background fill-green-600 stroke-[0.5px] transition-opacity duration-200 dark:fill-green-500",dn(b),"outer-bull"===c&&"opacity-60"),onClick:()=>e(25,"single","outer-bull"),children:(0,g.jsx)("title",{children:"Outer bull (25)"})}),(0,g.jsx)("circle",{cx:100,cy:100,r:10,className:(0,i.cn)("stroke-background fill-red-600 stroke-[0.5px] transition-opacity duration-200 dark:fill-red-500",dn(b),"bullseye"===c&&"opacity-60"),onClick:()=>e(50,"double","bullseye"),children:(0,g.jsx)("title",{children:"Bullseye (50)"})})]}),(0,g.jsx)("p",{className:"text-muted-foreground text-xs",children:"Select a segment to enter the score."})]})]})}let dq=(0,a.i(42261).cva)("h-5 gap-1 rounded-4xl border border-transparent px-2 py-0.5 text-xs font-medium transition-all has-data-[icon=inline-end]:pr-1.5 has-data-[icon=inline-start]:pl-1.5 [&>svg]:size-3! inline-flex items-center justify-center w-fit whitespace-nowrap shrink-0 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive overflow-hidden group/badge",{variants:{variant:{default:"bg-primary text-primary-foreground [a]:hover:bg-primary/80",secondary:"bg-secondary text-secondary-foreground [a]:hover:bg-secondary/80",destructive:"bg-destructive/10 [a]:hover:bg-destructive/20 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 text-destructive dark:bg-destructive/20",outline:"border-border text-foreground [a]:hover:bg-muted [a]:hover:text-muted-foreground",ghost:"hover:bg-muted hover:text-muted-foreground dark:hover:bg-muted/50",link:"text-primary underline-offset-4 hover:underline"}},defaultVariants:{variant:"default"}});function dr({className:a,variant:b="default",render:c,...d}){var e;return e={defaultTagName:"span",props:(0,aM.mergeProps)({className:(0,i.cn)(dq({variant:b}),a)},d),render:c,state:{slot:"badge",variant:b}},(0,aL.useRenderElement)(e.defaultTagName??"div",e,e)}let ds=(0,bO.default)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);function dt({players:a,activePlayerId:b,currentLeg:c,dartsInVisit:d,currentVisitScore:e,checkoutSuggestion:f,bust:h}){let i=a.find(a=>a.id===b);return(0,g.jsx)("div",{className:"mb-4 space-y-4",children:(0,g.jsxs)(j,{children:[(0,g.jsx)(k,{className:"pb-2",children:(0,g.jsxs)(l,{className:"text-center text-xl",children:[i.name,"'s Turn"]})}),(0,g.jsxs)(n,{children:[1===a.length?(0,g.jsxs)("div",{className:"bg-muted flex flex-col items-center rounded-lg p-2",children:[(0,g.jsx)("span",{className:"text-sm font-medium",children:i.name}),(0,g.jsx)("span",{className:`text-4xl font-bold ${f?"text-green-500":""}`,children:i.score}),(0,g.jsxs)("span",{className:"text-muted-foreground text-xs",children:["Legs won: ",i.legsWon]})]}):(0,g.jsx)("div",{className:"grid grid-cols-2 gap-4",children:a.map(a=>(0,g.jsxs)("div",{className:`flex flex-col items-center rounded-lg p-2 ${a.id===b?"bg-muted":""}`,children:[(0,g.jsx)("span",{className:"text-sm font-medium",children:a.name}),(0,g.jsx)("span",{className:`text-4xl font-bold ${a.id===b&&f?"text-green-500":""}`,children:a.score}),(0,g.jsxs)("span",{className:"text-muted-foreground text-xs",children:["Legs won: ",a.legsWon]})]},a.id))}),!!f&&(0,g.jsxs)("div",{className:"mt-3 flex items-center gap-2 rounded-md border border-green-200 bg-green-50 p-2",children:[(0,g.jsx)(ds,{className:"h-4 w-4 text-green-600"}),(0,g.jsxs)("div",{children:[(0,g.jsxs)("span",{className:"text-sm font-medium text-green-800",children:["Possible checkout:"," "]}),(0,g.jsx)(dr,{variant:"outline",className:"ml-1 bg-white text-green-700",children:f})]})]}),(0,g.jsxs)("div",{className:"mt-3 text-center",children:[(0,g.jsx)("span",{className:"text-muted-foreground text-sm",children:"Visit score:"}),(0,g.jsx)("span",{className:"ml-2 font-medium",children:e})]}),(0,g.jsx)("div",{className:"mt-3 mb-1 flex justify-center gap-2",children:h?(0,g.jsx)("div",{className:"flex items-center space-x-2",children:(0,g.jsx)("span",{className:"text-red-500",children:"Bust!"})}):[0,1,2].map(a=>(0,g.jsx)("div",{className:`h-3 w-3 rounded-full ${a<d?"bg-primary":"bg-muted-foreground/30"}`},a))}),(0,g.jsxs)("div",{className:"mt-4 grid grid-cols-3 gap-2 text-center text-sm",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-muted-foreground",children:"Leg"}),(0,g.jsx)("p",{className:"font-medium",children:c})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-muted-foreground",children:"Darts"}),(0,g.jsxs)("p",{className:"font-medium",children:[d,"/3"]})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-muted-foreground",children:"Average"}),(0,g.jsx)("p",{className:"font-medium",children:0===i.dartsThrown?0:(i.totalScore/i.dartsThrown).toFixed(2)})]})]})]})]})})}let du=(0,bO.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var b1=b1,dv=a.i(98064),dw=a.i(66705);function dx({onScoreEntry:a,onUndo:b,onFinishVisit:c,dartsInVisit:d,canThrowMoreDarts:e,canUndo:f=!0}){let[i,l]=(0,p.useState)("single"),[m,o]=(0,p.useState)(!1),q=Array.from({length:20},(a,b)=>b+1),r=b=>{a(parseInt(b.currentTarget.value)*("single"===i?1:"double"===i?2:3),i),l("single")};return(0,g.jsxs)(j,{children:[(0,g.jsxs)(k,{className:"flex flex-row items-center justify-between space-y-0 p-4 pb-2 lg:hidden",children:[(0,g.jsx)("h3",{className:"text-sm font-medium",children:"Score Entry"}),(0,g.jsxs)(h.Button,{variant:"ghost",size:"sm",onClick:()=>o(!m),className:"h-8 w-8 p-0",children:[m?(0,g.jsx)(dv.ChevronDown,{className:"h-4 w-4"}):(0,g.jsx)(dw.ChevronUp,{className:"h-4 w-4"}),(0,g.jsxs)("span",{className:"sr-only",children:[m?"Expand":"Collapse"," keypad"]})]})]}),(0,g.jsxs)(n,{className:`p-4 ${m?"hidden lg:block":""}`,children:[(0,g.jsxs)("div",{className:"mb-4 grid grid-cols-3 gap-2",children:[(0,g.jsx)(h.Button,{variant:"single"===i?"default":"outline",onClick:()=>l("single"),className:"h-10",disabled:!e,children:"Single"}),(0,g.jsx)(h.Button,{variant:"double"===i?"default":"outline",onClick:()=>l("double"),className:"h-10",disabled:!e,children:"Double"}),(0,g.jsx)(h.Button,{variant:"triple"===i?"default":"outline",onClick:()=>l("triple"),className:"h-10",disabled:!e,children:"Triple"})]}),(0,g.jsxs)("div",{className:"mb-4 grid grid-cols-5 gap-2",children:[q.map(a=>(0,g.jsx)(h.Button,{value:a,variant:"outline",onClick:r,disabled:!e,className:"h-10 w-full",children:a},a)),(0,g.jsx)(h.Button,{variant:"outline",value:25,onClick:r,disabled:!e||"triple"===i,className:"h-10",children:"Bull"}),(0,g.jsx)(h.Button,{variant:"outline",value:0,onClick:r,disabled:!e||"single"!==i,className:"h-10",children:"Miss"})]}),(0,g.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,g.jsxs)(h.Button,{variant:"outline",onClick:b,disabled:0===d||!f,className:"h-12",children:[(0,g.jsx)(du,{className:"mr-2 h-4 w-4"})," Undo"]}),(0,g.jsxs)(h.Button,{onClick:c,disabled:0===d,className:"h-12",variant:e?"outline":"default",children:[(0,g.jsx)(b1.default,{className:"mr-2 h-4 w-4"}),e?"Finish Visit":"Confirm Visit"]})]})]})]})}a.s([],61197),a.i(61197);var dy=a.i(82557);function dz(a){let{children:b,open:c,defaultOpen:d=!1,onOpenChange:e,onOpenChangeComplete:f,disablePointerDismissal:h=!1,modal:i=!0,actionsRef:j,handle:k,triggerId:l,defaultTriggerId:m=null}=a,n=cA(!0),o=!!n,q=(0,cq.useRefWithInit)(()=>k?.store??new cG({open:d,openProp:c,activeTriggerId:m,triggerIdProp:l,modal:i,disablePointerDismissal:h,nested:o})).current;(0,dy.useOnFirstRender)(()=>{void 0===c&&!1===q.state.open&&!0===d&&q.update({open:!0,activeTriggerId:m})}),q.useControlledProp("openProp",c),q.useControlledProp("triggerIdProp",l),q.useSyncedValues({disablePointerDismissal:h,nested:o,modal:i}),q.useContextCallback("onOpenChange",e),q.useContextCallback("onOpenChangeComplete",f);let r=q.useState("payload");cy({store:q,actionsRef:j,parentContext:n?.store.context,onOpenChange:e,triggerIdProp:l});let s=p.useMemo(()=>({store:q}),[q]);return(0,g.jsx)(cz.Provider,{value:s,children:"function"==typeof b?b({payload:r}):b})}a.s(["Backdrop",0,cK,"Close",0,cL,"Description",0,cM,"Handle",()=>c3,"Popup",0,cT,"Portal",0,cX,"Root",()=>dz,"Title",0,cY,"Trigger",0,c_,"Viewport",0,c2,"createHandle",()=>c4],73612);var dA=a.i(73612),dA=dA;let dB=(0,bO.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function dC({...a}){return(0,g.jsx)(dA.Root,{"data-slot":"dialog",...a})}function dD({...a}){return(0,g.jsx)(dA.Portal,{"data-slot":"dialog-portal",...a})}function dE({className:a,...b}){return(0,g.jsx)(dA.Backdrop,{"data-slot":"dialog-overlay",className:(0,i.cn)("data-open:animate-in data-closed:animate-out data-closed:fade-out-0 data-open:fade-in-0 fixed inset-0 isolate z-50 bg-black/10 duration-100 supports-backdrop-filter:backdrop-blur-xs",a),...b})}function dF({className:a,children:b,showCloseButton:c=!0,...d}){return(0,g.jsxs)(dD,{children:[(0,g.jsx)(dE,{}),(0,g.jsxs)(dA.Popup,{"data-slot":"dialog-content",className:(0,i.cn)("bg-background data-open:animate-in data-closed:animate-out data-closed:fade-out-0 data-open:fade-in-0 data-closed:zoom-out-95 data-open:zoom-in-95 ring-foreground/10 fixed top-1/2 left-1/2 z-50 grid w-full max-w-[calc(100%-2rem)] -translate-x-1/2 -translate-y-1/2 gap-6 rounded-xl p-6 text-sm ring-1 duration-100 outline-none sm:max-w-md",a),...d,children:[b,c&&(0,g.jsxs)(dA.Close,{"data-slot":"dialog-close",render:(0,g.jsx)(h.Button,{variant:"ghost",className:"absolute top-4 right-4",size:"icon-sm"}),children:[(0,g.jsx)(dB,{}),(0,g.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function dG({className:a,...b}){return(0,g.jsx)("div",{"data-slot":"dialog-header",className:(0,i.cn)("flex flex-col gap-2",a),...b})}function dH({className:a,showCloseButton:b=!1,children:c,...d}){return(0,g.jsxs)("div",{"data-slot":"dialog-footer",className:(0,i.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...d,children:[c,b&&(0,g.jsx)(dA.Close,{render:(0,g.jsx)(h.Button,{variant:"outline"}),children:"Close"})]})}function dI({className:a,...b}){return(0,g.jsx)(dA.Title,{"data-slot":"dialog-title",className:(0,i.cn)("leading-none font-medium",a),...b})}function dJ({className:a,...b}){return(0,g.jsx)(dA.Description,{"data-slot":"dialog-description",className:(0,i.cn)("text-muted-foreground *:[a]:hover:text-foreground text-sm *:[a]:underline *:[a]:underline-offset-3",a),...b})}let dK=Array.from({length:20},(a,b)=>`${b+1}`),dL=Array.from({length:20},(a,b)=>`D${b+1}`),dM=Array.from({length:20},(a,b)=>`T${b+1}`),dN=Object.freeze([...dK,...dL,...dM,"25","D25"].reduce((a,b)=>{let c;return c=b.startsWith("D")?2*Number.parseInt(b.slice(1))||50:b.startsWith("T")?3*Number.parseInt(b.slice(1)):Number.parseInt(b)||25,a[b]=c,a},{})),dO=[...dK,...dL,...dM,"25"],dP=[...dL,"D25"];var dQ=a.i(34245),dR={};!function a(b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=!!(b.Worker&&b.Blob&&b.Promise&&b.OffscreenCanvas&&b.OffscreenCanvasRenderingContext2D&&b.HTMLCanvasElement&&b.HTMLCanvasElement.prototype.transferControlToOffscreen&&b.URL&&b.URL.createObjectURL),r="function"==typeof Path2D&&"function"==typeof DOMMatrix;function s(){}function t(a){var d=c.exports.Promise,e=void 0!==d?d:b.Promise;return"function"==typeof e?new e(a):(a(s,s),null)}var u=(f=function(){if(!b.OffscreenCanvas)return!1;try{var a=new OffscreenCanvas(1,1),c=a.getContext("2d");c.fillRect(0,0,1,1);var d=a.transferToImageBitmap();c.createPattern(d,"no-repeat")}catch(a){return!1}return!0}(),g=new Map,{transform:function(a){if(f)return a;if(g.has(a))return g.get(a);var b=new OffscreenCanvas(a.width,a.height);return b.getContext("2d").drawImage(a,0,0),g.set(a,b),b},clear:function(){g.clear()}}),v=(j=Math.floor(1e3/60),k={},l=0,"function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame?(h=function(a){var b=Math.random();return k[b]=requestAnimationFrame(function c(d){l===d||l+j-1<d?(l=d,delete k[b],a()):k[b]=requestAnimationFrame(c)}),b},i=function(a){k[a]&&cancelAnimationFrame(k[a])}):(h=function(a){return setTimeout(a,j)},i=function(a){return clearTimeout(a)}),{frame:h,cancel:i}),w=(o={},function(){if(m)return m;if(!d&&q){var b=["var CONFETTI, SIZE = {}, module = {};","("+a.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {\n  if (msg.data.options) {\n    CONFETTI(msg.data.options).then(function () {\n      if (msg.data.callback) {\n        postMessage({ callback: msg.data.callback });\n      }\n    });\n  } else if (msg.data.reset) {\n    CONFETTI && CONFETTI.reset();\n  } else if (msg.data.resize) {\n    SIZE.width = msg.data.resize.width;\n    SIZE.height = msg.data.resize.height;\n  } else if (msg.data.canvas) {\n    SIZE.width = msg.data.canvas.width;\n    SIZE.height = msg.data.canvas.height;\n    CONFETTI = module.exports.create(msg.data.canvas);\n  }\n}"].join("\n");try{m=new Worker(URL.createObjectURL(new Blob([b])))}catch(a){return"u">typeof console&&"function"==typeof console.warn&&console.warn(" Could not load worker",a),null}var c=m;function e(a,b){c.postMessage({options:a||{},callback:b})}c.init=function(a){var b=a.transferControlToOffscreen();c.postMessage({canvas:b},[b])},c.fire=function(a,b,d){if(n)return e(a,null),n;var f=Math.random().toString(36).slice(2);return n=t(function(b){function g(a){a.data.callback===f&&(delete o[f],c.removeEventListener("message",g),n=null,u.clear(),d(),b())}c.addEventListener("message",g),e(a,f),o[f]=g.bind(null,{data:{callback:f}})})},c.reset=function(){for(var a in c.postMessage({reset:!0}),o)o[a](),delete o[a]}}return m}),x={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function y(a,b,c){var d;return d=a&&null!=a[b]?a[b]:x[b],c?c(d):d}function z(a){return a<0?0:Math.floor(a)}function A(a){return parseInt(a,16)}function B(a){return a.map(C)}function C(a){var b=String(a).replace(/[^0-9a-f]/gi,"");return b.length<6&&(b=b[0]+b[0]+b[1]+b[1]+b[2]+b[2]),{r:A(b.substring(0,2)),g:A(b.substring(2,4)),b:A(b.substring(4,6))}}function D(a){a.width=document.documentElement.clientWidth,a.height=document.documentElement.clientHeight}function E(a){var b=a.getBoundingClientRect();a.width=b.width,a.height=b.height}function F(a,c){var f,g=!a,h=!!y(c||{},"resize"),i=!1,j=y(c,"disableForReducedMotion",Boolean),k=q&&y(c||{},"useWorker")?w():null,l=g?D:E,m=!!a&&!!k&&!!a.__confetti_initialized,n="function"==typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function o(c){var o,p=j||y(c,"disableForReducedMotion",Boolean),q=y(c,"zIndex",Number);if(p&&n)return t(function(a){a()});g&&f?a=f.canvas:g&&!a&&((o=document.createElement("canvas")).style.position="fixed",o.style.top="0px",o.style.left="0px",o.style.pointerEvents="none",o.style.zIndex=q,a=o,document.body.appendChild(a)),h&&!m&&l(a);var s={width:a.width,height:a.height};function w(){if(k){var b={getBoundingClientRect:function(){if(!g)return a.getBoundingClientRect()}};l(b),k.postMessage({resize:{width:b.width,height:b.height}});return}s.width=s.height=null}function x(){f=null,h&&(i=!1,b.removeEventListener("resize",w)),g&&a&&(document.body.contains(a)&&document.body.removeChild(a),a=null,m=!1)}return(k&&!m&&k.init(a),m=!0,k&&(a.__confetti_initialized=!0),h&&!i&&(i=!0,b.addEventListener("resize",w,!1)),k)?k.fire(c,s,x):function(b,c,g){for(var h,i,j,k,m,n,o,p=y(b,"particleCount",z),q=y(b,"angle",Number),s=y(b,"spread",Number),w=y(b,"startVelocity",Number),x=y(b,"decay",Number),A=y(b,"gravity",Number),C=y(b,"drift",Number),D=y(b,"colors",B),E=y(b,"ticks",Number),F=y(b,"shapes"),G=y(b,"scalar"),H=!!y(b,"flat"),I=((h=y(b,"origin",Object)).x=y(h,"x",Number),h.y=y(h,"y",Number),h),J=p,K=[],L=a.width*I.x,M=a.height*I.y;J--;)K.push(function(a){var b=a.angle*(Math.PI/180),c=a.spread*(Math.PI/180);return{x:a.x,y:a.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*a.startVelocity+Math.random()*a.startVelocity,angle2D:-b+(.5*c-Math.random()*c),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:a.color,shape:a.shape,tick:0,totalTicks:a.ticks,decay:a.decay,drift:a.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*a.gravity,ovalScalar:.6,scalar:a.scalar,flat:a.flat}}({x:L,y:M,angle:q,spread:s,startVelocity:w,color:D[J%D.length],shape:F[Math.floor(Math.random()*(F.length-0))+0],ticks:E,decay:x,gravity:A,drift:C,scalar:G,flat:H}));return f?f.addFettis(K):(i=a,m=K.slice(),n=i.getContext("2d"),o=t(function(a){function b(){j=k=null,n.clearRect(0,0,c.width,c.height),u.clear(),g(),a()}j=v.frame(function a(){d&&(c.width!==e.width||c.height!==e.height)&&(c.width=i.width=e.width,c.height=i.height=e.height),c.width||c.height||(l(i),c.width=i.width,c.height=i.height),n.clearRect(0,0,c.width,c.height),(m=m.filter(function(a){return function(a,b){b.x+=Math.cos(b.angle2D)*b.velocity+b.drift,b.y+=Math.sin(b.angle2D)*b.velocity+b.gravity,b.velocity*=b.decay,b.flat?(b.wobble=0,b.wobbleX=b.x+10*b.scalar,b.wobbleY=b.y+10*b.scalar,b.tiltSin=0,b.tiltCos=0,b.random=1):(b.wobble+=b.wobbleSpeed,b.wobbleX=b.x+10*b.scalar*Math.cos(b.wobble),b.wobbleY=b.y+10*b.scalar*Math.sin(b.wobble),b.tiltAngle+=.1,b.tiltSin=Math.sin(b.tiltAngle),b.tiltCos=Math.cos(b.tiltAngle),b.random=Math.random()+2);var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,s,t=b.tick++/b.totalTicks,v=b.x+b.random*b.tiltCos,w=b.y+b.random*b.tiltSin,x=b.wobbleX+b.random*b.tiltCos,y=b.wobbleY+b.random*b.tiltSin;if(a.fillStyle="rgba("+b.color.r+", "+b.color.g+", "+b.color.b+", "+(1-t)+")",a.beginPath(),r&&"path"===b.shape.type&&"string"==typeof b.shape.path&&Array.isArray(b.shape.matrix)){a.fill((c=b.shape.path,d=b.shape.matrix,e=b.x,f=b.y,g=.1*Math.abs(x-v),h=.1*Math.abs(y-w),i=Math.PI/10*b.wobble,j=new Path2D(c),(k=new Path2D).addPath(j,new DOMMatrix(d)),(l=new Path2D).addPath(k,new DOMMatrix([Math.cos(i)*g,Math.sin(i)*g,-Math.sin(i)*h,Math.cos(i)*h,e,f])),l))}else if("bitmap"===b.shape.type){var z=Math.PI/10*b.wobble,A=.1*Math.abs(x-v),B=.1*Math.abs(y-w),C=b.shape.bitmap.width*b.scalar,D=b.shape.bitmap.height*b.scalar,E=new DOMMatrix([Math.cos(z)*A,Math.sin(z)*A,-Math.sin(z)*B,Math.cos(z)*B,b.x,b.y]);E.multiplySelf(new DOMMatrix(b.shape.matrix));var F=a.createPattern(u.transform(b.shape.bitmap),"no-repeat");F.setTransform(E),a.globalAlpha=1-t,a.fillStyle=F,a.fillRect(b.x-C/2,b.y-D/2,C,D),a.globalAlpha=1}else if("circle"===b.shape)a.ellipse?a.ellipse(b.x,b.y,Math.abs(x-v)*b.ovalScalar,Math.abs(y-w)*b.ovalScalar,Math.PI/10*b.wobble,0,2*Math.PI):(m=b.x,n=b.y,o=Math.abs(x-v)*b.ovalScalar,p=Math.abs(y-w)*b.ovalScalar,q=Math.PI/10*b.wobble,s=2*Math.PI,a.save(),a.translate(m,n),a.rotate(q),a.scale(o,p),a.arc(0,0,1,0,s,void 0),a.restore());else if("star"===b.shape)for(var G=Math.PI/2*3,H=4*b.scalar,I=8*b.scalar,J=b.x,K=b.y,L=5,M=Math.PI/5;L--;)J=b.x+Math.cos(G)*I,K=b.y+Math.sin(G)*I,a.lineTo(J,K),G+=M,J=b.x+Math.cos(G)*H,K=b.y+Math.sin(G)*H,a.lineTo(J,K),G+=M;else a.moveTo(Math.floor(b.x),Math.floor(b.y)),a.lineTo(Math.floor(b.wobbleX),Math.floor(w)),a.lineTo(Math.floor(x),Math.floor(y)),a.lineTo(Math.floor(v),Math.floor(b.wobbleY));return a.closePath(),a.fill(),b.tick<b.totalTicks}(n,a)})).length?j=v.frame(a):b()}),k=b}),(f={addFettis:function(a){return m=m.concat(a),o},canvas:i,promise:o,reset:function(){j&&v.cancel(j),k&&k()}}).promise)}(c,s,x)}return o.reset=function(){k&&k.reset(),f&&f.reset()},o}function G(){return p||(p=F(null,{useWorker:!0,resize:!0})),p}c.exports=function(){return G().apply(this,arguments)},c.exports.reset=function(){G().reset()},c.exports.create=F,c.exports.shapeFromPath=function(a){if(!r)throw Error("path confetti are not supported in this browser");"string"==typeof a?d=a:(d=a.path,e=a.matrix);var b=new Path2D(d),c=document.createElement("canvas").getContext("2d");if(!e){for(var d,e,f,g,h=1e3,i=1e3,j=0,k=0,l=0;l<1e3;l+=2)for(var m=0;m<1e3;m+=2)c.isPointInPath(b,l,m,"nonzero")&&(h=Math.min(h,l),i=Math.min(i,m),j=Math.max(j,l),k=Math.max(k,m));f=j-h;var n=Math.min(10/f,10/(g=k-i));e=[n,0,0,n,-Math.round(f/2+h)*n,-Math.round(g/2+i)*n]}return{type:"path",path:d,matrix:e}},c.exports.shapeFromText=function(a){var b,c=1,d="#000000",e='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';"string"==typeof a?b=a:(b=a.text,c="scalar"in a?a.scalar:c,e="fontFamily"in a?a.fontFamily:e,d="color"in a?a.color:d);var f=10*c,g=""+f+"px "+e,h=new OffscreenCanvas(f,f),i=h.getContext("2d");i.font=g;var j=i.measureText(b),k=Math.ceil(j.actualBoundingBoxRight+j.actualBoundingBoxLeft),l=Math.ceil(j.actualBoundingBoxAscent+j.actualBoundingBoxDescent),m=j.actualBoundingBoxLeft+2,n=j.actualBoundingBoxAscent+2;k+=4,l+=4,(i=(h=new OffscreenCanvas(k,l)).getContext("2d")).font=g,i.fillStyle=d,i.fillText(b,m,n);var o=1/c;return{type:"bitmap",bitmap:h.transferToImageBitmap(),matrix:[o,0,0,o,-k*o/2,-l*o/2]}}}(function(){return"u">typeof self?self:this||{}}(),dR,!1);let dS=dR.exports;function dT(){let{players:a,activePlayerId:b,gameSettings:c,gamePhase:d,finishVisit:e,startNextLeg:f,currentLeg:j,handleDartThrow:k,handleUndoThrow:l,resetGame:m,legWinner:n,matchWinner:o}=(0,a5.useGameStore)(a=>a),{state:q,sendEvent:r}=bY(),{clearPendingGame:s}=a8(),[t,u]=(0,p.useState)(!1),[v,w]=(0,p.useState)(!1),[x,y]=(0,p.useState)(!1),[z,A]=(0,p.useState)(null),[B,C]=(0,p.useState)(0),[D,E]=(0,p.useState)(0),[F,G]=(0,p.useState)(!1),{isLargeScreen:H,settings:I}=(0,dQ.useUiSettings)(),J=a.find(a=>a.id===b),K=D<3&&!F,L=I.enhancedView;(0,p.useEffect)(()=>{if(c.checkoutAssist&&J){let a=3-D;A(function(a,b,c){if(a<2||a>170||b<1||b>3)return null;let d=(a,b,e)=>{if(1===a){for(let a of c?dP:dO)if(dN[a]===b)return[...e,a];return null}for(let f of dO){let g=b-(dN[f]??0);if(g>=(c?2:1)){let b=d(a-1,g,[...e,f]);if(b)return b}}return null};for(let c=1;c<=b;c++){let b=d(c,a,[]);if(b)return b.join(" - ")}return null}(J.score,a,"double"===c.outMode))}else A(null)},[J,J.score,D,c.checkoutAssist,c.outMode]),(0,p.useEffect)(()=>{let a=new AbortController;return window.addEventListener("beforeunload",a=>{a.preventDefault()},{signal:a.signal}),()=>{a.abort()}},[]),(0,p.useEffect)(()=>{if(v){let a=setTimeout(()=>{w(!1)},3e3);return()=>clearTimeout(a)}},[v]),(0,p.useEffect)(()=>{q.isActive&&"connected"===q.status&&a.length>0&&r({type:"gameUpdate",metadata:{gameId:q.connection?.gameId||"",startingScore:c.startingScore,outMode:c.outMode,gameMode:c.gameMode,legsToWin:c.legsToWin,players:a.map(a=>({id:a.id,name:a.name,score:a.score,legsWon:a.legsWon,dartsThrown:a.dartsThrown,totalScore:a.totalScore})),currentLeg:j,activePlayerId:b,gamePhase:d,legWinner:n,matchWinner:o}})},[q.isActive,q.status,q.connection,a,c,j,b,n,o,d,r]);let M=(b,c)=>{let d=k(b,c),e=q.isActive&&"connected"===q.status;if(bh.default.capture("dart_thrown",{history_event:"dart_thrown",leg_number:j,player_name:J.name,score:b,validated_score:d.validatedScore,modifier:c,is_bust:d.isBust}),E(a=>a+1),C(a=>a+d.validatedScore),G(d.isBust),d.isLegWin){d.isMatchWin&&null!==d.matchWinner?(e&&r({type:"matchFinish",winnerId:d.matchWinner}),bh.default.capture("match_won",{history_event:"match_won",leg_number:j,player_count:a.length,player_name:J.name})):bh.default.capture("leg_won",{history_event:"leg_won",leg_number:j,player_count:a.length}),u(!0),I.noBullshitMode||dS({particleCount:100,spread:70,origin:{y:.6}});return}180===d.currentVisitTotal&&(bh.default.capture("180_scored",{history_event:"180_scored",leg_number:j}),w(!0),I.noBullshitMode||dS({particleCount:100,spread:70,origin:{y:.6}}))},N=()=>{bh.default.capture("visit_completed",{history_event:"visit_completed",leg_number:j,player_name:J.name,visit_score:B,darts_in_visit:D}),e(),E(0),C(0),G(!1),w(!1)},O=()=>{let a=l();a.success&&(G(!1),E(a=>a-1),C(a.newVisitTotal),w(!1))},P={onScoreEntry:M,disabled:!K};return(0,g.jsxs)("div",{className:(0,i.cn)("flex h-full flex-col",L?"lg:mx-auto lg:max-w-6xl":"lg:mx-auto lg:w-xl"),children:[v&&!I.noBullshitMode&&(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("div",{className:"pointer-events-none absolute inset-0 z-10 flex items-center justify-center",children:(0,g.jsx)("div",{className:"animate-bounce rounded-lg bg-black/70 px-8 py-4 text-4xl font-bold text-white",children:"ONE HUNDRED AND EIGHTY!"})})}),(0,g.jsx)(dt,{players:a,activePlayerId:b,currentLeg:j,dartsInVisit:D,currentVisitScore:B,checkoutSuggestion:z,bust:F}),L?(0,g.jsxs)("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-start",children:[(0,g.jsxs)("div",{className:"flex flex-col gap-4 lg:w-1/2",children:[(0,g.jsx)(dx,{onScoreEntry:M,onUndo:O,onFinishVisit:N,dartsInVisit:D,canThrowMoreDarts:K,canUndo:null===n&&null===o}),!H&&(0,g.jsx)(dp,{...P}),(0,g.jsx)(h.Button,{variant:"destructive",onClick:()=>y(!0),children:"Reset Match"})]}),H&&(0,g.jsx)("div",{className:"w-1/2",children:(0,g.jsx)(dp,{...P})})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(dx,{onScoreEntry:M,onUndo:O,onFinishVisit:N,dartsInVisit:D,canThrowMoreDarts:K,canUndo:null===n&&null===o}),(0,g.jsx)(h.Button,{variant:"destructive",className:"mt-6",onClick:()=>y(!0),children:"Reset Game"})]}),(0,g.jsx)(dC,{open:t,onOpenChange:u,children:(0,g.jsxs)(dF,{className:"sm:max-w-md",children:[(0,g.jsxs)(dG,{children:[(0,g.jsx)(dI,{className:"text-center text-xl",children:"Leg Won!"}),(0,g.jsxs)(dJ,{className:"text-center",children:[a.find(a=>a.id===n)?.name," has won the leg!"]})]}),(0,g.jsx)("div",{className:"grid gap-4 py-4",children:(0,g.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,g.jsx)("h3",{className:"text-lg font-medium",children:"Current Score"}),(0,g.jsx)("div",{className:"text-3xl font-bold",children:a.map(a=>(0,g.jsxs)("div",{className:"flex justify-between gap-8",children:[(0,g.jsxs)("span",{children:[a.name,":"]}),(0,g.jsxs)("span",{children:[a.legsWon," legs"]})]},a.id))})]})}),(0,g.jsx)(dH,{className:"sm:justify-center",children:(0,g.jsx)(h.Button,{onClick:()=>{u(!1),f(),E(0),C(0),w(!1)},children:"Next Leg"})})]})}),(0,g.jsx)(dh,{isOpen:x,onClose:()=>y(!1),onConfirm:()=>{bh.default.capture("match_reset",{history_event:"match_reset",leg_number:j,player_count:a.length}),s(),m()},title:"Reset Match",description:"Are you sure you want to reset the match? All progress will be lost."})]})}function dU({onNewGame:a}){return(0,g.jsx)(h.Button,{onClick:()=>{bh.default.capture("new_game_started_from_game_over",{history_event:"new_game_started_from_game_over"}),a()},className:"w-full",children:"New Game"})}dR.exports.create;var dV=a.i(66909);function dW({winner:a,gameHistory:b,onNewGame:c}){let d=(0,dV.calculatePlayerStats)(b).find(b=>b.name===a.name),e=a.dartsThrown>0?Number((a.totalScore/a.dartsThrown*3).toFixed(2)):0,f=e>(d?.averagePerVisit??0)&&(d?.matchesPlayed??0)>0;return(0,g.jsx)("div",{children:(0,g.jsxs)(j,{className:"mx-auto w-full max-w-md",children:[(0,g.jsx)(k,{children:(0,g.jsx)(l,{className:"text-center text-2xl",children:"Match Over!"})}),(0,g.jsxs)(n,{className:"space-y-4",children:[(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("h2",{className:"text-xl font-semibold",children:"Winner"}),(0,g.jsx)("p",{className:"mt-2 text-3xl font-bold",children:a.name}),(0,g.jsxs)("p",{className:"mt-1 text-lg",children:["Legs won: ",a.legsWon]})]}),(0,g.jsxs)("div",{className:"bg-muted rounded-lg p-4",children:[(0,g.jsx)("h3",{className:"mb-2 font-medium",children:"Performance Stats"}),(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsxs)("div",{className:"flex justify-between",children:[(0,g.jsx)("span",{children:"Average Score:"}),(0,g.jsx)("span",{className:"font-medium",children:e})]}),(d?.matchesPlayed??0)>0&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"flex justify-between",children:[(0,g.jsx)("span",{children:"Historical Average:"}),(0,g.jsx)("span",{className:"font-medium",children:d?.averagePerVisit})]}),(0,g.jsxs)("div",{className:"flex justify-between",children:[(0,g.jsx)("span",{children:"Performance:"}),(0,g.jsx)("span",{className:`font-medium ${f?"text-green-500":"text-amber-500"}`,children:f?"Above Average":"Below Average"})]})]})]})]})]}),(0,g.jsx)(o,{children:(0,g.jsx)(dU,{onNewGame:c})})]})})}var dX=a.i(87112);function dY(){let{gameSettings:a,currentLeg:b,gamePhase:c,players:d,matchId:e,activePlayerId:f,currentVisitScores:h,currentVisitDarts:i,historyLegs:j,matchWinner:k,resetGame:l}=(0,a5.useGameStore)(a=>a),{gameHistory:m,addGame:n}=(0,dX.useGameHistory)(),{savePendingGame:o,clearPendingGame:q}=a8(),[r,s]=(0,p.useState)(!0);switch((0,p.useEffect)(()=>{"playing"!==c||j.some(a=>a.visits.length>0)&&e&&o({matchId:e,date:new Date().toISOString(),players:d,activePlayerId:f,gameSettings:a,currentLeg:b,currentVisitScores:h,currentVisitDarts:i,historyLegs:j})},[c,j,e,d,f,a,b,h,i,o]),(0,p.useEffect)(()=>{if(r&&"gameOver"===c&&null!==k){s(!1),q();let c=d.find(a=>a.id===k),f=c&&c.dartsThrown>0?Number((c.totalScore/c.dartsThrown*3).toFixed(2)):0;bh.default.capture("match_completed",{history_event:"match_completed",player_count:d.length,legs_played:b,starting_score:a.startingScore,out_mode:a.outMode,winner_average:f}),n({id:e??crypto.randomUUID(),date:new Date().toISOString(),players:d.map(a=>({id:a.id,name:a.name,legsWon:a.legsWon})),winner:c?.name||"",gameMode:`${a.startingScore} ${a.outMode} out`,legsPlayed:b,settings:a,legs:j})}},[c,k,q,d,e,a,b,j,n,r]),c){case"setup":default:return(0,g.jsx)(bo,{});case"preGame":return(0,g.jsx)(cp,{});case"playing":return(0,g.jsx)(dT,{});case"gameOver":if(k)return(0,g.jsx)(dW,{winner:d.find(a=>a.id===k),gameHistory:m,onNewGame:l});return(0,g.jsx)(bo,{})}}let dZ=process.env.NEXT_PUBLIC_LIVE_STREAM_WORKER_URL||"http://localhost:8787";function d$({gameId:a}){let b=(0,p.useRef)(bW(a)),[c,d]=(0,p.useState)(null),[e,f]=(0,p.useState)("connecting"),[i,m]=(0,p.useState)(null),[o,q]=(0,p.useState)(!1),[r,s]=(0,p.useState)(null),t=(0,p.useRef)(Date.now()),u=(0,p.useRef)(null),v=ca("enableDebugLogs");return((0,p.useEffect)(()=>{if(!v)return;let a=()=>{let a=b.current.getLastEventReceivedAt();a?s(b_(a)):s(null)};a();let c=setInterval(a,1e3);return()=>clearInterval(c)},[v]),(0,p.useEffect)(()=>{b.current=bW(a)},[a]),(0,p.useEffect)(()=>{let c=b.current,e=()=>{u.current&&clearTimeout(u.current)},g=()=>{e(),u.current=setTimeout(()=>{q(Date.now()-t.current>45e3)},45e3)};t.current=Date.now(),q(!1),g(),c.connect(dZ,{gameId:a,hostSecret:""},!1);let h=c.subscribeToConnectionState(a=>{"connected"===a?f("connected"):("connecting"===a||"reconnecting"===a)&&f("connecting")}),i=c.subscribe(a=>{switch(t.current=Date.now(),q(!1),g(),a.type){case"sync":d(a.metadata),f("connected"),m(null);break;case"broadcast":{let b=a.event;switch(b.type){case"gameUpdate":d(b.metadata),f("connected"),m(null);break;case"score":d(a=>a?{...a,players:a.players.map(a=>a.id===b.playerId?{...a,score:b.newScore,totalScore:a.totalScore+b.validatedScore,dartsThrown:a.dartsThrown+1}:a)}:a);break;case"undo":d(a=>a?{...a,players:a.players.map(a=>a.id===b.playerId?{...a,score:a.score+b.lastScore,totalScore:a.totalScore-b.lastScore,dartsThrown:a.dartsThrown-1}:a)}:a);break;case"roundFinish":d(a=>a?b.winnerId?{...a,players:a.players.map(a=>a.id===b.winnerId?{...a,legsWon:a.legsWon+1}:a),legWinner:b.winnerId}:a:a);break;case"matchFinish":d(a=>a?{...a,matchWinner:b.winnerId,gamePhase:"gameOver"}:a)}break}case"error":f("error"),m(a.message)}});return()=>{i(),h(),e()}},[a]),"error"===e)?(0,g.jsx)("div",{className:"flex min-h-screen items-center justify-center p-4",children:(0,g.jsxs)(j,{className:"w-full max-w-md",children:[(0,g.jsx)(k,{children:(0,g.jsx)(l,{className:"text-center text-red-500",children:"Connection Error"})}),(0,g.jsxs)(n,{className:"space-y-4",children:[(0,g.jsx)("p",{className:"text-muted-foreground text-center",children:i||"Failed to connect to live stream"}),(0,g.jsx)("div",{className:"flex justify-center",children:(0,g.jsxs)(h.Button,{onClick:()=>{f("connecting"),m(null),b.current.retryConnection()},variant:"outline",children:[(0,g.jsx)(b4,{className:"mr-2 h-4 w-4"}),"Retry Connection"]})})]})]})}):c&&"connecting"!==e?(0,g.jsxs)("div",{className:"flex min-h-screen flex-col p-4",children:[(0,g.jsxs)("div",{className:"bg-card mb-4 flex items-center justify-center gap-2 rounded-lg p-2",children:[(0,g.jsx)(b2,{className:`h-4 w-4 ${bZ(e)}`}),(0,g.jsx)("span",{className:"text-sm font-medium",children:b$(e,i)}),(0,g.jsxs)("span",{className:"text-muted-foreground text-xs",children:[" Viewing ",c.players.map(a=>a.name).join(" vs ")]}),v&&r&&(0,g.jsxs)("span",{className:"text-muted-foreground text-xs",children:[" Last event: ",r]}),o&&(0,g.jsx)("span",{className:"text-xs font-medium text-amber-600",children:" Stream stale (no updates)"})]}),(0,g.jsxs)("div",{className:"mx-auto w-full max-w-2xl space-y-4",children:[(0,g.jsx)(j,{children:(0,g.jsx)(k,{children:(0,g.jsxs)(l,{className:"text-center",children:["Leg ",Math.max(1,c.currentLeg)," "," ","bestOf"===c.gameMode?"Best of":"First to"," ",c.legsToWin]})})}),c.players.map(a=>{var b,d;return(0,g.jsxs)(j,{className:a.id===c.activePlayerId?"border-primary":void 0,children:[(0,g.jsx)(k,{children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h3",{className:"text-2xl font-bold",children:a.name}),a.id===c.activePlayerId&&(0,g.jsx)("p",{className:"text-muted-foreground text-sm",children:"Currently throwing"})]}),(0,g.jsxs)("div",{className:"text-right",children:[(0,g.jsx)("div",{className:"text-4xl font-bold",children:a.score}),(0,g.jsxs)("div",{className:"text-muted-foreground text-sm",children:["Legs won: ",a.legsWon]})]})]})}),(0,g.jsx)(n,{children:(0,g.jsxs)("div",{className:"text-muted-foreground flex justify-between text-sm",children:[(0,g.jsxs)("span",{children:["Average:"," ",(b=a.totalScore,(d=a.dartsThrown)>0?(b/d*3).toFixed(2):"0.00")]}),(0,g.jsxs)("span",{children:["Darts: ",a.dartsThrown]})]})})]},a.id)}),"gameOver"===c.gamePhase&&c.matchWinner&&(0,g.jsxs)(j,{className:"border-primary bg-primary/5",children:[(0,g.jsx)(k,{children:(0,g.jsx)(l,{className:"text-center text-2xl",children:" Match Over! "})}),(0,g.jsx)(n,{children:(0,g.jsxs)("p",{className:"text-center text-xl font-bold",children:[c.players.find(a=>a.id===c.matchWinner)?.name," ","wins!"]})})]})]})]}):(0,g.jsx)("div",{className:"flex min-h-screen items-center justify-center p-4",children:(0,g.jsx)(j,{className:"w-full max-w-md",children:(0,g.jsx)(k,{children:(0,g.jsx)(l,{className:"text-center",children:(0,g.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,g.jsx)(b2,{className:"h-5 w-5 animate-pulse text-yellow-500"}),"Connecting to Live Stream..."]})})})})})}var d_=a.i(73064);function d0(){let a=(0,d_.useSearchParams)().get("live-stream");return a?(0,g.jsx)("main",{className:"grow flex-col",children:(0,g.jsx)(d$,{gameId:a})}):(0,g.jsx)("main",{className:"grow flex-col p-4",children:(0,g.jsx)(dY,{})})}a.s(["HomeContent",()=>d0],55817)}];

//# sourceMappingURL=_012a6d08._.js.map